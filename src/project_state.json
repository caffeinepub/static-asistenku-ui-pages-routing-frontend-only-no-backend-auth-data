{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 25,
  "summary": "Backend-only scope reinforced: modify ONLY backend/main.mo (no new files, no frontend/routing changes, do not touch backend/authorization/*). Patch requirements include: disable saveCallerUserProfile by keeping signature but always Runtime.trap; enforce superadmin is NOT part of InternalRole (InternalRole only #admin/#finance/#concierge/#asistenmu) while UserRole still includes #superadmin; add persistent userId system (nextUserId counter + userIdByPrincipal map + genUserId/ensureUserId) where userId is NOT stored in profile records; ensure ensureUserId(caller) is invoked in all register* and claimSuperadmin flows; add query getMyUserId() returning ?Text for caller; keep all other core logic unchanged including 1 principalId = 1 role and existing register/query functions. Additional constraint: patch must be APPEND-ONLY—do not modify/reorder/refactor any existing line; append new code at the very bottom of backend/main.mo immediately before the actor’s final closing brace `}`. New append-only foundations requested: implement UserStatus (pending/active/suspended/blacklisted) with admin/superadmin-gated setters/queries and listing by status; implement Partner Level (TipePartner) + fixed hourly rates; and admin/superadmin-only userId lookup utilities, all using existing role storage and requireSuperadmin/requireAdminOrSuperadmin gates, without creating/modifying any profile records or changing claimSuperadmin behavior.",
  "architectural_notes": [
    "All pages are static UI only: no Internet Identity, no backend calls, no mock data, no role/user logic, no auto-redirects; navigation only via clicks.",
    "Use react-router-dom Routes with explicit mappings and a '*' fallback 404 page with a button back to '/'",
    "Global UI style: white background, centered container maxWidth 760 with generous padding, centered logo asistenku-horizontal.png, main card rounded 24px with subtle shadow and ample whitespace; no sidebar/navbar template.",
    "Ensure App.tsx uses BrowserRouter + Routes from react-router-dom and does not crash on load.",
    "All specified page files must default-export a React component; all import paths must be valid (no missing files).",
    "Do not use any external UI libraries; use plain divs + simple className only.",
    "Do not use any images besides asistenku-horizontal.png; write img src exactly \"asistenku-horizontal.png\" (no folder prefix).",
    "Add sufficient top padding so the logo is not covered; ensure no TS/React compile errors and no blank page—route \"/\" must render normally.",
    "Backend is now in-scope: backend/main.mo may be fully implemented per the backend spec (no longer required to be empty/untouched).",
    "For the current backend build request, ONLY modify backend/main.mo; do not change any frontend files."
  ],
  "known_issues": [
    "Unintended frontend changes were made previously; must be reverted so frontend has zero diff for this request.",
    "Previous automated patch/build attempt failed to apply the requested backend/main.mo change (tool error).",
    "saveCallerUserProfile currently overwrites userRoles (can overwrite role) causing repeated/incorrect role state; must be disabled via trap."
  ],
  "isFixRequest": false,
  "existing_features": [
    {
      "id": "feature-do-not-create-edit-or-reference-any-backend-code-keep-backend-main-mo-completely-untouched-and-keep-the-backend-100-empty-no-methods-data-structures",
      "title": "Do not create, edit, or reference any backend code. Keep backend/main.mo completely untouched and keep the backend 100% empty (no methods, data, structures).",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-only-edit-create-the-following-frontend-files-and-no-others-frontend-src-app-tsx-and-the-page-files-listed-by-the-user-under-frontend-src-pages-do-not-edit-any-other-files",
      "title": "Only edit/create the following frontend files (and no others): frontend/src/App.tsx and the page files listed by the user under frontend/src/pages/**. Do not edit any other files.",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-react-router-routes-in-frontend-src-app-tsx-exactly-per-the-mapping-provided-including-a-fallback-that-shows-a-simple-inline-404-view-with-a-button-labeled-kembali-ke-landing-linking-to-do-not-add-any-automatic-redirects",
      "title": "Implement React Router routes in frontend/src/App.tsx exactly per the mapping provided, including a \"*\" fallback that shows a simple inline 404 view with a button labeled \"Kembali ke Landing\" linking to \"/\". Do not add any automatic redirects.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-create-update-all-specified-page-components-as-static-ui-only-pages-pages-may-contain-input-fields-that-accept-typing-but-must-not-submit-anywhere-must-not-call-any-apis-must-not-use-mock-data-and-must-not-include-role-user-checks",
      "title": "Create/update all specified page components as static UI-only pages. Pages may contain input fields that accept typing, but must not submit anywhere, must not call any APIs, must not use mock data, and must not include role/user checks.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-a-consistent-shared-visual-layout-across-all-pages-white-background-centered-container-max-width-760-with-generous-padding-top-centered-logo-image-asistenku-horizontal-png-height-32-main-card-with-24px-rounding-subtle-shadow-20-24px-padding-optional-very-thin-border-lots-of-whitespace-keep-the-ui-clean-calm-premium-with-large-rounded-corners-and-soft-shadows-avoid-saas-template-styling-no-sidebars-no-complex-navbars",
      "title": "Implement a consistent shared visual layout across all pages (white background, centered container max-width 760 with generous padding, top centered logo image \"asistenku-horizontal.png\" height 32, main card with 24px rounding, subtle shadow, 20–24px padding, optional very thin border, lots of whitespace). Keep the UI clean, calm, premium, with large rounded corners and soft shadows; avoid SaaS-template styling (no sidebars, no complex navbars).",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-landing-page-ui-exactly-title-ruang-masuk-subtext-pilih-akses-yang-sesuai-two-large-buttons-linking-to-client-login-and-partner-login-labeled-client-login-and-partner-login-below-that-small-text-belum-punya-akun-with-links-daftar-client-client-register-and-daftar-partner-partner-register-and-a-bottom-small-link-internal-internal",
      "title": "Implement Landing page (\"/\") UI exactly: title \"Ruang Masuk\", subtext \"Pilih akses yang sesuai.\", two large buttons linking to \"/client/login\" and \"/partner/login\" labeled \"Client Login\" and \"Partner Login\"; below that small text \"Belum punya akun?\" with links \"Daftar Client\" -> \"/client/register\" and \"Daftar Partner\" -> \"/partner/register\"; and a bottom small link \"Internal\" -> \"/internal\".",
      "reqIds": [
        "REQ-6"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-clientlogin-client-login-ui-title-masuk-subtext-untuk-client-asistenku-render-two-disabled-buttons-labeled-login-internet-identity-disabled-and-masuk-ke-ruang-kerja-disabled-include-link-belum-punya-akun-daftar-client-register-and-link-kembali",
      "title": "Implement ClientLogin (\"/client/login\") UI: title \"Masuk\", subtext \"Untuk Client Asistenku\"; render two disabled buttons labeled \"Login Internet Identity (Disabled)\" and \"Masuk ke ruang kerja (Disabled)\"; include link \"Belum punya akun? Daftar\" -> \"/client/register\" and link \"Kembali\" -> \"/\".",
      "reqIds": [
        "REQ-7"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-clientregister-client-register-ui-title-daftar-subtext-untuk-client-asistenku-static-form-inputs-typable-for-nama-email-whatsapp-perusahaan-disabled-submit-button-labeled-kirim-disabled-link-kembali",
      "title": "Implement ClientRegister (\"/client/register\") UI: title \"Daftar\", subtext \"Untuk Client Asistenku\"; static form inputs (typable) for Nama, Email, WhatsApp, Perusahaan; disabled submit button labeled \"Kirim (Disabled)\"; link \"Kembali\" -> \"/\".",
      "reqIds": [
        "REQ-8"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-partnerlogin-partner-login-ui-mirroring-clientlogin-with-subtext-untuk-partner-asistenku-include-link-to-partner-register-and-link-kembali-include-the-same-two-disabled-buttons-with-the-exact-labels-specified",
      "title": "Implement PartnerLogin (\"/partner/login\") UI mirroring ClientLogin, with subtext \"Untuk Partner Asistenku\"; include link to \"/partner/register\" and link \"Kembali\" -> \"/\"; include the same two disabled buttons with the exact labels specified.",
      "reqIds": [
        "REQ-9"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-partnerregister-partner-register-ui-title-daftar-subtext-untuk-partner-asistenku-static-form-inputs-typable-for-nama-email-whatsapp-domisili-and-a-textarea-keahlian-disabled-button-kirim-disabled-link-kembali",
      "title": "Implement PartnerRegister (\"/partner/register\") UI: title \"Daftar\", subtext \"Untuk Partner Asistenku\"; static form inputs (typable) for Nama, Email, WhatsApp, Domisili and a textarea Keahlian; disabled button \"Kirim (Disabled)\"; link \"Kembali\" -> \"/\".",
      "reqIds": [
        "REQ-10"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-internallanding-internal-ui-title-internal-subtext-akses-internal-asistenku-buttons-linking-to-internal-login-labeled-internal-login-and-to-internal-register-labeled-internal-register-link-kembali",
      "title": "Implement InternalLanding (\"/internal\") UI: title \"Internal\", subtext \"Akses internal Asistenku.\"; buttons linking to \"/internal/login\" labeled \"Internal Login\" and to \"/internal/register\" labeled \"Internal Register\"; link \"Kembali\" -> \"/\".",
      "reqIds": [
        "REQ-11"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-internallogin-internal-login-ui-title-internal-login-subtext-pilih-role-internal-statis-dulu-display-a-selectable-grid-of-roles-superadmin-admin-finance-concierge-asistenmu-with-local-ui-state-only-selection-highlight-only-no-other-effects-include-two-disabled-buttons-labeled-login-internet-identity-disabled-and-ruang-kerja-disabled-link-kembali-internal",
      "title": "Implement InternalLogin (\"/internal/login\") UI: title \"Internal Login\", subtext \"Pilih role internal (statis dulu).\"; display a selectable grid of roles (Superadmin, Admin, Finance, Concierge, Asistenmu) with local UI state only (selection highlight only; no other effects); include two disabled buttons labeled \"Login Internet Identity (Disabled)\" and \"Ruang kerja (Disabled)\"; link \"Kembali\" -> \"/internal\".",
      "reqIds": [
        "REQ-12"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-internalregister-internal-register-ui-title-internal-register-subtext-pendaftaran-internal-statis-dulu-static-form-inputs-typable-for-nama-email-whatsapp-dropdown-role-with-options-admin-finance-concierge-asistenmu-disabled-button-kirim-disabled-link-kembali-internal",
      "title": "Implement InternalRegister (\"/internal/register\") UI: title \"Internal Register\", subtext \"Pendaftaran internal (statis dulu).\"; static form inputs (typable) for Nama, Email, WhatsApp; dropdown role with options admin, finance, concierge, asistenmu; disabled button \"Kirim (Disabled)\"; link \"Kembali\" -> \"/internal\".",
      "reqIds": [
        "REQ-13"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-all-dashboards-as-100-static-empty-pages-with-the-required-mini-header-and-a-single-centered-card-title-per-role-each-dashboard-must-include-a-top-mini-header-inside-the-page-with-left-logo-img-src-asistenku-horizontal-png-height-24-and-right-a-disabled-text-button-logout-disabled-and-a-centered-card-containing-only-the-exact-role-specific-sentence-provided-by-the-user-with-no-tabs-lists-data-or-placeholder-stats",
      "title": "Implement all dashboards as 100% static empty pages with the required mini header and a single centered card title per role. Each dashboard must include: a top mini header inside the page with left logo <img src=\"asistenku-horizontal.png\" height=\"24\" /> and right a disabled text button \"Logout (Disabled)\"; and a centered card containing only the exact role-specific sentence provided by the user, with no tabs, lists, data, or placeholder stats.",
      "reqIds": [
        "REQ-14"
      ],
      "version": 1
    },
    {
      "id": "feature-replace-tanstack-router-usage-with-react-router-react-router-dom-in-frontend-src-app-tsx-using-browserrouter-routes-route-so-the-app-never-crashes-on-initial-load-and-the-route-renders-successfully",
      "title": "Replace TanStack Router usage with React Router (react-router-dom) in frontend/src/App.tsx, using BrowserRouter + Routes + Route, so the app never crashes on initial load and the route \"/\" renders successfully.",
      "reqIds": [
        "REQ-15"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-every-page-component-under-frontend-src-pages-is-exported-as-a-default-react-component-and-that-all-import-paths-in-app-tsx-and-page-files-reference-existing-files-only-no-broken-incorrect-paths",
      "title": "Ensure every page component under frontend/src/pages/** is exported as a default React component and that all import paths in App.tsx and page files reference existing files only (no broken/incorrect paths).",
      "reqIds": [
        "REQ-16"
      ],
      "version": 1
    },
    {
      "id": "feature-remove-usage-of-any-ui-component-libraries-that-may-not-exist-e-g-shadcn-ui-imports-like-button-card-input-select-from-frontend-src-app-tsx-and-all-frontend-src-pages-files-replacing-them-with-plain-html-elements-div-button-input-select-textarea-label-styled-via-classname-only",
      "title": "Remove usage of any UI component libraries that may not exist (e.g., shadcn/ui imports like Button/Card/Input/Select) from frontend/src/App.tsx and all frontend/src/pages/** files, replacing them with plain HTML elements (div/button/input/select/textarea/label) styled via className only.",
      "reqIds": [
        "REQ-17"
      ],
      "version": 1
    },
    {
      "id": "feature-normalize-logo-rendering-across-all-pages-use-only-the-image-file-named-exactly-asistenku-horizontal-png-with-img-src-written-exactly-asistenku-horizontal-png-no-leading-slash-no-folder-and-add-sufficient-top-padding-spacing-so-the-logo-is-never-visually-clipped-covered",
      "title": "Normalize logo rendering across all pages: use only the image file named exactly \"asistenku-horizontal.png\" with img src written exactly \"asistenku-horizontal.png\" (no leading slash, no folder), and add sufficient top padding/spacing so the logo is never visually clipped/covered.",
      "reqIds": [
        "REQ-18"
      ],
      "version": 1
    },
    {
      "id": "feature-perform-a-final-rendering-compile-sanity-pass-after-the-patch-ensure-there-are-no-typescript-react-runtime-errors-no-blank-page-on-load-and-the-landing-page-at-renders-normally",
      "title": "Perform a final rendering/compile sanity pass after the patch: ensure there are no TypeScript/React runtime errors, no blank page on load, and the Landing page at \"/\" renders normally.",
      "reqIds": [
        "REQ-19"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Implement static frontend UI pages and routing per spec (Landing, Client/Partner Login/Register, Internal Landing/Login/Register, role Dashboards, and 404) with no backend interaction.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Build backend/main.mo (single file) implementing superadmin claim (principal-only), user registrations/profiles for client/partner/internal, status update rules, partner level+rate rules, master data (pekerjaan) CRUD with validations, and kalkulator AM query per spec; do not modify any frontend files.",
      "reqIds": [],
      "status": "in_progress"
    },
    {
      "id": "AR-3",
      "summary": "Update only backend/main.mo to implement the complete backend specification provided by the user, including: locked constants, exact type definitions, stable storage (arrays only), required helper functions (time, ID generation, validations, parsing, lookups, auth gates), and all public methods with the exact names, signatures, and return values described.",
      "reqIds": [
        "REQ-20"
      ],
      "status": "pending"
    },
    {
      "id": "AR-4",
      "summary": "Revert all unintended frontend changes to restore zero diff in frontend; then implement a clean minimal backend in backend/main.mo only (no new files, no migrations, do not touch backend/authorization/*), enforcing 1 principalId=1 role, userId separate from principalId except superadmin, role-specific profile fields, first-claim superadmin, register per role + getCallerUser, and rename \"kerjaan\" -> \"pekerjaan\" throughout master data.",
      "reqIds": [],
      "status": "in_progress"
    },
    {
      "id": "AR-5",
      "summary": "Ensure this change set modifies ONLY backend/main.mo. All frontend files must have zero diff versus the pre-patch state, no new files may be created anywhere, backend/authorization/* must not be edited, and no migration file may be added or used.",
      "reqIds": [
        "REQ-21"
      ],
      "status": "pending"
    },
    {
      "id": "AR-6",
      "summary": "Rewrite backend/main.mo as a clean, minimal \"master backend\" implementing a final identity model where 1 principalId maps to exactly 1 role, with a separate userId stored for all roles except superadmin.",
      "reqIds": [
        "REQ-22"
      ],
      "status": "pending"
    },
    {
      "id": "AR-7",
      "summary": "Implement role-specific profile types/fields that match the existing frontend forms exactly: Client has name, email, whatsapp, company; Partner has name, email, whatsapp, keahlian, domisili; Internal has name, email, whatsapp, role (superadmin/admin/finance/concierge/asistenmu); Superadmin has only principalId (no whatsapp/company/keahlian/domusili/etc).",
      "reqIds": [
        "REQ-23"
      ],
      "status": "pending"
    },
    {
      "id": "AR-8",
      "summary": "Provide public registration functions per role—registerClient, registerPartner, and registerInternal—that register the caller principal exactly once into the corresponding role and store the appropriate profile fields.",
      "reqIds": [
        "REQ-24"
      ],
      "status": "pending"
    },
    {
      "id": "AR-9",
      "summary": "Provide a public getCallerUser function that returns the caller's current role and stored user information so the frontend (later) can check the caller's role; if the caller is not registered, it must return an explicit empty/none response (not a misleading default).",
      "reqIds": [
        "REQ-25"
      ],
      "status": "pending"
    },
    {
      "id": "AR-10",
      "summary": "Implement superadmin claiming as a dedicated public function (e.g., claimSuperadmin) that can be executed only once globally (first claim wins) and requires no additional fields; subsequent calls must be rejected.",
      "reqIds": [
        "REQ-26"
      ],
      "status": "pending"
    },
    {
      "id": "AR-11",
      "summary": "Rename all occurrences of the master-data term \"kerjaan\" to \"pekerjaan\" inside backend/main.mo (types, fields, and function names). If master-data logic is not present in this clean backend, ensure there are no 'kerjaan' identifiers remaining in backend/main.mo.",
      "reqIds": [
        "REQ-27"
      ],
      "status": "pending"
    },
    {
      "id": "AR-12",
      "summary": "Keep the backend minimal and clean: remove prior authorization-gate logic tied to backend/authorization/* from backend/main.mo (do not edit backend/authorization/*), and avoid adding any non-requested domains such as services/tasks.",
      "reqIds": [
        "REQ-28"
      ],
      "status": "pending"
    },
    {
      "id": "AR-13",
      "summary": "Patch backend/main.mo ONLY to remove all Migration usage (delete `import Migration \"migration\";` and remove `(with migration = Migration.run)`), making the canister a plain `actor { ... }` without other changes.",
      "reqIds": [],
      "status": "in_progress"
    },
    {
      "id": "AR-14",
      "summary": "Update ONLY `backend/main.mo` to remove all Migration usage by deleting `import Migration \"migration\";` and removing any actor migration clause `(with migration = Migration.run)`, resulting in a plain `actor { ... }` declaration, without changing anything else in the file.",
      "reqIds": [
        "REQ-29"
      ],
      "status": "pending"
    },
    {
      "id": "AR-15",
      "summary": "Patch backend/main.mo only: add nextUserId counter + genUserId() helper, and update registerClient/registerPartner/registerInternal to ignore any incoming userId and always store userId = genUserId(), without changing other logic (keep 1 principalId = 1 role).",
      "reqIds": [],
      "status": "in_progress"
    },
    {
      "id": "AR-16",
      "summary": "Modify ONLY backend/main.mo to add an in-canister incremental user ID counter and generator: add `var nextUserId : Nat = 1;` and add `func genUserId() : Text { let id = nextUserId; nextUserId += 1; return \"U\" # Nat.toText(id); }`. Ensure required imports exist (e.g., Nat) so the file compiles.",
      "reqIds": [
        "REQ-30"
      ],
      "status": "pending"
    },
    {
      "id": "AR-17",
      "summary": "In backend/main.mo, update registerClient, registerPartner, and registerInternal so that they ignore any incoming `userId` value (if present in the incoming argument type) and always store `userId = genUserId()` in the stored profile record.",
      "reqIds": [
        "REQ-31"
      ],
      "status": "pending"
    },
    {
      "id": "AR-18",
      "summary": "Do not change any other logic in backend/main.mo beyond the additions/changes required to support the generated userId assignment, and keep the existing rule that one principalId maps to exactly one role unchanged.",
      "reqIds": [
        "REQ-32"
      ],
      "status": "pending"
    },
    {
      "id": "AR-19",
      "summary": "Disable saveCallerUserProfile in backend/main.mo: keep the same signature but make it always Runtime.trap(...) so it can never overwrite userRoles/profile.",
      "reqIds": [],
      "status": "in_progress"
    },
    {
      "id": "AR-20",
      "summary": "Adjust role typing so superadmin is not part of InternalRole (InternalRole only admin/finance/concierge/asistenmu) while UserRole still includes #superadmin; keep InternalProfile fields unchanged.",
      "reqIds": [],
      "status": "in_progress"
    },
    {
      "id": "AR-21",
      "summary": "Implement userId system in backend/main.mo using nextUserId counter + userIdByPrincipal map + genUserId/ensureUserId helpers, with userId NOT stored in Client/Partner/Internal profile records; call ensureUserId(caller) in all register* and claimSuperadmin flows.",
      "reqIds": [],
      "status": "in_progress"
    },
    {
      "id": "AR-22",
      "summary": "Add public query getMyUserId() in backend/main.mo returning ?Text from userIdByPrincipal for the caller (null if none).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-23",
      "summary": "Modify ONLY `backend/main.mo` to disable `saveCallerUserProfile(profile : UserRole)` while preserving its exact public signature, by making the function always call `Runtime.trap(\"Disabled: profile saving must use register* or admin-approved flows only.\");` and removing any `userRoles.add(...)`/write behavior from this function.",
      "reqIds": [
        "REQ-33"
      ],
      "status": "pending"
    },
    {
      "id": "AR-24",
      "summary": "Update role typing in `backend/main.mo` so that `InternalRole` contains ONLY `#admin`, `#finance`, `#concierge`, and `#asistenmu`, and does NOT include `#superadmin`. Keep `UserRole`'s `#superadmin` variant unchanged. Keep `InternalProfile` unchanged (fields: name, email, whatsapp, role: InternalRole) with no new fields added.",
      "reqIds": [
        "REQ-34"
      ],
      "status": "pending"
    },
    {
      "id": "AR-25",
      "summary": "Add an automatic, consistent `userId` system in `backend/main.mo` without adding `userId` fields to any profile record types. Implement storage and helpers exactly as specified: (1) `var nextUserId : Nat = 1;` (2) `let userIdByPrincipal = Map.empty<Principal, Text>();` located near `let userRoles = ...` (3) `func genUserId() : Text` that returns `\"U\" + Nat` (e.g., `U1`, `U2`, ...) and increments `nextUserId` (4) `func ensureUserId(p : Principal) : Text` that returns an existing ID if present in the map, otherwise generates, stores, and returns a new ID.",
      "reqIds": [
        "REQ-35"
      ],
      "status": "pending"
    },
    {
      "id": "AR-26",
      "summary": "Ensure `ignore ensureUserId(caller);` is executed immediately before any `userRoles.add(caller, entry);` in ALL existing registration functions (`registerClient`, `registerPartner`, `registerInternal`) and also in `claimSuperadmin()` before setting `superadminClaimed := true;`. Do not change the existing rule that one principal can only register exactly one role, and keep the rest of the core logic unchanged.",
      "reqIds": [
        "REQ-36"
      ],
      "status": "pending"
    },
    {
      "id": "AR-27",
      "summary": "Add a new query method in the “User Queries” section of `backend/main.mo`: `public query ({ caller }) func getMyUserId() : async ?Text { userIdByPrincipal.get(caller); }` returning `null` if the caller has no userId and `?Text` if present (including superadmin).",
      "reqIds": [
        "REQ-37"
      ],
      "status": "pending"
    },
    {
      "id": "AR-28",
      "summary": "APPEND-ONLY patch to backend/main.mo: without modifying any existing line, append the provided “MASTER DATA (EMPTY DEFAULT) — SUPERADMIN ONLY” section immediately before the actor’s final closing brace `}`; do not touch migration.mo or add Migration imports/actor migration clauses; master-data CRUD/query functions must be superadmin-principal-only and must not create/store any superadmin profile fields.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-29",
      "summary": "Update ONLY `backend/main.mo` using an APPEND-ONLY patch: preserve 100% of the existing file content byte-for-byte (no edits, deletions, reordering, formatting changes, or refactors), and append the user-provided “MASTER DATA (EMPTY DEFAULT) — SUPERADMIN ONLY” section EXACTLY at the very bottom of the actor, immediately before the final closing brace `}`.",
      "reqIds": [
        "REQ-38"
      ],
      "status": "pending"
    },
    {
      "id": "AR-30",
      "summary": "Ensure the appended Master Data APIs are superadmin-principal-only and do not create or store any superadmin profile data (no email/WhatsApp/profile auto-creation), exactly as expressed in the appended code (e.g., `requireSuperadmin` gate and role check against `userRoles`).",
      "reqIds": [
        "REQ-39"
      ],
      "status": "pending"
    },
    {
      "id": "AR-31",
      "summary": "Append-only Master Data Asistenku block to backend/main.mo (below existing SYSTEM MASTER DATA section): add Indonesian types (TipePartner, SkillVerified, KamusPekerjaan, AturanBebanPerusahaan, KonstantaUnitClient), new Map-based storage + ID generators (SKL-/KMS-/ATB- with pad4), superadmin-only CRUD/list endpoints for skills/kamus/aturan, konstanta unit get/set, partner verified skills mapping management, and kalkulatorAM per specified rules; all methods must call existing requireSuperadmin(caller).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-32",
      "summary": "Append (append-only) a new “Master Data Asistenku” implementation block to the VERY END of backend/main.mo, placed below the existing “SYSTEM MASTER DATA (EMPTY DEFAULT) - SUPERADMIN ONLY” section and immediately before the actor’s final closing brace `}`. Do not modify, delete, reorder, or reformat any existing line in backend/main.mo.",
      "reqIds": [
        "REQ-40"
      ],
      "status": "pending"
    },
    {
      "id": "AR-33",
      "summary": "In the appended block, define the requested Indonesian-named types exactly: `TipePartner = { #junior; #senior; #expert }`; `SkillVerified = { kode: Text; nama: Text; kategori: Text; aktif: Bool; createdAt: Int }`; `KamusPekerjaan = { kategoriPekerjaan: Text; jenisPekerjaan: Text; jamStandar: Nat; tipePartnerBoleh: [TipePartner]; aktif: Bool; createdAt: Int }`; `AturanBebanPerusahaan = { tipePartner: TipePartner; jamMin: Nat; jamMax: Nat; polaBeban: { #TAMBAH_JAM_TETAP; #TAMBAH_PER_JAM }; nilai: Nat; aktif: Bool; createdAt: Int }`; `KonstantaUnitClient = { unitKeJamPerusahaan: Nat; updatedAt: Int }`.",
      "reqIds": [
        "REQ-41"
      ],
      "status": "pending"
    },
    {
      "id": "AR-34",
      "summary": "In the appended block, add the requested in-canister storage using the already-available `Map` (from `mo:core/Map` as confirmed by the user): `var nextSkillId : Nat = 1; var nextKamusId : Nat = 1; var nextAturanId : Nat = 1; let skillsByKode = Map.empty<Text, SkillVerified>(); let kamusByKode = Map.empty<Text, KamusPekerjaan>(); let aturanByKode = Map.empty<Text, AturanBebanPerusahaan>(); var konstantaUnit : KonstantaUnitClient = { unitKeJamPerusahaan = 2; updatedAt = 0 }; let partnerSkillsByPrincipal = Map.empty<Principal, [Text]>();`",
      "reqIds": [
        "REQ-42"
      ],
      "status": "pending"
    },
    {
      "id": "AR-35",
      "summary": "In the appended block, implement helper functions exactly named: `pad4(n: Nat) : Text`, `genKode(prefix: Text, id: Nat) : Text` (producing codes like `SKL-0001`), and `now() : Int` (use `Time.now()` if available in the file’s imports; otherwise use a compile-safe fallback).",
      "reqIds": [
        "REQ-43"
      ],
      "status": "pending"
    },
    {
      "id": "AR-36",
      "summary": "Append superadmin-only public methods for “Skill Verified” with exact names/signatures/behaviors, each calling `requireSuperadmin(caller : Principal)` at the start: `upsertSkillVerified(kodeOpt:?Text, nama:Text, kategori:Text, aktif:Bool) : async Text` (create when null by generating `SKL-` code from `nextSkillId`, incrementing the counter; update only if code exists; return `kode`), `getSkillVerified(kode:Text) : async ?SkillVerified`, `listSkillVerified() : async [SkillVerified]`.",
      "reqIds": [
        "REQ-44"
      ],
      "status": "pending"
    },
    {
      "id": "AR-37",
      "summary": "Append superadmin-only public methods for “Kamus Pekerjaan” with exact names/signatures/behaviors, each calling `requireSuperadmin(caller)` at the start: `upsertKamusPekerjaan(kodeOpt:?Text, kategoriPekerjaan:Text, jenisPekerjaan:Text, jamStandar:Nat, tipePartnerBoleh:[TipePartner], aktif:Bool) : async Text` (create `KMS-` + 4 digits from `nextKamusId`; update only if code exists; return code), `getKamusPekerjaan(kode:Text) : async ?KamusPekerjaan`, `listKamusPekerjaan() : async [KamusPekerjaan]`.",
      "reqIds": [
        "REQ-45"
      ],
      "status": "pending"
    },
    {
      "id": "AR-38",
      "summary": "Append superadmin-only public methods for “Aturan Beban Perusahaan” with exact names/signatures/behaviors, each calling `requireSuperadmin(caller)` at the start: `upsertAturanBeban(kodeOpt:?Text, tipePartner:TipePartner, jamMin:Nat, jamMax:Nat, polaBeban:{#TAMBAH_JAM_TETAP;#TAMBAH_PER_JAM}, nilai:Nat, aktif:Bool) : async Text` (create `ATB-` code from `nextAturanId`; update only if code exists; return code), `getAturanBeban(kode:Text) : async ?AturanBebanPerusahaan`, `listAturanBeban() : async [AturanBebanPerusahaan]`.",
      "reqIds": [
        "REQ-46"
      ],
      "status": "pending"
    },
    {
      "id": "AR-39",
      "summary": "Append superadmin-only public methods for “Konstanta Unit Client”, each calling `requireSuperadmin(caller)` at the start: `setKonstantaUnitClient(unitKeJamPerusahaan:Nat) : async ()` (update `konstantaUnit.unitKeJamPerusahaan` and set `updatedAt = now()`), and `getKonstantaUnitClient() : async KonstantaUnitClient` (return current value).",
      "reqIds": [
        "REQ-47"
      ],
      "status": "pending"
    },
    {
      "id": "AR-40",
      "summary": "Append superadmin-only public methods to manage verified skills per Partner principal, each calling `requireSuperadmin(caller)` at the start: `setPartnerVerifiedSkills(partner:Principal, skillCodes:[Text]) : async ()` (validate each code exists in `skillsByKode` and has `aktif = true`, otherwise trap; then overwrite full list in `partnerSkillsByPrincipal`), `getPartnerVerifiedSkills(partner:Principal) : async [Text]` (return list or empty array if none), and `listPartnerVerifiedSkills() : async [(Principal, [Text])]` (return full map entries).",
      "reqIds": [
        "REQ-48"
      ],
      "status": "pending"
    },
    {
      "id": "AR-41",
      "summary": "Append an optional superadmin-only helper method `kalkulatorAM(kodeKamus:Text, tipePartner:TipePartner, beban:Nat) : async { jamKePartner: Nat; jamPerusahaan: Nat; unitClient: Nat }`, gated by `requireSuperadmin(caller)`, implementing the specified calculation rules: look up `KamusPekerjaan` by `kodeKamus` and use `jamStandar`; find exactly one active `AturanBebanPerusahaan` matching `tipePartner` where `jamStandar` is within `[jamMin..jamMax]` inclusive (trap if none); compute `J = jamStandar * beban`; compute `bebanInternal` as `nilai` if `#TAMBAH_JAM_TETAP` else `nilai * jamStandar` if `#TAMBAH_PER_JAM`; set `jamKePartner = J`, `jamPerusahaan = J + bebanInternal`; set `unitClient = jamPerusahaan / konstantaUnit.unitKeJamPerusahaan` using integer division.",
      "reqIds": [
        "REQ-49"
      ],
      "status": "pending"
    },
    {
      "id": "AR-42",
      "summary": "Ensure every new method introduced by the appended Master Data Asistenku block calls the existing `requireSuperadmin(caller : Principal)` function (already present in backend/main.mo) and does not expose any Master Data information to non-superadmin callers.",
      "reqIds": [
        "REQ-50"
      ],
      "status": "pending"
    },
    {
      "id": "AR-43",
      "summary": "Do not create or edit backend/migration.mo and do not add any migration-related imports or actor migration clauses as part of this change.",
      "reqIds": [
        "REQ-51"
      ],
      "status": "pending"
    },
    {
      "id": "AR-44",
      "summary": "Append-only (bottom-of-file) backend/main.mo patch adding: (1) UserStatus tracking with default pending fallback, admin/superadmin-gated set/get/list (including listUsersByStatus), forbidding changes to superadmin status; (2) Partner level (TipePartner) + fixed hourly rates with admin/superadmin setters and partner self-queries; (3) admin/superadmin-only userId lookup/listUsersBasic using existing role storage + existing userId map (no new id creation except optional ensureUserId if already present).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-45",
      "summary": "Update ONLY `backend/main.mo` via an append-only patch: append all new Motoko code at the very bottom of the actor, immediately before the final closing brace `}`. Do not change, delete, reorder, or refactor any existing line in `backend/main.mo`, and do not modify any other file.",
      "reqIds": [
        "REQ-52"
      ],
      "status": "pending"
    },
    {
      "id": "AR-46",
      "summary": "In the appended section, add User Status foundations using new storage maps only (no profile changes, no role system changes): define `public type UserStatus = { #pending; #active; #suspended; #blacklisted }`, define fixed-rate constants `public let RATE_JUNIOR : Nat = 35000`, `RATE_SENIOR : Nat = 55000`, `RATE_EXPERT : Nat = 75000`, and add `userStatusByPrincipal : Map<Principal, UserStatus>` plus helper functions `defaultUserStatus`, `getUserStatusInternal`, `isPartnerRole` (must use the existing `userRoles` storage), and `requireAdminOrSuperadmin` (must authorize only existing superadmin/admin per current role storage). Implement public methods exactly as specified: `setUserStatus`, `getMyUserStatus`, `getUserStatus`, and `listUsersByStatus` with the required gates and trap messages.",
      "reqIds": [
        "REQ-53"
      ],
      "status": "pending"
    },
    {
      "id": "AR-47",
      "summary": "In the appended section, add Partner Level + Hourly Rate foundations using the existing `TipePartner` type already defined in `backend/main.mo` (do not redefine it). Add new storage `partnerLevelByPrincipal : Map<Principal, TipePartner>`. Implement public methods exactly as specified: `setPartnerLevel`, `getMyPartnerLevel`, `getPartnerLevel`, `getHourlyRateByLevel`, and `getMyHourlyRate`, including required gates, partner-role validation via existing role storage, and default `#junior` when level is unset.",
      "reqIds": [
        "REQ-54"
      ],
      "status": "pending"
    },
    {
      "id": "AR-48",
      "summary": "In the appended section, implement admin/superadmin-only UserId lookup utilities using the existing `userIdByPrincipal` map and existing role storage (`userRoles`) without creating any new userId system: implement `getUserIdByPrincipal(target)` returning existing userId or null (must not call `ensureUserId`), and `listUsersBasic(roleFilter)` returning `[(Principal, Text, Text, UserStatus)]` for users with a resolvable roleText and existing userId, with status from `getUserStatusInternal` and optional role filter applied via Text comparison.",
      "reqIds": [
        "REQ-55"
      ],
      "status": "pending"
    },
    {
      "id": "AR-49",
      "summary": "Append-only backend/main.mo: add minimal LayananAsistenku module (no migration changes, no refactors, no 'service' word) including LayananType & LayananAsistenku types, Map-based storage/index, stable counter + nextLayananId (LAY-000001) with pad6/now reuse-if-exists, requireSuperadminOrAdmin gate reuse, and methods createLayananForClient, setLayananActive, listMyLayanan (client-only via existing role map). Stop with exact output 'STOP — name conflict' if any required name already exists.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-50",
      "summary": "Update ONLY `backend/main.mo` by appending a minimal, production-safe LayananAsistenku implementation immediately before the actor’s final closing brace `}` (append-only; do not modify/reorder/delete any existing lines). The appended code must define the new types `LayananType` and `LayananAsistenku` exactly as specified, add Map-based storage (`layananById`, `layananIdsByClient`), add a stable counter `layananCounter` and an ID generator `nextLayananId()` producing IDs in the format `LAY-000001`, and add the public methods `createLayananForClient`, `setLayananActive`, and `listMyLayanan` with the exact authorization and behaviors specified. The word \"service\" must not appear anywhere in the new code; use only \"LayananAsistenku\" naming.",
      "reqIds": [
        "REQ-56"
      ],
      "status": "pending"
    },
    {
      "id": "AR-51",
      "summary": "Append-only backend/main.mo: add \"LAYANAN ASISTENKU V2\" block defining LayananMeta type, new Map storages (layananMetaById, layananIdsByOwnerClient), helper reuse/conditional defs (now(), requireAdminOrSuperadminImpl), and V2 methods createLayananForClientV2/setLayananActiveV2/listMyLayananV2/getLayananMeta/getMyLayananMeta; must not touch existing LayananAsistenku v1 types/functions/storage and must not reference migration.mo.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-52",
      "summary": "Append a new append-only section at the very bottom of backend/main.mo (immediately before the actor’s final closing brace) with the exact header comment `// --- LAYANAN ASISTENKU V2 (APPEND ONLY, NO MIGRATION) ---`, then add the new public type `LayananMeta` exactly as specified (without modifying the existing `LayananAsistenku` type).",
      "reqIds": [
        "REQ-57"
      ],
      "status": "pending"
    },
    {
      "id": "AR-53",
      "summary": "In the same appended V2 block in backend/main.mo, add new in-canister storage maps exactly named and typed: `let layananMetaById = Map.empty<Text, LayananMeta>();` and `let layananIdsByOwnerClient = Map.empty<Principal, [Text]>();`.",
      "reqIds": [
        "REQ-58"
      ],
      "status": "pending"
    },
    {
      "id": "AR-54",
      "summary": "In the appended V2 block, reuse existing helper functions if already present; only define them if not already present: (1) `func now() : Int` using `Time.now()`; (2) `func requireAdminOrSuperadminImpl(caller : Principal)` that enforces the same authorization logic as the existing admin/superadmin gate in backend/main.mo (e.g., by calling existing `isAdmin`/`isSuperadmin` if those exist, or by reusing the existing `requireAdminOrSuperadminImpl` if already defined).",
      "reqIds": [
        "REQ-59"
      ],
      "status": "pending"
    },
    {
      "id": "AR-55",
      "summary": "Append the following new public methods in the appended V2 block, with the exact names, signatures, and return values specified, and with the specified behavior:\n\n1) `public shared({caller}) func createLayananForClientV2(ownerClient : Principal, layananId : Text, unitTotal : Nat) : async Text`\n- Gate with `requireAdminOrSuperadminImpl(caller)`\n- Validate `layananId` exists in the existing `layananById`; if missing return exactly `\"LAYANAN_NOT_FOUND\"`\n- Create/update meta (overwrite allowed) in `layananMetaById` with: `unitUsed = 0`, `unitOnHold = 0`, `isActive = true`, `createdAt = now()`, `updatedAt = now()` and the provided `ownerClient`, `unitTotal`, `layananId`\n- Ensure `layananId` is present in `layananIdsByOwnerClient[ownerClient]`; append only if not already present\n- Return exactly `\"OK\"`\n\n2) `public shared({caller}) func setLayananActiveV2(layananId : Text, isActive : Bool) : async Text`\n- Gate with `requireAdminOrSuperadminImpl(caller)`\n- If `layananMetaById` has no entry for `layananId`, return exactly `\"NOT_FOUND\"`\n- Otherwise update only `isActive` and `updatedAt` (keep other fields unchanged) and return exactly `\"OK\"`\n\n3) `public query({caller}) func listMyLayananV2() : async [Text]`\n- Caller must be authenticated using the same check style used by the existing `listMyLayanan`\n- Return `layananIdsByOwnerClient[caller]` or `[]` if missing\n\n4) `public query({caller}) func getLayananMeta(layananId : Text) : async ?LayananMeta`\n- Gate with `requireAdminOrSuperadminImpl(caller)`\n- Return `layananMetaById.get(layananId)`\n\n5) `public query({caller}) func getMyLayananMeta(layananId : Text) : async ?LayananMeta`\n- Caller must be authenticated\n- Return the meta only if it exists and `meta.ownerClient == caller`, otherwise return `null`.",
      "reqIds": [
        "REQ-60"
      ],
      "status": "pending"
    }
  ],
  "gameProjectType": "none",
  "projectName": "Static Asistenku UI pages + routing (frontend-only, no backend/auth/data)",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}