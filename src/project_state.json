{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 75,
  "summary": "Scope update: Backend-only append-only change to implement new internal-managed “Layanan V4” system in backend/main.mo. Rules: append code at end of file only; no refactor/rewrite; do not modify/move/delete existing code; do not affect users/tasks/master data/finance or existing layanan V1/V2/V3. If preupgrade/postupgrade exist, only append V4 handling blocks inside them without altering existing logic. Implement V4 types, stable storage + runtime HashMaps with stable<->runtime conversion, internal-only auth (superadmin/admin/finance -> otherwise trap \"Unauthorized\"), LV4-<Nat> id generation, and methods: createLayananV4, editLayananV4 (id/unitUsed/isArchived/created* immutable; validate unitTotal>=unitUsed; archived/not found -> trap), setLayananV4Active (reject if archived), archiveLayananV4 (soft delete), listAllLayananV4(includeArchived), listLayananV4ByClient(clientPrincipal, includeArchived).",
  "architectural_notes": [
    "Use react-router-dom Routes with explicit mappings and a '*' fallback 404 page with a button back to '/'",
    "Ensure App.tsx uses BrowserRouter + Routes from react-router-dom and does not crash on load.",
    "All specified page files must default-export a React component; all import paths must be valid (no missing files).",
    "Do not use any external UI libraries; use plain divs + simple className only.",
    "Add sufficient top padding so the logo is not covered; ensure no TS/React compile errors and no blank page—route \"/\" must render normally.",
    "Backend is now in-scope: backend/main.mo may be fully implemented per the backend spec (no longer required to be empty/untouched).",
    "For the current backend build request, ONLY modify backend/main.mo; do not change any frontend files.",
    "Global frontend styling updated: apply dashboard-reference colors/layout (e.g., dark/blue + beige split/background) and matching card shape/shadows across ALL pages, using the user-uploaded image as the styling baseline.",
    "Override prior UI-only rule for dashboards: dashboard pages are now allowed to call backend queries (read-only) via existing hooks; InternalLogin is no longer the only frontend page permitted to call the backend.",
    "Global logo path is now `/assets/asistenku-horizontal.png` (use this consistently across the app; supersedes prior rootless `asistenku-horizontal.png` rule)."
  ],
  "known_issues": [
    "Unintended frontend changes were made previously; must be reverted so frontend has zero diff for this request.",
    "Previous automated patch/build attempt failed to apply the requested backend/main.mo change (tool error).",
    "saveCallerUserProfile currently overwrites userRoles (can overwrite role) causing repeated/incorrect role state; must be disabled via trap.",
    "Build/apply attempts for large backend persistence patch and subsequent InternalLogin patch repeatedly failed due to tooling limitations ('AI struggled/couldn't process request').",
    "Superadmin claim is currently failing because InternalLogin.tsx appears to be calling the wrong backend method (e.g., saveCallerUserProfile/role assignment) leading to \"Unauthorized: Only admins can assign user roles\" instead of calling claimSuperadmin().",
    "InternalLogin.tsx shows \"Backend belum siap\" when claim UI is visible/clickable before actor initialization completes; needs UI gating on actorFetching/actor readiness.",
    "InternalLogin still surfaces/admin-only role-assignment messaging during Superadmin claim; superadmin should be exempt and claim should activate successfully without triggering admin-only validation paths.",
    "InternalLogin: Claim Superadmin card can take >5 minutes to appear due to actor/claim-check timing leaving claimCheckDone false.",
    "InternalLogin: Clicking Claim Superadmin can show a generic red error message even when claim may have succeeded; needs improved recheck/error handling per updated flow.",
    "Superadmin claim fails because claimSuperadmin() calls AccessControl.assignRole(...), which is admin-gated; must bootstrap first admin directly in access control state during claimSuperadmin."
  ],
  "isFixRequest": true,
  "existing_features": [
    {
      "id": "feature-do-not-create-edit-or-reference-any-backend-code-keep-backend-main-mo-completely-untouched-and-keep-the-backend-100-empty-no-methods-data-structures",
      "title": "Do not create, edit, or reference any backend code. Keep backend/main.mo completely untouched and keep the backend 100% empty (no methods, data, structures).",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-only-edit-create-the-following-frontend-files-and-no-others-frontend-src-app-tsx-and-the-page-files-listed-by-the-user-under-frontend-src-pages-do-not-edit-any-other-files",
      "title": "Only edit/create the following frontend files (and no others): frontend/src/App.tsx and the page files listed by the user under frontend/src/pages/**. Do not edit any other files.",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-react-router-routes-in-frontend-src-app-tsx-exactly-per-the-mapping-provided-including-a-fallback-that-shows-a-simple-inline-404-view-with-a-button-labeled-kembali-ke-landing-linking-to-do-not-add-any-automatic-redirects",
      "title": "Implement React Router routes in frontend/src/App.tsx exactly per the mapping provided, including a \"*\" fallback that shows a simple inline 404 view with a button labeled \"Kembali ke Landing\" linking to \"/\". Do not add any automatic redirects.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-create-update-all-specified-page-components-as-static-ui-only-pages-pages-may-contain-input-fields-that-accept-typing-but-must-not-submit-anywhere-must-not-call-any-apis-must-not-use-mock-data-and-must-not-include-role-user-checks",
      "title": "Create/update all specified page components as static UI-only pages. Pages may contain input fields that accept typing, but must not submit anywhere, must not call any APIs, must not use mock data, and must not include role/user checks.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-a-consistent-shared-visual-layout-across-all-pages-white-background-centered-container-max-width-760-with-generous-padding-top-centered-logo-image-asistenku-horizontal-png-height-32-main-card-with-24px-rounding-subtle-shadow-20-24px-padding-optional-very-thin-border-lots-of-whitespace-keep-the-ui-clean-calm-premium-with-large-rounded-corners-and-soft-shadows-avoid-saas-template-styling-no-sidebars-no-complex-navbars",
      "title": "Implement a consistent shared visual layout across all pages (white background, centered container max-width 760 with generous padding, top centered logo image \"asistenku-horizontal.png\" height 32, main card with 24px rounding, subtle shadow, 20–24px padding, optional very thin border, lots of whitespace). Keep the UI clean, calm, premium, with large rounded corners and soft shadows; avoid SaaS-template styling (no sidebars, no complex navbars).",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-landing-page-ui-exactly-title-ruang-masuk-subtext-pilih-akses-yang-sesuai-two-large-buttons-linking-to-client-login-and-partner-login-labeled-client-login-and-partner-login-below-that-small-text-belum-punya-akun-with-links-daftar-client-client-register-and-daftar-partner-partner-register-and-a-bottom-small-link-internal-internal",
      "title": "Implement Landing page (\"/\") UI exactly: title \"Ruang Masuk\", subtext \"Pilih akses yang sesuai.\", two large buttons linking to \"/client/login\" and \"/partner/login\" labeled \"Client Login\" and \"Partner Login\"; below that small text \"Belum punya akun?\" with links \"Daftar Client\" -> \"/client/register\" and \"Daftar Partner\" -> \"/partner/register\"; and a bottom small link \"Internal\" -> \"/internal\".",
      "reqIds": [
        "REQ-6"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-clientlogin-client-login-ui-title-masuk-subtext-untuk-client-asistenku-render-two-disabled-buttons-labeled-login-internet-identity-disabled-and-masuk-ke-ruang-kerja-disabled-include-link-belum-punya-akun-daftar-client-register-and-link-kembali",
      "title": "Implement ClientLogin (\"/client/login\") UI: title \"Masuk\", subtext \"Untuk Client Asistenku\"; render two disabled buttons labeled \"Login Internet Identity (Disabled)\" and \"Masuk ke ruang kerja (Disabled)\"; include link \"Belum punya akun? Daftar\" -> \"/client/register\" and link \"Kembali\" -> \"/\".",
      "reqIds": [
        "REQ-7"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-clientregister-client-register-ui-title-daftar-subtext-untuk-client-asistenku-static-form-inputs-typable-for-nama-email-whatsapp-perusahaan-disabled-submit-button-labeled-kirim-disabled-link-kembali",
      "title": "Implement ClientRegister (\"/client/register\") UI: title \"Daftar\", subtext \"Untuk Client Asistenku\"; static form inputs (typable) for Nama, Email, WhatsApp, Perusahaan; disabled submit button labeled \"Kirim (Disabled)\"; link \"Kembali\" -> \"/\".",
      "reqIds": [
        "REQ-8"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-partnerlogin-partner-login-ui-mirroring-clientlogin-with-subtext-untuk-partner-asistenku-include-link-to-partner-register-and-link-kembali-include-the-same-two-disabled-buttons-with-the-exact-labels-specified",
      "title": "Implement PartnerLogin (\"/partner/login\") UI mirroring ClientLogin, with subtext \"Untuk Partner Asistenku\"; include link to \"/partner/register\" and link \"Kembali\" -> \"/\"; include the same two disabled buttons with the exact labels specified.",
      "reqIds": [
        "REQ-9"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-partnerregister-partner-register-ui-title-daftar-subtext-untuk-partner-asistenku-static-form-inputs-typable-for-nama-email-whatsapp-domisili-and-a-textarea-keahlian-disabled-button-kirim-disabled-link-kembali",
      "title": "Implement PartnerRegister (\"/partner/register\") UI: title \"Daftar\", subtext \"Untuk Partner Asistenku\"; static form inputs (typable) for Nama, Email, WhatsApp, Domisili and a textarea Keahlian; disabled button \"Kirim (Disabled)\"; link \"Kembali\" -> \"/\".",
      "reqIds": [
        "REQ-10"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-internallanding-internal-ui-title-internal-subtext-akses-internal-asistenku-buttons-linking-to-internal-login-labeled-internal-login-and-to-internal-register-labeled-internal-register-link-kembali",
      "title": "Implement InternalLanding (\"/internal\") UI: title \"Internal\", subtext \"Akses internal Asistenku.\"; buttons linking to \"/internal/login\" labeled \"Internal Login\" and to \"/internal/register\" labeled \"Internal Register\"; link \"Kembali\" -> \"/\".",
      "reqIds": [
        "REQ-11"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-internallogin-internal-login-ui-title-internal-login-subtext-pilih-role-internal-statis-dulu-display-a-selectable-grid-of-roles-superadmin-admin-finance-concierge-asistenmu-with-local-ui-state-only-selection-highlight-only-no-other-effects-include-two-disabled-buttons-labeled-login-internet-identity-disabled-and-ruang-kerja-disabled-link-kembali-internal",
      "title": "Implement InternalLogin (\"/internal/login\") UI: title \"Internal Login\", subtext \"Pilih role internal (statis dulu).\"; display a selectable grid of roles (Superadmin, Admin, Finance, Concierge, Asistenmu) with local UI state only (selection highlight only; no other effects); include two disabled buttons labeled \"Login Internet Identity (Disabled)\" and \"Ruang kerja (Disabled)\"; link \"Kembali\" -> \"/internal\".",
      "reqIds": [
        "REQ-12"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-internalregister-internal-register-ui-title-internal-register-subtext-pendaftaran-internal-statis-dulu-static-form-inputs-typable-for-nama-email-whatsapp-dropdown-role-with-options-admin-finance-concierge-asistenmu-disabled-button-kirim-disabled-link-kembali-internal",
      "title": "Implement InternalRegister (\"/internal/register\") UI: title \"Internal Register\", subtext \"Pendaftaran internal (statis dulu).\"; static form inputs (typable) for Nama, Email, WhatsApp; dropdown role with options admin, finance, concierge, asistenmu; disabled button \"Kirim (Disabled)\"; link \"Kembali\" -> \"/internal\".",
      "reqIds": [
        "REQ-13"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-all-dashboards-as-100-static-empty-pages-with-the-required-mini-header-and-a-single-centered-card-title-per-role-each-dashboard-must-include-a-top-mini-header-inside-the-page-with-left-logo-img-src-asistenku-horizontal-png-height-24-and-right-a-disabled-text-button-logout-disabled-and-a-centered-card-containing-only-the-exact-role-specific-sentence-provided-by-the-user-with-no-tabs-lists-data-or-placeholder-stats",
      "title": "Implement all dashboards as 100% static empty pages with the required mini header and a single centered card title per role. Each dashboard must include: a top mini header inside the page with left logo <img src=\"asistenku-horizontal.png\" height=\"24\" /> and right a disabled text button \"Logout (Disabled)\"; and a centered card containing only the exact role-specific sentence provided by the user, with no tabs, lists, data, or placeholder stats.",
      "reqIds": [
        "REQ-14"
      ],
      "version": 1
    },
    {
      "id": "feature-replace-tanstack-router-usage-with-react-router-react-router-dom-in-frontend-src-app-tsx-using-browserrouter-routes-route-so-the-app-never-crashes-on-initial-load-and-the-route-renders-successfully",
      "title": "Replace TanStack Router usage with React Router (react-router-dom) in frontend/src/App.tsx, using BrowserRouter + Routes + Route, so the app never crashes on initial load and the route \"/\" renders successfully.",
      "reqIds": [
        "REQ-15"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-every-page-component-under-frontend-src-pages-is-exported-as-a-default-react-component-and-that-all-import-paths-in-app-tsx-and-page-files-reference-existing-files-only-no-broken-incorrect-paths",
      "title": "Ensure every page component under frontend/src/pages/** is exported as a default React component and that all import paths in App.tsx and page files reference existing files only (no broken/incorrect paths).",
      "reqIds": [
        "REQ-16"
      ],
      "version": 1
    },
    {
      "id": "feature-remove-usage-of-any-ui-component-libraries-that-may-not-exist-e-g-shadcn-ui-imports-like-button-card-input-select-from-frontend-src-app-tsx-and-all-frontend-src-pages-files-replacing-them-with-plain-html-elements-div-button-input-select-textarea-label-styled-via-classname-only",
      "title": "Remove usage of any UI component libraries that may not exist (e.g., shadcn/ui imports like Button/Card/Input/Select) from frontend/src/App.tsx and all frontend/src/pages/** files, replacing them with plain HTML elements (div/button/input/select/textarea/label) styled via className only.",
      "reqIds": [
        "REQ-17"
      ],
      "version": 1
    },
    {
      "id": "feature-normalize-logo-rendering-across-all-pages-use-only-the-image-file-named-exactly-asistenku-horizontal-png-with-img-src-written-exactly-asistenku-horizontal-png-no-leading-slash-no-folder-and-add-sufficient-top-padding-spacing-so-the-logo-is-never-visually-clipped-covered",
      "title": "Normalize logo rendering across all pages: use only the image file named exactly \"asistenku-horizontal.png\" with img src written exactly \"asistenku-horizontal.png\" (no leading slash, no folder), and add sufficient top padding/spacing so the logo is never visually clipped/covered.",
      "reqIds": [
        "REQ-18"
      ],
      "version": 1
    },
    {
      "id": "feature-perform-a-final-rendering-compile-sanity-pass-after-the-patch-ensure-there-are-no-typescript-react-runtime-errors-no-blank-page-on-load-and-the-landing-page-at-renders-normally",
      "title": "Perform a final rendering/compile sanity pass after the patch: ensure there are no TypeScript/React runtime errors, no blank page on load, and the Landing page at \"/\" renders normally.",
      "reqIds": [
        "REQ-19"
      ],
      "version": 1
    },
    {
      "id": "feature-modify-only-frontend-src-pages-internal-internallogin-tsx-to-implement-the-requested-model-a-internal-login-flow-using-internet-identity-login-and-existing-backend-methods-getcalleruser-issuperadminclaimed-claimsuperadmin-while-keeping-all-other-pages-ui-only-and-unchanged",
      "title": "Modify ONLY `frontend/src/pages/internal/InternalLogin.tsx` to implement the requested “Model A” Internal Login flow using Internet Identity login and existing backend methods (`getCallerUser()`, `isSuperadminClaimed()`, `claimSuperadmin()`) while keeping all other pages UI-only and unchanged.",
      "reqIds": [
        "REQ-83"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-the-exact-internallogin-ui-state-machine-and-backend-call-sequencing-as-specified-iiloggedin-selectedrole-checking-warningtext-superadminclaimed-claimloading-call-issuperadminclaimed-exactly-once-on-mount-to-set-superadminclaimed-and-do-not-call-getcalleruser-automatically-after-ii-login",
      "title": "Implement the exact InternalLogin UI state machine and backend call sequencing as specified: `iiLoggedIn`, `selectedRole`, `checking`, `warningText`, `superadminClaimed`, `claimLoading`; call `isSuperadminClaimed()` exactly once on mount to set `superadminClaimed` and do not call `getCallerUser()` automatically after II login.",
      "reqIds": [
        "REQ-84"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-role-card-grid-in-internallogin-tsx-so-it-always-shows-these-clickable-role-cards-and-uses-their-exact-role-keys-for-selection-validation-admin-asistenmu-concierge-strategicpartner-manajer-finance-management-superadmin-clicking-a-card-must-set-selectedrole-to-that-card-s-role-key-and-clear-warningtext-the-superadmin-card-must-always-exist-and-be-selectable",
      "title": "Update the role card grid in `InternalLogin.tsx` so it always shows these clickable role cards and uses their exact role keys for selection/validation: `admin`, `asistenmu`, `concierge`, `strategicpartner`, `manajer`, `finance`, `management`, `superadmin`. Clicking a card must set `selectedRole` to that card’s role key and clear `warningText`. The Superadmin card must always exist and be selectable.",
      "reqIds": [
        "REQ-85"
      ],
      "version": 1
    },
    {
      "id": "feature-enable-the-ruang-kerja-action-with-the-required-gating-and-behavior-it-must-be-enabled-only-when-iiloggedin-true-and-selectedrole-null-on-click-it-must-set-checking-true-clear-warningtext-call-getcalleruser-exactly-once-then-enforce-the-specified-decision-tree-registration-handling-role-mismatch-warning-status-check-for-non-client-partner-superadmin-roles-and-redirect-only-on-successful-match",
      "title": "Enable the “Ruang kerja” action with the required gating and behavior: it must be enabled only when `iiLoggedIn === true` AND `selectedRole !== null`; on click it must set `checking=true`, clear `warningText`, call `getCallerUser()` exactly once, then enforce the specified decision tree (registration handling, role mismatch warning, status check for non-client/partner/superadmin roles) and redirect only on successful match.",
      "reqIds": [
        "REQ-86"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-superadmin-claim-behavior-in-internallogin-tsx-show-a-claim-superadmin-button-only-when-iiloggedin-true-selectedrole-superadmin-and-superadminclaimed-false-on-click-set-claimloading-true-and-clear-warningtext-call-claimsuperadmin-no-parameters-if-it-requires-parameters-in-the-generated-types-pass-empty-placeholder-values-without-adding-any-form-fields-then-handle-success-already-claimed-outcomes-exactly-as-specified-and-redirect-only-on-successful-claim",
      "title": "Implement Superadmin claim behavior in `InternalLogin.tsx`: show a “Claim Superadmin” button only when `iiLoggedIn === true`, `selectedRole === \"superadmin\"`, and `superadminClaimed === false`. On click, set `claimLoading=true` and clear `warningText`, call `claimSuperadmin()` (no parameters; if it requires parameters in the generated types, pass empty/placeholder values without adding any form fields), then handle success/already-claimed outcomes exactly as specified and redirect only on successful claim.",
      "reqIds": [
        "REQ-87"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-the-fixed-dashboard-route-mapping-in-internallogin-tsx-redirects-no-route-changes-elsewhere-admin-admin-dashboard-asistenmu-asistenmu-dashboard-concierge-concierge-dashboard-strategicpartner-strategicpartner-dashboard-manajer-manajer-dashboard-finance-finance-dashboard-management-management-dashboard-superadmin-superadmin-dashboard",
      "title": "Implement the fixed dashboard route mapping in `InternalLogin.tsx` redirects (no route changes elsewhere): admin -> `/admin/dashboard`; asistenmu -> `/asistenmu/dashboard`; concierge -> `/concierge/dashboard`; strategicpartner -> `/strategicpartner/dashboard`; manajer -> `/manajer/dashboard`; finance -> `/finance/dashboard`; management -> `/management/dashboard`; superadmin -> `/superadmin/dashboard`.",
      "reqIds": [
        "REQ-88"
      ],
      "version": 1
    },
    {
      "id": "feature-preserve-the-existing-internallogin-page-s-base-layout-and-styling-logo-centered-container-card-styling-footer-only-add-the-minimum-ui-elements-needed-to-support-the-new-logic-enable-disable-states-per-role-ruang-kerja-placement-either-per-card-or-a-single-shared-button-superadmin-claim-button-in-the-superadmin-card-area-and-a-simple-warning-text-area-displayed-below-the-ruang-kerja-action-area",
      "title": "Preserve the existing InternalLogin page’s base layout and styling (logo, centered container, card styling, footer). Only add the minimum UI elements needed to support the new logic: enable/disable states, per-role “Ruang kerja” placement (either per-card or a single shared button), Superadmin claim button in the Superadmin card area, and a simple warning text area displayed below the “Ruang kerja” action area.",
      "reqIds": [
        "REQ-89"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-change-compiles-and-runs-without-runtime-errors-including-when-the-user-is-not-logged-in-anonymous-actor-when-backend-calls-fail-and-when-backend-return-types-differ-by-variant-handle-results-defensively-in-internallogin-tsx-without-changing-shared-hooks",
      "title": "Ensure the change compiles and runs without runtime errors, including when the user is not logged in (anonymous actor), when backend calls fail, and when backend return types differ by variant (handle results defensively in `InternalLogin.tsx` without changing shared hooks).",
      "reqIds": [
        "REQ-90"
      ],
      "version": 1
    },
    {
      "id": "feature-update-frontend-src-pages-internal-internallogin-tsx-so-the-claim-superadmin-action-calls-only-the-backend-method-actor-claimsuperadmin-and-does-not-call-directly-or-indirectly-from-this-click-handler-any-profile-role-assignment-methods-such-as-savecalleruserprofile-that-can-trigger-the-backend-error-unauthorized-only-admins-can-assign-user-roles",
      "title": "Update `frontend/src/pages/internal/InternalLogin.tsx` so the \"Claim Superadmin\" action calls ONLY the backend method `actor.claimSuperadmin()` and does not call (directly or indirectly from this click handler) any profile/role-assignment methods such as `saveCallerUserProfile()` that can trigger the backend error \"Unauthorized: Only admins can assign user roles\".",
      "reqIds": [
        "REQ-91"
      ],
      "version": 1
    },
    {
      "id": "feature-in-frontend-src-pages-internal-internallogin-tsx-add-a-one-time-on-mount-check-that-calls-actor-issuperadminclaimed-exactly-once-when-an-actor-is-available-and-uses-its-result-to-set-superadminclaimed-so-the-claim-ui-is-only-offered-when-superadmin-has-not-yet-been-claimed",
      "title": "In `frontend/src/pages/internal/InternalLogin.tsx`, add a one-time on-mount check that calls `actor.isSuperadminClaimed()` exactly once (when an actor is available) and uses its result to set `superadminClaimed`, so the claim UI is only offered when superadmin has not yet been claimed.",
      "reqIds": [
        "REQ-92"
      ],
      "version": 1
    },
    {
      "id": "feature-harden-frontend-src-pages-internal-internallogin-tsx-against-actor-readiness-issues-prevent-backend-calls-for-claim-check-actions-when-the-actor-is-still-initializing-and-show-a-non-crashing-inline-warning-instead-of-attempting-the-call",
      "title": "Harden `frontend/src/pages/internal/InternalLogin.tsx` against actor readiness issues: prevent backend calls for claim/check actions when the actor is still initializing, and show a non-crashing inline warning instead of attempting the call.",
      "reqIds": [
        "REQ-93"
      ],
      "version": 1
    },
    {
      "id": "feature-update-only-frontend-src-pages-internal-internallogin-tsx-to-show-a-dedicated-separate-claim-superadmin-card-section-that-does-not-require-selecting-the-superadmin-role-first-the-claim-section-must-be-visible-only-when-the-user-is-logged-in-with-internet-identity-iiloggedin-true-the-one-time-claim-check-has-completed-claimcheckdone-true-and-superadminclaimed-false",
      "title": "Update ONLY `frontend/src/pages/internal/InternalLogin.tsx` to show a dedicated, separate \"Claim Superadmin\" card/section that does not require selecting the \"superadmin\" role first. The claim section must be visible only when the user is logged in with Internet Identity (`iiLoggedIn === true`), the one-time claim-check has completed (`claimCheckDone === true`), and `superadminClaimed === false`.",
      "reqIds": [
        "REQ-94"
      ],
      "version": 1
    },
    {
      "id": "feature-in-frontend-src-pages-internal-internallogin-tsx-harden-the-claim-superadmin-click-handler-so-it-never-calls-the-backend-when-the-actor-is-not-ready-if-actor-is-null-undefined-or-actorfetching-is-true-the-handler-must-exit-early-and-show-a-non-crashing-inline-warning-reuse-the-existing-warning-mechanism-instead-of-attempting-the-call",
      "title": "In `frontend/src/pages/internal/InternalLogin.tsx`, harden the \"Claim Superadmin\" click handler so it never calls the backend when the actor is not ready. If `actor` is null/undefined OR `actorFetching` is true, the handler must exit early and show a non-crashing inline warning (reuse the existing warning mechanism) instead of attempting the call.",
      "reqIds": [
        "REQ-95"
      ],
      "version": 1
    },
    {
      "id": "feature-keep-the-superadmin-claim-mutation-behavior-unchanged-except-for-the-ui-placement-the-claim-action-must-call-only-actor-claimsuperadmin-and-must-not-call-any-other-backend-mutation-directly-or-indirectly-on-success-set-superadminclaimed-true-hide-the-claim-card-and-navigate-to-superadmin-dashboard-if-the-backend-indicates-the-superadmin-is-already-claimed-set-superadminclaimed-true-hide-the-claim-card-and-show-an-inline-warning-message-no-redirect-in-that-case",
      "title": "Keep the Superadmin claim mutation behavior unchanged except for the UI placement: the claim action must call ONLY `actor.claimSuperadmin()` and must not call any other backend mutation (directly or indirectly). On success, set `superadminClaimed = true`, hide the claim card, and navigate to `/superadmin/dashboard`. If the backend indicates the superadmin is already claimed, set `superadminClaimed = true`, hide the claim card, and show an inline warning message (no redirect in that case).",
      "reqIds": [
        "REQ-96"
      ],
      "version": 1
    },
    {
      "id": "feature-patch-frontend-src-pages-internal-internallogin-tsx-so-the-claim-superadmin-section-is-not-visible-and-not-actionable-until-the-backend-actor-is-fully-ready-preventing-the-repeated-backend-belum-siap-warning-when-a-user-clicks-too-early",
      "title": "Patch `frontend/src/pages/internal/InternalLogin.tsx` so the \"Claim Superadmin\" section is not visible and not actionable until the backend actor is fully ready, preventing the repeated \"Backend belum siap\" warning when a user clicks too early.",
      "reqIds": [
        "REQ-97"
      ],
      "version": 1
    },
    {
      "id": "feature-patch-frontend-src-pages-internal-internallogin-tsx-so-the-internet-identity-button-changes-from-a-post-login-state-to-a-true-logout-action-once-ii-login-succeeds-the-button-label-becomes-logout-and-clicking-it-logs-the-user-out-clears-identity",
      "title": "Patch `frontend/src/pages/internal/InternalLogin.tsx` so the Internet Identity button changes from a post-login state to a true logout action: once II login succeeds, the button label becomes \"Logout\" and clicking it logs the user out (clears identity).",
      "reqIds": [
        "REQ-98"
      ],
      "version": 1
    },
    {
      "id": "feature-update-frontend-src-pages-internal-internallogin-tsx-so-the-role-cards-shown-are-only-admin-finance-concierge-asistenmu-superadmin-remove-strategicpartner-manajer-management",
      "title": "Update `frontend/src/pages/internal/InternalLogin.tsx` so the role cards shown are ONLY: admin, finance, concierge, asistenmu, superadmin (remove strategicpartner, manajer, management).",
      "reqIds": [
        "REQ-99"
      ],
      "version": 1
    },
    {
      "id": "feature-update-frontend-src-pages-internal-internallogin-tsx-so-each-role-card-contains-its-own-workspace-button-clicking-a-card-s-workspace-button-must-validate-only-against-that-card-s-role-not-a-separate-global-selection-step-and-then-navigate-to-the-correct-dashboard-route-on-success",
      "title": "Update `frontend/src/pages/internal/InternalLogin.tsx` so EACH role card contains its own \"Workspace\" button. Clicking a card’s Workspace button must validate ONLY against that card’s role (not a separate global selection step) and then navigate to the correct dashboard route on success.",
      "reqIds": [
        "REQ-100"
      ],
      "version": 1
    },
    {
      "id": "feature-keep-the-existing-model-a-superadmin-claim-behavior-in-frontend-src-pages-internal-internallogin-tsx-show-a-dedicated-claim-superadmin-section-only-when-a-the-user-is-logged-in-with-internet-identity-b-the-one-time-issuperadminclaimed-check-has-completed-c-superadmin-is-not-yet-claimed-and-d-the-backend-actor-is-fully-ready-no-early-clickable-ui-the-claim-click-must-call-only-actor-claimsuperadmin-and-handle-success-already-claimed-outcomes-as-previously-specified",
      "title": "Keep the existing Model A Superadmin-claim behavior in `frontend/src/pages/internal/InternalLogin.tsx`: show a dedicated \"Claim Superadmin\" section only when (a) the user is logged in with Internet Identity, (b) the one-time `isSuperadminClaimed()` check has completed, (c) superadmin is not yet claimed, and (d) the backend actor is fully ready (no early clickable UI). The claim click must call ONLY `actor.claimSuperadmin()` and handle success/already-claimed outcomes as previously specified.",
      "reqIds": [
        "REQ-101"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-footer-across-all-frontend-pages-under-frontend-src-pages-to-display-exactly-asistenku-2026-pt-asistenku-digital-indonesia-replace-the-current-caffeine-ai-footer-block",
      "title": "Update the footer across ALL frontend pages under `frontend/src/pages/**` to display exactly: \"Asistenku © 2026 PT. Asistenku Digital Indonesia\" (replace the current caffeine.ai footer block).",
      "reqIds": [
        "REQ-102"
      ],
      "version": 1
    },
    {
      "id": "feature-apply-the-uploaded-dashboard-reference-styling-from-1771202158797-png-across-all-pages-in-frontend-src-pages-implement-a-two-tone-background-layout-deep-navy-warm-beige-and-update-card-shapes-colors-shadows-to-match-the-reference-style-as-closely-as-possible-using-tailwind-classes-without-editing-global-css-files",
      "title": "Apply the uploaded dashboard reference styling (from `1771202158797.png`) across ALL pages in `frontend/src/pages/**`: implement a two-tone background layout (deep navy + warm beige), and update card shapes/colors/shadows to match the reference style as closely as possible using Tailwind classes (without editing global CSS files).",
      "reqIds": [
        "REQ-103"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-logo-rendering-inconsistencies-while-doing-the-styling-pass-ensure-all-pages-use-img-src-asistenku-horizontal-png-no-leading-slash-and-no-assets-prefix-so-the-logo-loads-reliably-everywhere",
      "title": "Fix logo rendering inconsistencies while doing the styling pass: ensure all pages use `img src=\"asistenku-horizontal.png\"` (no leading slash and no `/assets/` prefix) so the logo loads reliably everywhere.",
      "reqIds": [
        "REQ-104"
      ],
      "version": 1
    },
    {
      "id": "feature-perform-a-final-compile-render-sanity-pass-after-the-patch-to-ensure-there-are-no-typescript-errors-no-runtime-crashes-and-navigation-still-works-for-the-existing-routes-defined-in-frontend-src-app-tsx",
      "title": "Perform a final compile/render sanity pass after the patch to ensure there are no TypeScript errors, no runtime crashes, and navigation still works for the existing routes defined in `frontend/src/App.tsx`.",
      "reqIds": [
        "REQ-105"
      ],
      "version": 1
    },
    {
      "id": "feature-update-frontend-src-pages-internal-internallogin-tsx-so-the-role-grid-includes-a-visible-superadmin-role-card-in-addition-to-admin-finance-concierge-asistenmu-and-the-superadmin-card-contains-its-own-workspace-button-that-runs-the-same-role-validation-flow-as-the-other-cards-and-navigates-to-superadmin-dashboard-on-success",
      "title": "Update `frontend/src/pages/internal/InternalLogin.tsx` so the role grid includes a visible `Superadmin` role card (in addition to admin/finance/concierge/asistenmu), and the Superadmin card contains its own `Workspace` button that runs the same role-validation flow as the other cards and navigates to `/superadmin/dashboard` on success.",
      "reqIds": [
        "REQ-106"
      ],
      "version": 1
    },
    {
      "id": "feature-harden-the-claim-superadmin-action-in-frontend-src-pages-internal-internallogin-tsx-so-it-never-displays-the-backend-error-text-unauthorized-only-admins-can-assign-user-roles-to-the-user-if-that-error-or-close-variants-is-thrown-the-ui-must-instead-1-immediately-re-check-issuperadminclaimed-once-2-if-claimed-is-now-true-treat-the-claim-as-successful-set-superadminclaimed-true-hide-the-claim-card-and-navigate-to-superadmin-dashboard-otherwise-3-show-a-superadmin-claim-specific-friendly-error-message-that-does-not-mention-admin-only-role-assignment",
      "title": "Harden the `Claim Superadmin` action in `frontend/src/pages/internal/InternalLogin.tsx` so it never displays the backend error text `Unauthorized: Only admins can assign user roles` to the user. If that error (or close variants) is thrown, the UI must instead: (1) immediately re-check `isSuperadminClaimed()` once, (2) if claimed is now true, treat the claim as successful (set `superadminClaimed=true`, hide the claim card, and navigate to `/superadmin/dashboard`), otherwise (3) show a superadmin-claim-specific friendly error message that does not mention admin-only role assignment.",
      "reqIds": [
        "REQ-107"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-claim-superadmin-card-section-in-frontend-src-pages-internal-internallogin-tsx-is-only-visible-and-actionable-when-a-the-user-is-logged-in-with-internet-identity-b-the-one-time-issuperadminclaimed-check-has-completed-c-superadmin-is-not-yet-claimed-and-d-the-backend-actor-is-fully-ready-actor-exists-and-actorfetching-is-false",
      "title": "Ensure the `Claim Superadmin` card/section in `frontend/src/pages/internal/InternalLogin.tsx` is only visible and actionable when: (a) the user is logged in with Internet Identity, (b) the one-time `isSuperadminClaimed()` check has completed, (c) superadmin is not yet claimed, and (d) the backend actor is fully ready (`actor` exists and `actorFetching` is false).",
      "reqIds": [
        "REQ-108"
      ],
      "version": 1
    },
    {
      "id": "feature-keep-the-superadmin-claim-mutation-behavior-in-frontend-src-pages-internal-internallogin-tsx-strictly-limited-to-calling-actor-claimsuperadmin-no-other-backend-mutation-calls-directly-or-indirectly-from-the-claim-click-handler",
      "title": "Keep the Superadmin claim mutation behavior in `frontend/src/pages/internal/InternalLogin.tsx` strictly limited to calling `actor.claimSuperadmin()` (no other backend mutation calls directly or indirectly from the claim click handler).",
      "reqIds": [
        "REQ-109"
      ],
      "version": 1
    },
    {
      "id": "feature-update-frontend-src-pages-internal-internallogin-tsx-so-the-one-time-issuperadminclaimed-check-completes-promptly-after-the-backend-actor-becomes-ready-i-e-once-actor-exists-and-actorfetching-is-false-ensuring-the-claim-superadmin-card-does-not-take-minutes-to-appear-when-it-should-be-visible",
      "title": "Update `frontend/src/pages/internal/InternalLogin.tsx` so the one-time `isSuperadminClaimed()` check completes promptly after the backend actor becomes ready (i.e., once `actor` exists and `actorFetching` is false), ensuring the Claim Superadmin card does not take minutes to appear when it should be visible.",
      "reqIds": [
        "REQ-110"
      ],
      "version": 1
    },
    {
      "id": "feature-update-frontend-src-pages-internal-internallogin-tsx-so-a-successful-superadmin-claim-permanently-hides-the-claim-superadmin-card-with-no-navigation-redirect-the-claim-action-must-still-call-only-actor-claimsuperadmin-and-must-not-invoke-any-other-backend-mutation-directly-or-indirectly",
      "title": "Update `frontend/src/pages/internal/InternalLogin.tsx` so a successful Superadmin claim permanently hides the Claim Superadmin card with no navigation/redirect. The claim action must still call ONLY `actor.claimSuperadmin()` and must not invoke any other backend mutation directly or indirectly.",
      "reqIds": [
        "REQ-111"
      ],
      "version": 1
    },
    {
      "id": "feature-update-frontend-src-pages-internal-internallogin-tsx-claim-error-handling-so-the-red-error-message-is-shown-only-when-the-claim-truly-fails-on-claim-errors-the-ui-must-perform-a-single-follow-up-issuperadminclaimed-re-check-if-now-claimed-treat-as-success-hide-card-permanently-no-redirect-otherwise-show-a-friendly-error-message-and-do-not-expose-raw-backend-authorization-strings-to-the-user",
      "title": "Update `frontend/src/pages/internal/InternalLogin.tsx` claim error handling so the red error message is shown only when the claim truly fails. On claim errors, the UI must perform a single follow-up `isSuperadminClaimed()` re-check: if now claimed, treat as success (hide card permanently, no redirect); otherwise show a friendly error message and do not expose raw backend authorization strings to the user.",
      "reqIds": [
        "REQ-112"
      ],
      "version": 1
    },
    {
      "id": "feature-modify-only-frontend-src-pages-dashboards-superadmindashboard-tsx-to-replace-the-placeholder-content-with-a-real-superadmin-dashboard-that-includes-an-in-page-tab-navigation-and-read-only-data-fetching-from-existing-backend-query-methods-including-calm-loading-and-error-states-while-preserving-the-existing-visual-style-gradient-background-centered-layout-header-with-logo-and-disabled-logout-and-keeping-the-existing-footer-text-unchanged",
      "title": "Modify ONLY `frontend/src/pages/dashboards/SuperadminDashboard.tsx` to replace the placeholder content with a real Superadmin dashboard that includes an in-page tab navigation and read-only data fetching from existing backend query methods, including calm loading and error states, while preserving the existing visual style (gradient background, centered layout, header with logo, and disabled Logout) and keeping the existing footer text unchanged.",
      "reqIds": [
        "REQ-115"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-tabs-inside-superadmindashboard-tsx-no-routing-changes-ringkasan-users-master-data-rates-tasks-default-active-tab-on-first-mount-must-be-ringkasan-and-it-should-auto-load-its-data-on-mount",
      "title": "Implement tabs inside `SuperadminDashboard.tsx` (no routing changes): Ringkasan, Users, Master Data, Rates, Tasks. Default active tab on first mount must be Ringkasan and it should auto-load its data on mount.",
      "reqIds": [
        "REQ-116"
      ],
      "version": 1
    },
    {
      "id": "feature-add-anonymous-identity-gating-in-superadmindashboard-tsx-using-useinternetidentity-if-the-current-identity-is-anonymous-not-logged-in-show-a-calm-banner-message-instructing-the-user-to-log-in-with-internet-identity-first-and-do-not-call-any-backend-actor-methods-while-in-this-state",
      "title": "Add anonymous-identity gating in `SuperadminDashboard.tsx` using `useInternetIdentity()`: if the current identity is anonymous / not logged in, show a calm banner message instructing the user to log in with Internet Identity first, and do not call any backend actor methods while in this state.",
      "reqIds": [
        "REQ-117"
      ],
      "version": 1
    },
    {
      "id": "feature-use-the-existing-hooks-useactor-and-useinternetidentity-from-within-superadmindashboard-tsx-to-call-existing-backend-queries-read-only-per-tab-with-each-tab-having-its-own-independent-loading-error-data-state-provide-a-per-tab-refresh-button-that-re-fetches-only-that-tab-s-data",
      "title": "Use the existing hooks `useActor()` and `useInternetIdentity()` from within `SuperadminDashboard.tsx` to call existing backend queries (read-only) per tab, with each tab having its own independent loading + error + data state. Provide a per-tab Refresh button that re-fetches only that tab’s data.",
      "reqIds": [
        "REQ-118"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-the-ringkasan-tab-when-logged-in-fetch-in-parallel-actor-listusersbasic-actor-getmasterdatamap-and-actor-getrates-render-summary-cards-for-total-users-and-master-data-key-count-and-render-a-small-rates-snapshot-table-derived-from-getrates-results",
      "title": "Implement the Ringkasan tab: when logged in, fetch in parallel `actor.listUsersBasic()`, `actor.getMasterDataMap()`, and `actor.getRates()`. Render summary cards for total users and master data key count, and render a small rates snapshot table derived from `getRates()` results.",
      "reqIds": [
        "REQ-119"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-the-users-tab-fetch-actor-listusersbasic-and-render-a-table-with-columns-principal-rolekey-derived-from-backend-variant-status-if-available-userid-if-available-if-a-field-is-not-present-in-the-returned-item-shape-display-for-that-cell",
      "title": "Implement the Users tab: fetch `actor.listUsersBasic()` and render a table with columns: principal, roleKey (derived from backend variant), status (if available), userId (if available). If a field is not present in the returned item shape, display “-” for that cell.",
      "reqIds": [
        "REQ-120"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-the-master-data-tab-fetch-actor-getmasterdatamap-actor-listkamuspekerjaan-actor-listaturanbeban-and-actor-getkonstantaunitclient-render-1-a-key-value-table-for-masterdatamap-2-kamuspekerjaan-table-with-columns-kategori-jenis-jamstandar-partnerallowed-if-present-3-aturanbeban-table-with-columns-tipepartner-jammin-jammax-pola-nilai-and-4-a-konstanta-card-showing-unitkejamperusahaan-and-updatedat",
      "title": "Implement the Master Data tab: fetch `actor.getMasterDataMap()`, `actor.listKamusPekerjaan()`, `actor.listAturanBeban()`, and `actor.getKonstantaUnitClient()`. Render: (1) a key/value table for MasterDataMap, (2) KamusPekerjaan table with columns kategori, jenis, jamStandar, partnerAllowed if present, (3) AturanBeban table with columns tipePartner, jamMin, jamMax, pola, nilai, and (4) a Konstanta card showing unitKeJamPerusahaan and updatedAt.",
      "reqIds": [
        "REQ-121"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-the-rates-tab-fetch-actor-getrates-and-render-a-clean-table-of-all-returned-entries-also-attempt-to-query-actor-gethourlyratebylevel-junior-actor-gethourlyratebylevel-senior-and-actor-gethourlyratebylevel-expert-as-text-arguments-and-display-the-returned-values-in-small-summary-cards-rows-defensively-handling-missing-method-shape-errors-as-regular-tab-errors",
      "title": "Implement the Rates tab: fetch `actor.getRates()` and render a clean table of all returned entries. Also attempt to query `actor.getHourlyRateByLevel('junior')`, `actor.getHourlyRateByLevel('senior')`, and `actor.getHourlyRateByLevel('expert')` (as Text arguments) and display the returned values in small summary cards/rows (defensively handling missing method/shape errors as regular tab errors).",
      "reqIds": [
        "REQ-122"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-the-tasks-tab-fetch-actor-listmytasks-and-render-a-table-showing-taskid-plus-phase-status-like-fields-if-present-in-the-returned-task-objects-if-listmytasks-returns-an-empty-list-display-the-empty-state-text-belum-ada-task",
      "title": "Implement the Tasks tab: fetch `actor.listMyTasks()` and render a table showing taskId plus phase/status-like fields if present in the returned task objects. If `listMyTasks()` returns an empty list, display the empty-state text “Belum ada task”.",
      "reqIds": [
        "REQ-123"
      ],
      "version": 1
    },
    {
      "id": "feature-within-superadmindashboard-tsx-implement-small-local-helper-functions-defined-in-the-same-file-only-for-safe-display-formatting-and-role-derivation-safestring-countarray-and-rolekeyfromvariant-do-not-export-new-components-from-the-file-keep-everything-self-contained",
      "title": "Within `SuperadminDashboard.tsx`, implement small local helper functions (defined in the same file only) for safe display formatting and role derivation: `safeString()`, `countArray()`, and `roleKeyFromVariant()`. Do not export new components from the file; keep everything self-contained.",
      "reqIds": [
        "REQ-124"
      ],
      "version": 1
    },
    {
      "id": "feature-update-frontend-src-pages-internal-internalregister-tsx-to-use-the-logo-path-exactly-src-assets-asistenku-horizontal-png-replacing-any-previous-internal-relative-or-rootless-paths-and-enlarge-the-logo-using-the-exact-classname-h-12-md-h-14-w-auto",
      "title": "Update `frontend/src/pages/internal/InternalRegister.tsx` to use the logo path exactly `src=\"/assets/asistenku-horizontal.png\"` (replacing any previous internal-relative or rootless paths) and enlarge the logo using the exact className `h-12 md:h-14 w-auto`.",
      "reqIds": [
        "REQ-125"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-an-explicit-no-auto-redirect-no-on-load-backend-calls-internet-identity-login-gate-in-frontend-src-pages-internal-internalregister-tsx-using-the-existing-hooks-useinternetidentity-and-useactor-when-the-user-is-not-logged-in-with-internet-identity-show-only-a-login-card-title-login-internet-identity-text-please-log-in-first-to-continue-internal-registration-with-a-primary-button-labeled-login-internet-identity-that-calls-login-on-click-hide-or-lock-the-registration-form-until-logged-in",
      "title": "Implement an explicit (no auto-redirect / no on-load backend calls) Internet Identity login gate in `frontend/src/pages/internal/InternalRegister.tsx` using the existing hooks `useInternetIdentity()` and `useActor()`: when the user is not logged in with Internet Identity, show only a login card (title \"Login Internet Identity\", text \"Please log in first to continue internal registration.\") with a primary button labeled \"Login Internet Identity\" that calls `login()` on click; hide or lock the registration form until logged in.",
      "reqIds": [
        "REQ-126"
      ],
      "version": 1
    },
    {
      "id": "feature-when-the-user-is-logged-in-with-internet-identity-in-internalregister-tsx-show-a-a-small-logged-in-badge-b-an-optional-logout-button-that-calls-clear-and-c-the-internal-registration-form-the-submit-button-must-be-disabled-when-any-of-the-following-are-true-not-logged-in-backend-actor-is-not-ready-actor-is-null-undefined-or-actor-is-still-fetching-required-fields-are-incomplete-or-submission-is-currently-loading",
      "title": "When the user is logged in with Internet Identity in `InternalRegister.tsx`, show: (a) a small \"Logged in\" badge, (b) an optional \"Logout\" button that calls `clear()`, and (c) the internal registration form. The submit button must be disabled when any of the following are true: not logged in, backend actor is not ready (actor is null/undefined or actor is still fetching), required fields are incomplete, or submission is currently loading.",
      "reqIds": [
        "REQ-127"
      ],
      "version": 1
    },
    {
      "id": "feature-replace-the-current-role-select-in-internalregister-tsx-with-a-role-picker-presented-as-a-grid-of-selectable-cards-with-exactly-these-options-admin-finance-supervisor-management-asistenmu-concierge-selection-must-be-stored-in-local-state-and-required-for-submission",
      "title": "Replace the current role select in `InternalRegister.tsx` with a role picker presented as a grid of selectable cards with exactly these options: Admin, Finance, Supervisor, Management, Asistenmu, Concierge. Selection must be stored in local state and required for submission.",
      "reqIds": [
        "REQ-128"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-the-internal-registration-form-fields-in-internalregister-tsx-as-controlled-typable-inputs-for-name-nama-email-and-whatsapp-whatsapp-no-auto-submit-submission-must-occur-only-via-an-explicit-submit-button-click",
      "title": "Implement the internal registration form fields in `InternalRegister.tsx` as controlled, typable inputs for: name (nama), email, and WhatsApp (whatsapp). No auto-submit; submission must occur only via an explicit submit button click.",
      "reqIds": [
        "REQ-129"
      ],
      "version": 1
    },
    {
      "id": "feature-on-submit-button-click-in-internalregister-tsx-perform-the-backend-mutation-exactly-via-await-actor-registerinternal-nama-email-whatsapp-role-selectedrolevariant-using-the-actor-from-useactor-implement-ui-state-for-loading-clear-prior-error-success-before-calling-show-a-destructive-error-alert-area-with-error-message-or-a-safe-fallback-on-failure-and-on-success-set-a-success-state-and-switch-to-a-success-screen",
      "title": "On submit button click in `InternalRegister.tsx`, perform the backend mutation exactly via `await actor.registerInternal({ nama, email, whatsapp, role: selectedRoleVariant })` using the actor from `useActor()`. Implement UI state for `loading`, clear prior error/success before calling, show a destructive error alert area with `error.message` (or a safe fallback) on failure, and on success set a success state and switch to a success screen.",
      "reqIds": [
        "REQ-130"
      ],
      "version": 1
    },
    {
      "id": "feature-after-a-successful-internal-registration-in-internalregister-tsx-do-not-auto-navigate-instead-display-a-success-screen-containing-the-exact-message-registration-successful-awaiting-approval-and-a-button-labeled-back-to-internal-login-that-navigates-to-internal-login-only-when-clicked",
      "title": "After a successful internal registration in `InternalRegister.tsx`, do not auto-navigate. Instead, display a success screen containing the exact message: \"Registration successful. Awaiting approval.\" and a button labeled \"Back to Internal Login\" that navigates to `/internal/login` only when clicked.",
      "reqIds": [
        "REQ-131"
      ],
      "version": 1
    },
    {
      "id": "feature-update-frontend-src-app-tsx-with-minimal-wiring-only-if-needed-so-that-the-path-internal-daftar-renders-internalregister-tsx-and-is-not-a-placeholder-if-existing-routing-already-supports-this-exact-path-do-not-change-other-routes",
      "title": "Update `frontend/src/App.tsx` with minimal wiring (only if needed) so that the path `/internal/daftar` renders `InternalRegister.tsx` (and is not a placeholder). If existing routing already supports this exact path, do not change other routes.",
      "reqIds": [
        "REQ-132"
      ],
      "version": 1
    },
    {
      "id": "feature-perform-a-compile-runtime-sanity-pass-for-the-modified-pages-to-ensure-there-are-no-typescript-errors-and-that-internal-daftar-works-in-both-logged-out-and-logged-in-states-without-crashes-including-when-the-actor-is-still-initializing",
      "title": "Perform a compile/runtime sanity pass for the modified pages to ensure there are no TypeScript errors, and that `/internal/daftar` works in both logged-out and logged-in states without crashes (including when the actor is still initializing).",
      "reqIds": [
        "REQ-133"
      ],
      "version": 1
    },
    {
      "id": "feature-modify-only-frontend-src-pages-dashboards-superadmindashboard-tsx-to-update-the-superadmin-dashboard-header-as-follows-1-change-the-logo-to-use-the-exact-path-assets-asistenku-horizontal-png-not-asistenku-horizontal-png-and-make-it-slightly-larger-than-the-current-h-6-2-add-centered-header-text-exactly-hello-superadmin-welcome-to-your-control-room-with-soft-non-dominating-styling-3-enable-the-logout-control-so-it-becomes-clickable-and-performs-a-real-logout-by-calling-clear-from-useinternetidentity-then-redirects-to-the-landing-page-at",
      "title": "Modify ONLY `frontend/src/pages/dashboards/SuperadminDashboard.tsx` to update the Superadmin dashboard header as follows: (1) change the logo to use the exact path `/assets/asistenku-horizontal.png` (not `/asistenku-horizontal.png`) and make it slightly larger than the current `h-6`; (2) add centered header text exactly: \"Hello, Superadmin — welcome to your control room.\" with soft, non-dominating styling; (3) enable the Logout control so it becomes clickable and performs a real logout by calling `clear()` from `useInternetIdentity()`, then redirects to the landing page at `/`.",
      "reqIds": [
        "REQ-134"
      ],
      "version": 1
    },
    {
      "id": "feature-in-frontend-src-pages-dashboards-superadmindashboard-tsx-update-the-users-tab-ui-to-include-a-real-time-case-insensitive-client-side-search-bar-placed-at-the-top-of-the-users-tab-content-the-search-input-must-use-the-placeholder-text-exactly-search-by-user-id-principal-name-and-filter-the-currently-loaded-users-tab-dataset-as-the-user-types-no-new-backend-calls-for-searching",
      "title": "In `frontend/src/pages/dashboards/SuperadminDashboard.tsx`, update the Users tab UI to include a real-time, case-insensitive, client-side search bar placed at the top of the Users tab content. The search input must use the placeholder text exactly: \"Search by User ID / Principal / Name\" and filter the currently loaded Users tab dataset as the user types (no new backend calls for searching).",
      "reqIds": [
        "REQ-135"
      ],
      "version": 1
    },
    {
      "id": "feature-in-frontend-src-pages-dashboards-superadmindashboard-tsx-restructure-the-users-tab-into-four-main-cards-sections-in-this-exact-order-1-pending-users-all-2-client-3-partner-4-internal-each-section-must-render-a-table-with-the-columns-specified-by-the-user-and-must-be-derived-from-the-already-fetched-users-tab-dataset-plus-any-additional-existing-backend-reads-that-are-already-available-in-the-generated-actor-typings-do-not-add-backend-changes",
      "title": "In `frontend/src/pages/dashboards/SuperadminDashboard.tsx`, restructure the Users tab into four main cards/sections in this exact order: (1) \"Pending Users (All)\", (2) \"Client\", (3) \"Partner\", (4) \"Internal\". Each section must render a table with the columns specified by the user and must be derived from the already-fetched Users tab dataset plus any additional existing backend reads that are already available in the generated actor typings (do not add backend changes).",
      "reqIds": [
        "REQ-136"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-the-pending-users-all-card-in-the-users-tab-to-show-all-users-whose-status-is-pending-across-all-roles-in-a-table-with-these-columns-user-id-name-principal-role-status-action-the-action-column-must-include-an-activate-button-for-each-row-that-calls-the-existing-backend-endpoint-to-update-the-user-status-to-active-then-refreshes-the-users-tab-data-on-success-do-not-change-the-backend-user-id-format-or-any-role-claim-logic",
      "title": "Implement the \"Pending Users (All)\" card in the Users tab to show ALL users whose status is pending (across all roles) in a table with these columns: User ID, Name, Principal, Role, Status, Action. The Action column must include an \"Activate\" button for each row that calls the existing backend endpoint to update the user status to active, then refreshes the Users tab data on success. Do not change the backend User ID format or any role/claim logic.",
      "reqIds": [
        "REQ-137"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-the-client-card-in-the-users-tab-with-sub-sections-by-status-active-suspended-blacklisted-each-sub-section-must-show-a-table-with-columns-user-id-name-principal-status-action-the-action-must-include-a-details-button-that-opens-a-modal-allowing-editing-of-all-client-profile-fields-and-updating-them-via-existing-backend-endpoints-when-clicking-an-update-button-in-the-modal",
      "title": "Implement the \"Client\" card in the Users tab with sub-sections by status: Active, Suspended, Blacklisted. Each sub-section must show a table with columns: User ID, Name, Principal, Status, Action. The Action must include a \"Details\" button that opens a modal allowing editing of all client profile fields and updating them via existing backend endpoints when clicking an \"Update\" button in the modal.",
      "reqIds": [
        "REQ-138"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-the-partner-card-in-the-users-tab-with-sub-sections-by-status-active-pending-suspended-blacklisted-each-sub-section-must-show-a-table-with-columns-user-id-name-principal-partner-level-status-action-the-action-must-include-a-details-button-that-opens-a-modal-allowing-editing-of-partner-profile-fields-plus-1-partner-level-dropdown-options-exactly-junior-senior-expert-and-2-status-dropdown-clicking-update-must-call-existing-backend-endpoints-to-persist-changes-then-refresh-the-users-tab-data-on-success",
      "title": "Implement the \"Partner\" card in the Users tab with sub-sections by status: Active, Pending, Suspended, Blacklisted. Each sub-section must show a table with columns: User ID, Name, Principal, Partner Level, Status, Action. The Action must include a \"Details\" button that opens a modal allowing editing of partner profile fields plus: (1) Partner Level (dropdown options exactly: Junior, Senior, Expert) and (2) Status (dropdown). Clicking \"Update\" must call existing backend endpoints to persist changes, then refresh the Users tab data on success.",
      "reqIds": [
        "REQ-139"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-the-internal-card-in-the-users-tab-with-sub-sections-active-and-pending-each-sub-section-must-show-a-table-with-columns-user-id-name-internal-role-status-action-the-action-must-include-a-details-button-that-opens-a-modal-where-the-admin-can-update-the-user-status-via-an-existing-backend-endpoint-then-refresh-the-users-tab-data-on-success",
      "title": "Implement the \"Internal\" card in the Users tab with sub-sections: Active and Pending. Each sub-section must show a table with columns: User ID, Name, Internal Role, Status, Action. The Action must include a \"Details\" button that opens a modal where the admin can update the user status via an existing backend endpoint, then refresh the Users tab data on success.",
      "reqIds": [
        "REQ-140"
      ],
      "version": 1
    },
    {
      "id": "feature-keep-the-scope-strictly-limited-to-frontend-src-pages-dashboards-superadmindashboard-tsx-and-to-the-requested-elements-users-tab-only-plus-header-message-logo-logout-do-not-change-other-tabs-behavior-or-their-backend-calls-do-not-change-routing-do-not-change-claim-superadmin-flow-do-not-change-backend-id-formats-and-do-not-change-role-logic-all-new-user-facing-strings-introduced-by-this-change-e-g-placeholders-button-labels-must-be-in-english",
      "title": "Keep the scope strictly limited to `frontend/src/pages/dashboards/SuperadminDashboard.tsx` and to the requested elements: Users tab only (plus header message/logo/logout). Do not change other tabs' behavior or their backend calls, do not change routing, do not change claim-superadmin flow, do not change backend ID formats, and do not change role logic. All new user-facing strings introduced by this change (e.g., placeholders, button labels) must be in English.",
      "reqIds": [
        "REQ-141"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-updated-frontend-src-pages-dashboards-superadmindashboard-tsx-compiles-and-runs-without-runtime-errors-it-must-handle-these-cases-gracefully-1-anonymous-not-logged-in-identity-no-actor-calls-show-an-english-guidance-banner-2-actor-still-initializing-disable-mutation-buttons-and-show-an-english-inline-notice-if-needed-and-3-missing-backend-methods-for-update-actions-show-a-calm-english-error-message-instead-of-crashing",
      "title": "Ensure the updated `frontend/src/pages/dashboards/SuperadminDashboard.tsx` compiles and runs without runtime errors. It must handle these cases gracefully: (1) anonymous/not logged-in identity (no actor calls; show an English guidance banner), (2) actor still initializing (disable mutation buttons and show an English inline notice if needed), and (3) missing backend methods for update actions (show a calm English error message instead of crashing).",
      "reqIds": [
        "REQ-142"
      ],
      "version": 1
    },
    {
      "id": "feature-modify-only-frontend-src-pages-dashboards-superadmindashboard-tsx-to-update-the-users-tab-details-modal-to-support-view-edit-modes-with-explicit-action-buttons-default-view-mode-an-edit-button-to-enter-edit-mode-a-cancel-button-to-revert-to-view-mode-without-saving-and-an-update-button-to-submit-changes-after-a-successful-update-close-the-modal-and-automatically-refresh-the-users-list",
      "title": "Modify ONLY `frontend/src/pages/dashboards/SuperadminDashboard.tsx` to update the Users-tab Details modal to support View/Edit modes with explicit action buttons: default View mode, an \"Edit\" button to enter Edit mode, a \"Cancel\" button to revert to View mode without saving, and an \"Update\" button to submit changes. After a successful Update, close the modal and automatically refresh the Users list.",
      "reqIds": [
        "REQ-143"
      ],
      "version": 1
    },
    {
      "id": "feature-within-frontend-src-pages-dashboards-superadmindashboard-tsx-enforce-per-role-editability-rules-in-the-details-modal-client-all-client-profile-fields-editable-in-edit-mode-partner-partner-profile-fields-editable-plus-partner-level-dropdown-options-exactly-junior-senior-expert-and-status-dropdown-internal-only-status-is-editable-dropdown-while-other-fields-remain-view-only-even-in-edit-mode",
      "title": "Within `frontend/src/pages/dashboards/SuperadminDashboard.tsx`, enforce per-role editability rules in the Details modal: Client = all client profile fields editable in Edit mode; Partner = partner profile fields editable plus Partner Level dropdown (options exactly Junior/Senior/Expert) and Status dropdown; Internal = only Status is editable (dropdown) while other fields remain view-only even in Edit mode.",
      "reqIds": [
        "REQ-144"
      ],
      "version": 1
    },
    {
      "id": "feature-in-frontend-src-pages-dashboards-superadmindashboard-tsx-make-all-users-tab-main-sections-collapsible-with-a-clickable-header-area-title-chevron-or-equivalent-and-expand-collapse-labels-main-cards-in-this-order-pending-users-all-client-partner-internal-default-open-state-only-pending-users-all-is-expanded-the-other-three-are-collapsed-on-first-render",
      "title": "In `frontend/src/pages/dashboards/SuperadminDashboard.tsx`, make all Users tab main sections collapsible with a clickable header area (title + chevron or equivalent) and Expand/Collapse labels: main cards in this order: \"Pending Users (All)\", \"Client\", \"Partner\", \"Internal\". Default open state: only \"Pending Users (All)\" is expanded; the other three are collapsed on first render.",
      "reqIds": [
        "REQ-145"
      ],
      "version": 1
    },
    {
      "id": "feature-in-frontend-src-pages-dashboards-superadmindashboard-tsx-make-users-tab-subsections-collapsible-as-subcards-client-subsections-active-suspended-blacklisted-partner-subsections-active-pending-suspended-blacklisted-internal-subsections-active-pending-these-subsections-should-be-independently-collapsible-and-visually-nested-under-their-parent-card",
      "title": "In `frontend/src/pages/dashboards/SuperadminDashboard.tsx`, make Users tab subsections collapsible as subcards: Client subsections \"Active\", \"Suspended\", \"Blacklisted\"; Partner subsections \"Active\", \"Pending\", \"Suspended\", \"Blacklisted\"; Internal subsections \"Active\", \"Pending\". These subsections should be independently collapsible and visually nested under their parent card.",
      "reqIds": [
        "REQ-146"
      ],
      "version": 1
    },
    {
      "id": "feature-in-frontend-src-pages-dashboards-superadmindashboard-tsx-change-users-tab-search-behavior-so-that-typing-in-the-existing-search-bar-shows-a-separate-panel-titled-search-results-directly-below-the-search-bar-this-panel-must-show-results-from-all-users-across-all-roles-and-statuses-using-client-side-filtering-only-no-new-backend-calls-and-must-match-query-against-userid-principal-name-and-optionally-role-string-when-the-query-is-empty-the-search-results-panel-is-hidden",
      "title": "In `frontend/src/pages/dashboards/SuperadminDashboard.tsx`, change Users tab search behavior so that typing in the existing search bar shows a separate panel titled \"Search Results\" directly below the search bar. This panel must show results from ALL users (across all roles and statuses) using client-side filtering only (no new backend calls) and must match query against userId, principal, name, and optionally role string. When the query is empty, the \"Search Results\" panel is hidden.",
      "reqIds": [
        "REQ-147"
      ],
      "version": 1
    },
    {
      "id": "feature-in-frontend-src-pages-dashboards-superadmindashboard-tsx-implement-pagination-for-the-users-tab-search-results-panel-maximum-5-rows-per-page-buttons-labeled-exactly-prev-and-next-and-a-page-indicator-formatted-exactly-page-x-of-y-if-no-matches-exist-show-the-message-exactly-no-results-found-within-the-search-results-panel",
      "title": "In `frontend/src/pages/dashboards/SuperadminDashboard.tsx`, implement pagination for the Users-tab \"Search Results\" panel: maximum 5 rows per page, buttons labeled exactly \"Prev\" and \"Next\", and a page indicator formatted exactly \"Page X of Y\". If no matches exist, show the message exactly \"No results found\" within the Search Results panel.",
      "reqIds": [
        "REQ-148"
      ],
      "version": 1
    },
    {
      "id": "feature-in-frontend-src-pages-dashboards-superadmindashboard-tsx-enhance-the-ringkasan-tab-total-users-card-to-include-a-collapsible-breakdown-default-collapsed-showing-counts-by-role-and-status-client-active-pending-suspended-blacklisted-partner-active-pending-suspended-blacklisted-internal-active-pending-superadmin-active-pending-the-collapsed-state-must-show-only-the-total-number-prominently-expanding-reveals-the-breakdown-details",
      "title": "In `frontend/src/pages/dashboards/SuperadminDashboard.tsx`, enhance the Ringkasan tab \"Total Users\" card to include a collapsible breakdown (default collapsed) showing counts by role and status: Client (Active/Pending/Suspended/Blacklisted), Partner (Active/Pending/Suspended/Blacklisted), Internal (Active/Pending), Superadmin (Active/Pending). The collapsed state must show only the total number prominently; expanding reveals the breakdown details.",
      "reqIds": [
        "REQ-149"
      ],
      "version": 1
    },
    {
      "id": "feature-in-frontend-src-pages-dashboards-superadmindashboard-tsx-add-new-collapsible-summary-cards-in-the-ringkasan-tab-all-default-collapsed-with-consistent-styling-1-asistenku-services-with-totals-active-inactive-and-optional-breakdown-by-package-tenang-rapi-fokus-jaga-when-data-is-available-2-tasks-with-total-and-breakdown-per-phase-permintaan-baru-ditolak-partner-on-progress-qa-asistenku-review-client-revisi-selesai-dibatalkan-client-3-financial-overview-showing-gmv-and-margin-fields-if-endpoints-exist-and-4-master-data-showing-master-data-keys-kamus-pekerjaan-count-aturan-beban-count-and-konstanta-unit-client-value-if-an-endpoint-for-a-card-is-unavailable-render-the-card-anyway-and-show-the-placeholder-text-exactly-no-data-yet-endpoint-not-available-in-the-card-content",
      "title": "In `frontend/src/pages/dashboards/SuperadminDashboard.tsx`, add new collapsible summary cards in the Ringkasan tab (all default collapsed) with consistent styling: (1) \"Asistenku Services\" with totals/active/inactive and optional breakdown by package (Tenang/Rapi/Fokus/Jaga) when data is available, (2) \"Tasks\" with total and breakdown per phase (permintaan_baru, ditolak_partner, on_progress, qa_asistenku, review_client, revisi, selesai, dibatalkan_client), (3) \"Financial Overview\" showing GMV and margin fields if endpoints exist, and (4) \"Master Data\" showing master data keys, kamus pekerjaan count, aturan beban count, and konstanta unit client value. If an endpoint for a card is unavailable, render the card anyway and show the placeholder text exactly \"No data yet / endpoint not available\" in the card content.",
      "reqIds": [
        "REQ-150"
      ],
      "version": 1
    },
    {
      "id": "feature-in-frontend-src-pages-dashboards-superadmindashboard-tsx-keep-ui-consistency-all-new-cards-subcards-use-the-same-card-styling-and-collapsible-headers-are-fully-clickable-title-chevron-indicator-do-not-change-the-global-dashboard-header-layout-navigation-and-do-not-change-behavior-of-other-tabs-besides-the-requested-ringkasan-and-users-changes",
      "title": "In `frontend/src/pages/dashboards/SuperadminDashboard.tsx`, keep UI consistency: all new cards/subcards use the same card styling, and collapsible headers are fully clickable (title + chevron/indicator). Do not change the global dashboard header layout/navigation, and do not change behavior of other tabs besides the requested Ringkasan and Users changes.",
      "reqIds": [
        "REQ-151"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-frontend-src-pages-dashboards-superadmindashboard-tsx-compiles-and-runs-without-runtime-errors-after-these-changes-including-anonymous-identity-state-no-actor-calls-show-the-existing-english-guidance-banner-actor-still-initializing-disable-mutation-buttons-and-show-calm-english-messaging-if-needed-and-missing-backend-methods-for-any-new-optional-ringkasan-cards-show-the-required-placeholder-instead-of-crashing",
      "title": "Ensure `frontend/src/pages/dashboards/SuperadminDashboard.tsx` compiles and runs without runtime errors after these changes, including: anonymous identity state (no actor calls; show the existing English guidance banner), actor still initializing (disable mutation buttons and show calm English messaging if needed), and missing backend methods for any new optional Ringkasan cards (show the required placeholder instead of crashing).",
      "reqIds": [
        "REQ-152"
      ],
      "version": 1
    },
    {
      "id": "feature-modify-only-frontend-src-pages-dashboards-superadmindashboard-tsx-to-implement-the-master-data-tab-enhancements-described-in-step-1-3-without-creating-any-new-files-or-routes-and-without-moving-merging-code-into-other-paths-the-master-data-work-must-stay-inside-the-existing-in-page-tab-named-master-data-no-routing-changes",
      "title": "Modify ONLY `frontend/src/pages/dashboards/SuperadminDashboard.tsx` to implement the Master Data tab enhancements described in STEP 1–3, without creating any new files or routes and without moving/merging code into other paths. The Master Data work must stay inside the existing in-page tab named “Master Data” (no routing changes).",
      "reqIds": [
        "REQ-153"
      ],
      "version": 1
    },
    {
      "id": "feature-in-frontend-src-pages-dashboards-superadmindashboard-tsx-implement-the-master-data-tab-with-4-collapsible-sections-expand-collapse-a-master-data-map-b-kamus-pekerjaan-c-aturan-beban-d-konstanta-unit-client-each-section-must-have-its-own-independent-loading-error-and-data-state-a-section-specific-refresh-button-that-only-loads-that-section-a-loading-spinner-using-loader2-and-an-error-alert-ui-consistent-with-other-tabs-card-alert",
      "title": "In `frontend/src/pages/dashboards/SuperadminDashboard.tsx`, implement the Master Data tab with 4 collapsible sections (expand/collapse): (A) Master Data Map, (B) Kamus Pekerjaan, (C) Aturan Beban, (D) Konstanta Unit Client. Each section must have its own independent `loading`, `error`, and `data` state, a section-specific “Refresh” button that only loads that section, a loading spinner using `Loader2`, and an error alert UI consistent with other tabs (Card + Alert).",
      "reqIds": [
        "REQ-154"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-section-a-master-data-map-key-value-ui-logic-inside-the-master-data-tab-using-only-these-actor-endpoints-getmasterdatamap-pushmasterdata-key-data-deletemasterdata-key-ui-must-include-a-refresh-button-an-inline-add-update-form-above-the-table-with-key-text-input-and-value-text-input-or-small-textarea-and-a-save-button-calling-pushmasterdata-key-value-render-a-table-with-columns-key-value-action-and-an-action-delete-button-per-row-with-confirm-that-calls-deletemasterdata-key-after-successful-save-or-delete-auto-refresh-only-this-section-if-map-is-empty-show-the-empty-state-text-exactly-belum-ada-data",
      "title": "Implement section A: “Master Data Map (Key / Value)” UI + logic inside the Master Data tab using ONLY these actor endpoints: `getMasterDataMap()`, `pushMasterData(key, data)`, `deleteMasterData(key)`. UI must include: a Refresh button, an inline add/update form above the table with Key (text input) and Value (text input or small textarea), and a Save button calling `pushMasterData(key, value)`. Render a table with columns Key | Value | Action, and an Action Delete button per row with confirm that calls `deleteMasterData(key)`. After successful save or delete, auto-refresh ONLY this section. If map is empty, show the empty state text exactly “Belum ada data”.",
      "reqIds": [
        "REQ-155"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-section-b-kamus-pekerjaan-crud-ui-logic-using-only-these-actor-endpoints-listkamuspekerjaan-upsertkamuspekerjaan-item-deletekamuspekerjaan-id-ui-must-include-refresh-button-tambah-kamus-button-a-table-with-columns-kategori-jenis-jam-standar-partner-allowed-aktif-action-and-an-add-edit-form-use-a-small-modal-or-inline-expandable-choose-the-most-stable-approach-form-fields-must-include-kategoripekerjaan-text-jenispekerjaan-text-jamstandar-nat-tipepartnerboleh-tipepartner-as-a-simple-multi-select-via-checkboxes-and-aktif-bool-default-true-row-actions-edit-prefill-form-then-submit-via-upsertkamuspekerjaan-item-and-delete-confirm-then-deletekamuspekerjaan-id-rendering-may-include-inactive-rows-but-inactive-rows-must-show-a-nonaktif-badge-after-create-update-delete-auto-refresh-only-section-b",
      "title": "Implement section B: “Kamus Pekerjaan (CRUD)” UI + logic using ONLY these actor endpoints: `listKamusPekerjaan()`, `upsertKamusPekerjaan(item)`, `deleteKamusPekerjaan(id)`. UI must include: Refresh button, “+ Tambah Kamus” button, a table with columns Kategori | Jenis | Jam Standar | Partner Allowed | Aktif | Action, and an Add/Edit form (use a small modal or inline expandable—choose the most stable approach). Form fields must include: `kategoriPekerjaan` (Text), `jenisPekerjaan` (Text), `jamStandar` (Nat), `tipePartnerBoleh` ([TipePartner]) as a simple multi-select via checkboxes, and `aktif` (Bool, default true). Row actions: Edit (prefill form, then submit via `upsertKamusPekerjaan(item)`) and Delete (confirm then `deleteKamusPekerjaan(id)`). Rendering may include inactive rows, but inactive rows must show a “Nonaktif” badge. After create/update/delete, auto-refresh ONLY section B.",
      "reqIds": [
        "REQ-156"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-section-c-aturan-beban-crud-ui-logic-using-only-these-actor-endpoints-listaturanbeban-upsertaturanbeban-item-deleteaturanbeban-id-ui-must-include-refresh-button-tambah-aturan-button-a-table-with-columns-tipe-partner-jam-min-jam-max-pola-beban-nilai-aktif-action-and-an-add-edit-form-with-fields-tipepartner-tipepartner-dropdown-jammin-nat-jammax-nat-polabeban-dropdown-with-exact-options-tambah-jam-tetap-and-tambah-per-jam-nilai-nat-and-aktif-bool-default-true-actions-per-row-edit-submit-upsertaturanbeban-item-and-delete-confirm-then-deleteaturanbeban-id-render-an-inactive-badge-when-aktif-false-after-create-update-delete-auto-refresh-only-section-c",
      "title": "Implement section C: “Aturan Beban (CRUD)” UI + logic using ONLY these actor endpoints: `listAturanBeban()`, `upsertAturanBeban(item)`, `deleteAturanBeban(id)`. UI must include: Refresh button, “+ Tambah Aturan” button, a table with columns Tipe Partner | Jam Min | Jam Max | Pola Beban | Nilai | Aktif | Action, and an Add/Edit form with fields: `tipePartner` (TipePartner dropdown), `jamMin` (Nat), `jamMax` (Nat), `polaBeban` dropdown with EXACT options `TAMBAH_JAM_TETAP` and `TAMBAH_PER_JAM`, `nilai` (Nat), and `aktif` (Bool, default true). Actions per row: Edit (submit `upsertAturanBeban(item)`) and Delete (confirm then `deleteAturanBeban(id)`). Render an inactive badge when `aktif=false`. After create/update/delete, auto-refresh ONLY section C.",
      "reqIds": [
        "REQ-157"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-section-d-konstanta-unit-client-single-config-ui-logic-using-only-these-actor-endpoints-getkonstantaunitclient-and-setkonstantaunitclient-unitkejamperusahaan-ui-must-include-refresh-button-an-info-card-showing-exactly-unit-ke-jam-perusahaan-value-and-updated-at-formatted-or-updated-at-if-not-available-and-an-input-form-for-unitkejamperusahaan-nat-with-an-update-button-calling-setkonstantaunitclient-value-if-getkonstantaunitclient-returns-null-show-default-value-2-read-only-and-updated-at-until-set-after-update-auto-refresh-only-section-d",
      "title": "Implement section D: “Konstanta Unit Client (single config)” UI + logic using ONLY these actor endpoints: `getKonstantaUnitClient()` and `setKonstantaUnitClient(unitKeJamPerusahaan)`. UI must include: Refresh button; an info card showing exactly “Unit ke Jam Perusahaan: {value}” and “Updated At: {formatted}” (or “Updated At: -” if not available); and an input form for `unitKeJamPerusahaan` (Nat) with an Update button calling `setKonstantaUnitClient(value)`. If `getKonstantaUnitClient()` returns null, show default value 2 (read-only) and Updated At: - until set. After update, auto-refresh ONLY section D.",
      "reqIds": [
        "REQ-158"
      ],
      "version": 1
    },
    {
      "id": "feature-in-frontend-src-pages-dashboards-superadmindashboard-tsx-add-small-local-helper-utilities-required-by-the-master-data-tab-if-not-already-present-formattipepartner-formatpolabeban-and-formattimestamp-ensure-nat-inputs-are-parsed-safely-string-number-and-converted-to-the-correct-actor-typing-e-g-bigint-nat-without-runtime-errors-do-not-introduce-new-exported-components-or-new-files",
      "title": "In `frontend/src/pages/dashboards/SuperadminDashboard.tsx`, add small local helper utilities required by the Master Data tab (if not already present): `formatTipePartner`, `formatPolaBeban`, and `formatTimestamp`. Ensure Nat inputs are parsed safely (string -> number) and converted to the correct actor typing (e.g., BigInt/Nat) without runtime errors. Do not introduce new exported components or new files.",
      "reqIds": [
        "REQ-159"
      ],
      "version": 1
    },
    {
      "id": "feature-perform-a-compile-runtime-sanity-pass-focused-on-the-updated-frontend-src-pages-dashboards-superadmindashboard-tsx-the-master-data-tab-must-render-in-logged-in-state-without-errors-must-not-crash-when-any-dataset-is-empty-and-all-crud-config-actions-must-trigger-the-correct-actor-calls-and-then-refresh-only-their-respective-section",
      "title": "Perform a compile/runtime sanity pass focused on the updated `frontend/src/pages/dashboards/SuperadminDashboard.tsx`: the Master Data tab must render in logged-in state without errors, must not crash when any dataset is empty, and all CRUD/config actions must trigger the correct actor calls and then refresh only their respective section.",
      "reqIds": [
        "REQ-160"
      ],
      "version": 1
    },
    {
      "id": "feature-modify-only-frontend-src-pages-dashboards-superadmindashboard-tsx-to-add-per-section-saving-guards-for-all-master-data-mutations-to-prevent-double-submit-add-boolean-state-guards-at-minimum-kamussaving-aturansaving-mapsaving-konstantasaving-every-master-data-save-update-delete-handler-must-1-exit-early-if-its-guard-is-already-true-2-set-the-guard-to-true-immediately-before-awaiting-any-actor-mutation-call-and-3-set-the-guard-back-to-false-in-a-finally-block-update-the-ui-so-that-any-button-that-triggers-a-guarded-action-is-disabled-while-its-guard-is-true-and-its-label-changes-while-saving-use-english-labels-exactly-saving-deleting-updating",
      "title": "Modify ONLY `frontend/src/pages/dashboards/SuperadminDashboard.tsx` to add per-section “saving guards” for all Master Data mutations to prevent double submit. Add boolean state guards at minimum: `kamusSaving`, `aturanSaving`, `mapSaving`, `konstantaSaving`. Every Master Data save/update/delete handler must: (1) exit early if its guard is already true, (2) set the guard to true immediately before awaiting any `actor.*` mutation call, and (3) set the guard back to false in a `finally` block. Update the UI so that any button that triggers a guarded action is disabled while its guard is true, and its label changes while saving (use English labels exactly: “Saving...”, “Deleting...”, “Updating...”).",
      "reqIds": [
        "REQ-161"
      ],
      "version": 1
    },
    {
      "id": "feature-modify-only-frontend-src-pages-dashboards-superadmindashboard-tsx-to-eliminate-any-double-trigger-submit-paths-inside-master-data-dialogs-forms-for-every-button-inside-master-data-dialogs-1-ensure-type-button-for-any-button-that-is-not-intended-to-submit-a-form-and-2-ensure-the-same-mutation-handler-cannot-be-invoked-via-both-onsubmit-and-onclick-use-the-safest-approach-remove-onsubmit-driven-mutations-for-master-data-dialogs-and-invoke-mutations-only-via-explicit-onclick-handlers-combined-with-the-saving-guards",
      "title": "Modify ONLY `frontend/src/pages/dashboards/SuperadminDashboard.tsx` to eliminate any double-trigger submit paths inside Master Data dialogs/forms. For every button inside Master Data dialogs: (1) ensure `type=\"button\"` for any button that is not intended to submit a form, and (2) ensure the same mutation handler cannot be invoked via both `onSubmit` and `onClick`. Use the safest approach: remove `onSubmit`-driven mutations for Master Data dialogs and invoke mutations only via explicit `onClick` handlers combined with the saving guards.",
      "reqIds": [
        "REQ-162"
      ],
      "version": 1
    },
    {
      "id": "feature-modify-only-frontend-src-pages-dashboards-superadmindashboard-tsx-to-implement-soft-delete-ux-display-rules-for-both-kamus-pekerjaan-and-aturan-beban-sections-1-by-default-tables-show-only-active-items-aktif-true-2-add-a-per-section-toggle-control-labeled-in-english-exactly-show-archived-that-switches-between-active-only-and-active-inactive-views-3-keep-the-delete-action-as-a-soft-delete-by-persisting-aktif-false-via-the-existing-backend-behavior-then-refresh-that-section-s-dataset-4-after-soft-delete-the-item-disappears-from-the-default-active-only-table-view-and-5-show-status-badges-active-shows-a-green-badge-labeled-exactly-active-inactive-shows-a-gray-badge-labeled-exactly-archived-the-inactive-badge-is-only-visible-when-show-archived-is-on",
      "title": "Modify ONLY `frontend/src/pages/dashboards/SuperadminDashboard.tsx` to implement soft-delete UX display rules for both “Kamus Pekerjaan” and “Aturan Beban” sections: (1) by default, tables show only active items (`aktif === true`), (2) add a per-section toggle control labeled in English exactly “Show Archived” that switches between active-only and active+inactive views, (3) keep the delete action as a soft delete by persisting `aktif=false` via the existing backend behavior, then refresh that section’s dataset, (4) after soft delete, the item disappears from the default active-only table view, and (5) show status badges: active shows a green badge labeled exactly “Active”; inactive shows a gray badge labeled exactly “Archived” (the inactive badge is only visible when “Show Archived” is ON).",
      "reqIds": [
        "REQ-163"
      ],
      "version": 1
    },
    {
      "id": "feature-modify-only-frontend-src-pages-dashboards-superadmindashboard-tsx-to-make-the-ringkasan-summary-tab-reliably-fetch-and-render-data-and-stay-up-to-date-after-master-data-changes-implement-all-of-the-following-without-adding-new-backend-endpoints-a-when-the-ringkasan-tab-is-opened-or-when-the-ringkasan-refresh-button-is-clicked-fetch-summary-from-the-backend-using-existing-actor-endpoints-and-render-at-minimum-total-users-number-master-data-keys-number-and-a-partner-rates-snapshot-b-add-ringkasan-master-data-summary-counts-computed-from-already-fetched-master-data-state-no-new-endpoints-kamus-pekerjaan-activecount-vs-archivedcount-aturan-beban-activecount-vs-archivedcount-master-data-map-total-keys-when-available-and-konstanta-unit-client-value-updatedat-c-if-the-master-data-datasets-needed-for-these-counts-are-not-present-in-state-when-ringkasan-is-opened-refreshed-trigger-a-lightweight-fetch-of-the-existing-master-data-reads-already-implemented-in-this-file-then-compute-and-render-the-counts-d-ringkasan-refresh-must-refresh-both-the-backend-summary-data-and-the-master-data-derived-counts-without-reloading-the-page",
      "title": "Modify ONLY `frontend/src/pages/dashboards/SuperadminDashboard.tsx` to make the Ringkasan (Summary) tab reliably fetch and render data and stay up-to-date after Master Data changes. Implement all of the following, without adding new backend endpoints: (A) When the Ringkasan tab is opened, or when the Ringkasan Refresh button is clicked, fetch summary from the backend using existing actor endpoints and render at minimum: Total Users (number), Master Data Keys (number), and a Partner Rates snapshot. (B) Add Ringkasan Master Data summary counts computed from already-fetched Master Data state (no new endpoints): Kamus Pekerjaan activeCount vs archivedCount, Aturan Beban activeCount vs archivedCount, Master Data Map total keys (when available), and Konstanta Unit Client value + updatedAt. (C) If the Master Data datasets needed for these counts are not present in state when Ringkasan is opened/refreshed, trigger a lightweight fetch of the existing Master Data reads already implemented in this file, then compute and render the counts. (D) Ringkasan Refresh must refresh both the backend summary data and the Master Data derived counts without reloading the page.",
      "reqIds": [
        "REQ-164"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-changes-compile-and-run-without-runtime-errors-while-preserving-the-existing-dashboard-layout-and-keeping-the-scope-strictly-limited-to-frontend-src-pages-dashboards-superadmindashboard-tsx-handle-anonymous-identity-and-actor-initializing-states-gracefully-do-not-attempt-actor-calls-when-identity-is-anonymous-and-keep-mutation-buttons-disabled-when-actor-is-unavailable-or-actorfetching-is-true-any-new-user-facing-text-introduced-by-this-change-e-g-toggle-labels-and-in-progress-labels-must-be-in-english",
      "title": "Ensure the changes compile and run without runtime errors, while preserving the existing dashboard layout and keeping the scope strictly limited to `frontend/src/pages/dashboards/SuperadminDashboard.tsx`. Handle anonymous identity and actor-initializing states gracefully: do not attempt actor calls when identity is anonymous, and keep mutation buttons disabled when `actor` is unavailable or `actorFetching` is true. Any new user-facing text introduced by this change (e.g., toggle labels and in-progress labels) must be in English.",
      "reqIds": [
        "REQ-165"
      ],
      "version": 1
    },
    {
      "id": "feature-modify-only-frontend-src-pages-dashboards-superadmindashboard-tsx-to-implement-the-step-1-scope-constraints-no-new-routes-no-new-files-components-and-all-changes-must-remain-self-contained-within-this-single-file",
      "title": "Modify ONLY `frontend/src/pages/dashboards/SuperadminDashboard.tsx` to implement the STEP 1 scope constraints: no new routes, no new files/components, and all changes must remain self-contained within this single file.",
      "reqIds": [
        "REQ-166"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-anti-double-submit-protection-for-all-master-data-mutation-actions-in-superadmindashboard-tsx-using-per-section-saving-guards-kamus-aturan-master-data-map-konstanta-each-guarded-handler-must-early-return-when-already-saving-set-the-guard-immediately-before-awaiting-any-actor-mutation-and-reset-the-guard-in-a-finally-block-while-saving-disable-the-triggering-action-buttons-and-any-cancel-close-in-the-same-modal-and-change-button-labels-to-english-exactly-saving-deleting-updating",
      "title": "Implement anti double-submit protection for ALL Master Data mutation actions in `SuperadminDashboard.tsx` using per-section saving guards (Kamus, Aturan, Master Data Map, Konstanta). Each guarded handler must early-return when already saving, set the guard immediately before awaiting any actor mutation, and reset the guard in a `finally` block. While saving, disable the triggering action buttons (and any Cancel/Close in the same modal) and change button labels to English exactly: “Saving...”, “Deleting...”, “Updating...”.",
      "reqIds": [
        "REQ-167"
      ],
      "version": 1
    },
    {
      "id": "feature-eliminate-all-double-trigger-submit-paths-inside-master-data-dialogs-forms-in-superadmindashboard-tsx-ensure-every-non-submit-button-uses-type-button-prevent-default-form-submission-if-a-form-wrapper-exists-and-ensure-the-same-mutation-handler-cannot-be-invoked-both-by-onsubmit-and-by-onclick-use-the-safest-approach-invoke-mutations-only-via-explicit-onclick-handlers-combined-with-the-saving-guards",
      "title": "Eliminate all double-trigger submit paths inside Master Data dialogs/forms in `SuperadminDashboard.tsx`: ensure every non-submit button uses `type=\"button\"`; prevent default form submission if a `<form>` wrapper exists; and ensure the same mutation handler cannot be invoked both by `onSubmit` and by `onClick` (use the safest approach: invoke mutations only via explicit `onClick` handlers combined with the saving guards).",
      "reqIds": [
        "REQ-168"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-kamus-pekerjaan-and-aturan-beban-soft-archive-behavior-so-that-archiving-never-creates-a-new-record-when-archiving-an-existing-item-always-upsert-using-that-item-s-existing-unique-code-id-never-pass-null-undefined-for-the-code-id-and-set-aktif-false-then-refresh-the-corresponding-dataset-the-archive-action-must-confirm-with-the-exact-english-prompt-archive-this-item",
      "title": "Fix Kamus Pekerjaan and Aturan Beban soft-archive behavior so that archiving NEVER creates a new record. When archiving an existing item, ALWAYS upsert using that item’s existing unique code/id (never pass null/undefined for the code/id) and set `aktif=false`, then refresh the corresponding dataset. The Archive action must confirm with the exact English prompt: “Archive this item?”.",
      "reqIds": [
        "REQ-169"
      ],
      "version": 1
    },
    {
      "id": "feature-add-per-row-edit-buttons-in-the-action-column-for-both-kamus-pekerjaan-and-aturan-beban-tables-in-superadmindashboard-tsx-clicking-edit-must-open-the-existing-modal-in-edit-mode-prefill-all-fields-from-the-row-and-store-the-editing-id-code-in-local-state-submitting-in-edit-mode-must-upsert-using-the-existing-id-code-must-not-pass-null-after-success-close-modal-refresh-that-dataset-only-and-reset-the-form-state",
      "title": "Add per-row Edit buttons (in the Action column) for both Kamus Pekerjaan and Aturan Beban tables in `SuperadminDashboard.tsx`. Clicking Edit must open the existing modal in edit mode, prefill all fields from the row, and store the editing id/code in local state. Submitting in edit mode must upsert using the existing id/code (must not pass null). After success: close modal, refresh that dataset only, and reset the form state.",
      "reqIds": [
        "REQ-170"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-default-active-only-lists-and-per-section-show-archived-toggles-for-kamus-pekerjaan-and-aturan-beban-in-superadmindashboard-tsx-default-toggle-state-must-be-off-active-only-when-on-the-table-view-includes-both-active-and-archived-records-status-badges-must-be-in-english-active-green-badge-labeled-exactly-active-archived-gray-badge-labeled-exactly-archived-and-the-archived-badge-must-only-be-visible-when-show-archived-is-on",
      "title": "Implement default Active-only lists and per-section “Show Archived” toggles for Kamus Pekerjaan and Aturan Beban in `SuperadminDashboard.tsx`. Default toggle state must be OFF (active-only). When ON, the table view includes both active and archived records. Status badges must be in English: Active = green badge labeled exactly “Active”; Archived = gray badge labeled exactly “Archived”, and the “Archived” badge must only be visible when “Show Archived” is ON.",
      "reqIds": [
        "REQ-171"
      ],
      "version": 1
    },
    {
      "id": "feature-stabilize-the-master-data-map-key-value-ux-in-superadmindashboard-tsx-save-must-overwrite-value-when-the-key-already-exists-edit-by-overwrite-if-an-edit-action-exists-for-map-rows-clicking-edit-must-prefill-the-key-value-form-and-make-the-key-read-only-during-edit-to-prevent-accidental-creation-of-a-new-key-deleting-keys-must-remain-stable-no-accidental-creates",
      "title": "Stabilize the Master Data Map (Key/Value) UX in `SuperadminDashboard.tsx`: Save must overwrite value when the key already exists (edit-by-overwrite). If an Edit action exists for map rows, clicking Edit must prefill the key/value form and make the key read-only during edit to prevent accidental creation of a new key. Deleting keys must remain stable (no accidental creates).",
      "reqIds": [
        "REQ-172"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-ringkasan-tab-in-superadmindashboard-tsx-always-renders-promptly-and-accurately-once-data-is-available-it-must-display-at-minimum-total-users-master-data-keys-kamus-active-count-and-archived-count-aturan-active-count-and-archived-count-konstanta-unit-client-value-and-updatedat-and-the-partner-rates-snapshot-these-counts-must-be-derived-from-the-same-already-fetched-datasets-used-by-other-tabs-sections-kamusdata-aturandata-mdmapdata-masterdatamap-konstantadata-ratesdata-if-backend-is-unavailable-or-returns-errors-show-a-calm-non-crashing-empty-error-state-message-exactly-no-data-available-click-refresh-to-load-and-do-not-crash",
      "title": "Ensure the Ringkasan tab in `SuperadminDashboard.tsx` always renders promptly and accurately once data is available. It must display (at minimum): Total Users, Master Data Keys, Kamus (Active count and Archived count), Aturan (Active count and Archived count), Konstanta Unit Client (value and updatedAt), and the Partner Rates snapshot. These counts must be derived from the same already-fetched datasets used by other tabs/sections (`kamusData`, `aturanData`, `mdMapData`/`masterDataMap`, `konstantaData`, `ratesData`). If backend is unavailable or returns errors, show a calm non-crashing empty/error state message exactly: “No data available. Click Refresh to load.” and do not crash.",
      "reqIds": [
        "REQ-173"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-ringkasan-refresh-behavior-in-superadmindashboard-tsx-so-that-clicking-refresh-triggers-fetching-all-datasets-required-by-ringkasan-users-master-data-map-kamus-aturan-konstanta-rates-and-then-recomputes-the-ringkasan-derived-counts-without-any-full-page-reload-ensure-this-refresh-stays-within-the-single-file-scope-and-does-not-change-other-tabs-behavior-beyond-keeping-ringkasan-accurate",
      "title": "Implement Ringkasan Refresh behavior in `SuperadminDashboard.tsx` so that clicking Refresh triggers fetching ALL datasets required by Ringkasan (users, master data map, kamus, aturan, konstanta, rates), and then recomputes the Ringkasan derived counts without any full page reload. Ensure this refresh stays within the single-file scope and does not change other tabs’ behavior beyond keeping Ringkasan accurate.",
      "reqIds": [
        "REQ-174"
      ],
      "version": 1
    },
    {
      "id": "feature-standardize-master-data-collapsible-section-headers-in-superadmindashboard-tsx-for-consistency-each-master-data-section-header-must-have-left-aligned-title-and-right-aligned-small-refresh-button-plus-an-expand-collapse-indicator-with-the-whole-header-area-being-clickable-for-expand-collapse-refresh-must-only-refresh-that-section",
      "title": "Standardize Master Data collapsible section headers in `SuperadminDashboard.tsx` for consistency: each Master Data section header must have left-aligned title and right-aligned small refresh button plus an expand/collapse indicator, with the whole header area being clickable for expand/collapse (refresh must only refresh that section).",
      "reqIds": [
        "REQ-175"
      ],
      "version": 1
    },
    {
      "id": "feature-perform-a-compile-runtime-sanity-pass-focused-on-the-updated-frontend-src-pages-dashboards-superadmindashboard-tsx-it-must-compile-with-no-typescript-errors-must-not-crash-in-anonymous-not-logged-in-state-must-not-attempt-actor-calls-when-identity-is-anonymous-and-must-keep-mutation-buttons-disabled-while-actor-is-unavailable-or-actorfetching-is-true-all-newly-introduced-user-facing-strings-for-this-change-must-be-in-english-except-strings-explicitly-required-to-remain-exact-by-earlier-specs-e-g-master-data-map-empty-state-belum-ada-data",
      "title": "Perform a compile/runtime sanity pass focused on the updated `frontend/src/pages/dashboards/SuperadminDashboard.tsx`: it must compile with no TypeScript errors, must not crash in anonymous/not-logged-in state, must not attempt actor calls when identity is anonymous, and must keep mutation buttons disabled while `actor` is unavailable or `actorFetching` is true. All newly introduced user-facing strings for this change must be in English (except strings explicitly required to remain exact by earlier specs, e.g., Master Data Map empty state “Belum ada data”).",
      "reqIds": [
        "REQ-176"
      ],
      "version": 1
    },
    {
      "id": "feature-create-and-or-update-only-these-four-page-files-to-implement-the-required-internet-identity-ii-backend-flows-without-editing-any-other-file-frontend-src-pages-external-clientlogin-tsx-frontend-src-pages-external-partnerlogin-tsx-frontend-src-pages-external-clientregister-tsx-frontend-src-pages-external-partnerregister-tsx-if-any-of-these-files-do-not-exist-yet-create-them-at-exactly-these-paths-and-ensure-each-exports-a-default-react-component",
      "title": "Create and/or update ONLY these four page files to implement the required Internet Identity (II) + backend flows, without editing any other file: `frontend/src/pages/external/ClientLogin.tsx`, `frontend/src/pages/external/PartnerLogin.tsx`, `frontend/src/pages/external/ClientRegister.tsx`, `frontend/src/pages/external/PartnerRegister.tsx`. If any of these files do not exist yet, create them at exactly these paths and ensure each exports a default React component.",
      "reqIds": [
        "REQ-177"
      ],
      "version": 1
    },
    {
      "id": "feature-in-frontend-src-pages-external-clientlogin-tsx-and-frontend-src-pages-external-partnerlogin-tsx-implement-the-login-state-and-behavior-using-useinternetidentity-and-useactor-with-these-local-states-isloggedinii-boolean-isloadingii-boolean-isloadingworkspace-boolean-error-string-null-the-login-internet-identity-button-must-be-enabled-by-default-call-login-on-click-and-on-success-set-isloggedinii-true-do-not-call-actor-getcalleruser-on-mount",
      "title": "In `frontend/src/pages/external/ClientLogin.tsx` and `frontend/src/pages/external/PartnerLogin.tsx`, implement the Login state and behavior using `useInternetIdentity()` and `useActor()` with these local states: `isLoggedInII` (boolean), `isLoadingII` (boolean), `isLoadingWorkspace` (boolean), `error` (string | null). The “Login Internet Identity” button must be enabled by default, call `login()` on click, and on success set `isLoggedInII=true`. Do not call `actor.getCallerUser()` on mount.",
      "reqIds": [
        "REQ-178"
      ],
      "version": 1
    },
    {
      "id": "feature-in-frontend-src-pages-external-clientlogin-tsx-and-frontend-src-pages-external-partnerlogin-tsx-implement-the-masuk-ke-ruang-kerja-workspace-button-behavior-it-must-be-disabled-when-isloggedinii-on-click-guard-against-double-submit-set-isloadingworkspace-true-clear-error-call-actor-getcalleruser-exactly-once-then-decide-1-if-caller-is-not-registered-navigate-manual-button-triggered-navigation-to-the-role-s-register-page-client-daftar-client-or-the-existing-client-register-path-currently-used-in-the-project-partner-daftar-partner-or-the-existing-partner-register-path-2-if-role-mismatch-show-a-public-error-state-with-the-exact-message-silahkan-klik-sesuai-dengan-akun-anda-and-render-a-button-that-navigates-back-to-the-corresponding-role-login-page-3-if-role-matches-and-status-is-ok-navigate-to-the-existing-dashboard-route-for-that-role-use-whatever-dashboard-path-already-exists-in-the-project-always-set-isloadingworkspace-false-in-a-finally-block",
      "title": "In `frontend/src/pages/external/ClientLogin.tsx` and `frontend/src/pages/external/PartnerLogin.tsx`, implement the “Masuk ke ruang kerja” (Workspace) button behavior: it must be disabled when `!isLoggedInII`. On click, guard against double-submit, set `isLoadingWorkspace=true`, clear `error`, call `actor.getCallerUser()` exactly once, then decide: (1) if caller is not registered, navigate (manual button-triggered navigation) to the role’s register page (Client -> `/daftar/client` OR the existing client register path currently used in the project; Partner -> `/daftar/partner` OR the existing partner register path), (2) if role mismatch, show a public error state with the exact message `“Silahkan klik sesuai dengan akun anda”` and render a button that navigates back to the corresponding role login page, (3) if role matches and status is OK, navigate to the existing dashboard route for that role (use whatever dashboard path already exists in the project). Always set `isLoadingWorkspace=false` in a `finally` block.",
      "reqIds": [
        "REQ-179"
      ],
      "version": 1
    },
    {
      "id": "feature-in-frontend-src-pages-external-clientregister-tsx-and-frontend-src-pages-external-partnerregister-tsx-implement-registration-states-and-ii-gating-using-useinternetidentity-and-useactor-with-these-local-states-form-fields-per-the-existing-ui-client-nama-email-whatsapp-perusahaan-partner-nama-email-whatsapp-keahlian-domisili-plus-issubmitting-boolean-isloggedinii-boolean-success-boolean-error-string-null-add-an-enabled-login-internet-identity-button-above-the-register-button-when-not-logged-in-after-successful-ii-login-set-isloggedinii-true-do-not-auto-redirect-on-mount",
      "title": "In `frontend/src/pages/external/ClientRegister.tsx` and `frontend/src/pages/external/PartnerRegister.tsx`, implement registration states and II gating using `useInternetIdentity()` and `useActor()` with these local states: form fields per the existing UI (Client: `nama`, `email`, `whatsapp`, `perusahaan`; Partner: `nama`, `email`, `whatsapp`, `keahlian`, `domisili`), plus `isSubmitting` (boolean), `isLoggedInII` (boolean), `success` (boolean), `error` (string | null). Add an enabled “Login Internet Identity” button above the Register button when not logged in; after successful II login set `isLoggedInII=true`. Do not auto-redirect on mount.",
      "reqIds": [
        "REQ-180"
      ],
      "version": 1
    },
    {
      "id": "feature-in-frontend-src-pages-external-clientregister-tsx-and-frontend-src-pages-external-partnerregister-tsx-implement-form-validation-and-enablement-rules-for-the-daftar-button-the-button-must-be-disabled-if-user-is-not-logged-in-with-ii-isloggedinii-or-required-fields-are-missing-invalid-or-issubmitting-is-true-minimum-validation-nama-at-least-2-characters-email-contains-whatsapp-has-at-least-9-digits-simple-validation-is-ok-other-required-fields-are-non-empty",
      "title": "In `frontend/src/pages/external/ClientRegister.tsx` and `frontend/src/pages/external/PartnerRegister.tsx`, implement form validation and enablement rules for the “Daftar” button. The button must be disabled if: user is not logged in with II (`!isLoggedInII`), or required fields are missing/invalid, or `isSubmitting` is true. Minimum validation: `nama` at least 2 characters; `email` contains `@`; `whatsapp` has at least 9 digits (simple validation is OK); other required fields are non-empty.",
      "reqIds": [
        "REQ-181"
      ],
      "version": 1
    },
    {
      "id": "feature-in-frontend-src-pages-external-clientregister-tsx-on-daftar-submit-click-guard-against-double-submit-set-issubmitting-true-clear-previous-error-then-call-the-existing-backend-registration-method-for-client-prefer-actor-registerclient-nama-email-whatsapp-perusahaan-if-the-backend-method-name-signature-differs-in-the-generated-actor-typings-call-the-existing-client-registration-method-that-already-exists-in-the-project-do-not-add-new-backend-methods-on-success-set-success-true-and-do-not-auto-navigate-on-failure-show-an-error-banner-non-crashing-with-a-safe-message",
      "title": "In `frontend/src/pages/external/ClientRegister.tsx`, on Daftar/submit click: guard against double-submit, set `isSubmitting=true`, clear previous `error`, then call the existing backend registration method for Client. Prefer `actor.registerClient(nama,email,whatsapp,perusahaan)`; if the backend method name/signature differs in the generated actor typings, call the existing client registration method that already exists in the project (do not add new backend methods). On success: set `success=true` and do not auto-navigate. On failure: show an error banner (non-crashing) with a safe message.",
      "reqIds": [
        "REQ-182"
      ],
      "version": 1
    },
    {
      "id": "feature-in-frontend-src-pages-external-partnerregister-tsx-on-daftar-submit-click-guard-against-double-submit-set-issubmitting-true-clear-previous-error-then-call-the-existing-backend-registration-method-for-partner-prefer-actor-registerpartner-nama-email-whatsapp-keahlian-domisili-if-the-backend-method-name-signature-differs-in-the-generated-actor-typings-call-the-existing-partner-registration-method-that-already-exists-in-the-project-do-not-add-new-backend-methods-on-success-set-success-true-and-do-not-auto-navigate-on-failure-show-an-error-banner-non-crashing-with-a-safe-message",
      "title": "In `frontend/src/pages/external/PartnerRegister.tsx`, on Daftar/submit click: guard against double-submit, set `isSubmitting=true`, clear previous `error`, then call the existing backend registration method for Partner. Prefer `actor.registerPartner(nama,email,whatsapp,keahlian,domisili)`; if the backend method name/signature differs in the generated actor typings, call the existing partner registration method that already exists in the project (do not add new backend methods). On success: set `success=true` and do not auto-navigate. On failure: show an error banner (non-crashing) with a safe message.",
      "reqIds": [
        "REQ-183"
      ],
      "version": 1
    },
    {
      "id": "feature-in-both-register-pages-after-successful-registration-success-true-replace-the-form-with-a-success-state-ui-that-includes-1-the-exact-success-message-pendaftaran-berhasil-and-2-a-button-labeled-masuk-ke-ruang-kerja-that-performs-a-manual-workspace-navigation-flow-on-click-call-actor-getcalleruser-exactly-once-and-navigate-to-the-existing-dashboard-route-for-that-role-client-partner-no-automatic-redirect-after-success-navigation-must-be-manual-via-the-button",
      "title": "In both register pages, after successful registration (`success===true`), replace the form with a Success State UI that includes: (1) the exact success message `“Pendaftaran berhasil”`, and (2) a button labeled “Masuk ke ruang kerja” that performs a manual workspace navigation flow: on click, call `actor.getCallerUser()` exactly once and navigate to the existing dashboard route for that role (Client/Partner). No automatic redirect after success; navigation must be manual via the button.",
      "reqIds": [
        "REQ-184"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-anti-double-submit-protections-across-all-4-external-pages-all-action-buttons-ii-login-register-daftar-workspace-must-be-disabled-while-their-corresponding-loading-flags-are-true-and-each-handler-must-early-return-if-the-relevant-isloading-issubmitting-flag-is-already-true-ensure-error-is-cleared-on-new-attempts-and-that-loading-flags-reset-reliably-in-finally-blocks",
      "title": "Implement anti-double-submit protections across all 4 external pages: all action buttons (II login, Register/Daftar, Workspace) must be disabled while their corresponding loading flags are true, and each handler must early-return if the relevant `isLoading...`/`isSubmitting` flag is already true. Ensure `error` is cleared on new attempts and that loading flags reset reliably in `finally` blocks.",
      "reqIds": [
        "REQ-185"
      ],
      "version": 1
    },
    {
      "id": "feature-ui-styling-constraint-keep-the-existing-layout-and-styling-largely-unchanged-in-these-4-pages-retain-the-current-pageshell-based-structure-spacing-and-general-button-styles-add-only-the-minimum-ui-needed-to-support-the-new-logic-enabled-disabled-states-loading-labels-if-desired-an-error-banner-region-and-the-registration-success-state-show-an-error-banner-when-error-is-non-null",
      "title": "UI/styling constraint: keep the existing layout and styling largely unchanged in these 4 pages (retain the current PageShell-based structure, spacing, and general button styles). Add only the minimum UI needed to support the new logic: enabled/disabled states, loading labels if desired, an error banner region, and the registration success state. Show an error banner when `error` is non-null.",
      "reqIds": [
        "REQ-186"
      ],
      "version": 1
    },
    {
      "id": "feature-manual-navigation-only-ensure-that-all-navigation-redirect-behavior-in-these-4-pages-happens-only-as-a-result-of-explicit-user-button-clicks-e-g-setting-window-location-href-or-using-existing-navigation-mechanism-available-within-the-file-and-not-via-useeffect-not-on-initial-load-and-not-as-an-automatic-reaction-to-state-changes-such-as-isloggedinii-becoming-true",
      "title": "Manual navigation only: ensure that all navigation/redirect behavior in these 4 pages happens only as a result of explicit user button clicks (e.g., setting `window.location.href` or using existing navigation mechanism available within the file), and not via `useEffect`, not on initial load, and not as an automatic reaction to state changes such as `isLoggedInII` becoming true.",
      "reqIds": [
        "REQ-187"
      ],
      "version": 1
    },
    {
      "id": "feature-compile-runtime-sanity-the-app-must-compile-without-typescript-errors-after-these-changes-the-4-updated-external-pages-must-not-crash-in-any-of-these-states-not-logged-in-anonymous-identity-actor-still-initializing-useactor-isfetching-true-and-or-actor-null-backend-call-failures-throws-unexpected-getcalleruser-return-shapes-handle-backend-responses-defensively-no-assumptions-about-exact-variant-shapes-beyond-role-status-checks-needed-for-routing",
      "title": "Compile/runtime sanity: the app must compile without TypeScript errors after these changes. The 4 updated external pages must not crash in any of these states: not logged in (anonymous identity), actor still initializing (`useActor().isFetching` true and/or `actor` null), backend call failures/throws, unexpected `getCallerUser()` return shapes. Handle backend responses defensively (no assumptions about exact variant shapes beyond role/status checks needed for routing).",
      "reqIds": [
        "REQ-188"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-logo-image-path-globally-across-the-frontend-so-every-page-and-dashboard-uses-the-exact-path-assets-asistenku-horizontal-png-for-the-asistenku-horizontal-logo-replacing-any-existing-variants-such-as-asistenku-horizontal-png-client-asistenku-horizontal-png-partner-asistenku-horizontal-png-asset-asistenku-horizontal-png-or-other-inconsistent-paths",
      "title": "Update the logo image path globally across the frontend so every page and dashboard uses the exact path `\"/assets/asistenku-horizontal.png\"` for the Asistenku horizontal logo, replacing any existing variants such as `\"asistenku-horizontal.png\"`, `\"/client/asistenku-horizontal.png\"`, `\"/partner/asistenku-horizontal.png\"`, `\"/asset/asistenku-horizontal.png\"`, or other inconsistent paths.",
      "reqIds": [
        "REQ-189"
      ],
      "version": 1
    },
    {
      "id": "feature-update-frontend-src-app-tsx-to-disable-the-legacy-public-routes-client-login-client-register-partner-login-partner-register-by-removing-or-commenting-out-their-switch-currentpath-cases-and-any-now-unused-imports-and-keep-public-access-only-via-the-existing-external-pages-by-adding-switch-cases-for-external-client-login-external-client-register-external-partner-login-external-partner-register-that-render-the-corresponding-existing-pages-under-frontend-src-pages-external-do-not-add-any-other-new-routes-do-not-change-internal-routes-and-do-not-change-the-overall-routing-structure-must-remain-the-current-switch-currentpath-pattern",
      "title": "Update `frontend/src/App.tsx` to disable the legacy public routes `/client/login`, `/client/register`, `/partner/login`, `/partner/register` by removing or commenting out their `switch (currentPath)` cases (and any now-unused imports), and keep public access only via the existing `/external/*` pages by adding `switch` cases for: `/external/client/login`, `/external/client/register`, `/external/partner/login`, `/external/partner/register` that render the corresponding existing pages under `frontend/src/pages/external/*`. Do not add any other new routes, do not change internal routes, and do not change the overall routing structure (must remain the current `switch (currentPath)` pattern).",
      "reqIds": [
        "REQ-191"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-landing-page-link-targets-to-point-to-the-external-routes-by-changing-only-the-route-strings-no-layout-text-styling-changes-specifically-in-the-file-s-currently-rendering-the-public-landing-ui-replace-client-login-external-client-login-client-register-external-client-register-partner-login-external-partner-login-partner-register-external-partner-register-do-not-create-any-new-files-if-frontend-src-components-asistenku-landingpage-tsx-and-or-frontend-src-components-asistenku-header-tsx-do-not-exist-in-the-repository-do-not-create-them-instead-apply-the-string-only-replacements-in-the-existing-landing-implementation-file-s-that-are-actually-used-e-g-frontend-src-pages-landing-tsx",
      "title": "Update the Landing page link targets to point to the `/external/*` routes by changing only the route strings (no layout/text/styling changes). Specifically, in the file(s) currently rendering the public Landing UI, replace: `/client/login` -> `/external/client/login`, `/client/register` -> `/external/client/register`, `/partner/login` -> `/external/partner/login`, `/partner/register` -> `/external/partner/register`. Do not create any new files. If `frontend/src/components/asistenku/LandingPage.tsx` and/or `frontend/src/components/asistenku/Header.tsx` do not exist in the repository, do not create them; instead apply the string-only replacements in the existing Landing implementation file(s) that are actually used (e.g., `frontend/src/pages/Landing.tsx`).",
      "reqIds": [
        "REQ-192"
      ],
      "version": 1
    },
    {
      "id": "feature-perform-a-compile-runtime-sanity-pass-focused-on-the-routing-cleanup-confirm-the-app-loads-without-a-blank-screen-renders-and-navigating-via-clicking-to-external-client-login-external-client-register-external-partner-login-external-partner-register-renders-the-correct-existing-pages-confirm-that-visiting-client-login-client-register-partner-login-partner-register-no-longer-renders-the-legacy-pages-should-fall-through-to-the-existing-notfound-view",
      "title": "Perform a compile/runtime sanity pass focused on the routing cleanup: confirm the app loads without a blank screen, `/` renders, and navigating (via clicking) to `/external/client/login`, `/external/client/register`, `/external/partner/login`, `/external/partner/register` renders the correct existing pages; confirm that visiting `/client/login`, `/client/register`, `/partner/login`, `/partner/register` no longer renders the legacy pages (should fall through to the existing NotFound view).",
      "reqIds": [
        "REQ-193"
      ],
      "version": 1
    },
    {
      "id": "feature-scope-lock-step-1-modify-only-these-four-frontend-files-and-nothing-else-frontend-src-pages-external-clientlogin-tsx-frontend-src-pages-external-partnerlogin-tsx-frontend-src-pages-external-clientregister-tsx-frontend-src-pages-external-partnerregister-tsx-do-not-modify-backend-code-do-not-modify-frontend-src-app-tsx-do-not-create-new-files-do-not-add-new-routes-do-not-introduce-auto-redirect-on-initial-page-load-navigation-redirects-must-happen-only-from-explicit-button-clicks",
      "title": "Scope lock (STEP 1): Modify ONLY these four frontend files and nothing else: `frontend/src/pages/external/ClientLogin.tsx`, `frontend/src/pages/external/PartnerLogin.tsx`, `frontend/src/pages/external/ClientRegister.tsx`, `frontend/src/pages/external/PartnerRegister.tsx`. Do not modify backend code, do not modify `frontend/src/App.tsx`, do not create new files, do not add new routes, do not introduce auto-redirect on initial page load (navigation/redirects must happen only from explicit button clicks).",
      "reqIds": [
        "REQ-194"
      ],
      "version": 1
    },
    {
      "id": "feature-global-legacy-route-string-cleanup-in-the-four-external-pages-remove-all-occurrences-of-these-legacy-paths-and-replace-them-with-the-required-external-paths-client-pages-replace-every-client-register-with-external-client-register-and-every-client-login-with-external-client-login-partner-pages-replace-every-partner-register-with-external-partner-register-and-every-partner-login-with-external-partner-login-this-includes-href-strings-and-any-window-location-href-targets-dashboard-routes-must-remain-unchanged-client-client-dashboard-partner-partner-dashboard",
      "title": "Global legacy-route string cleanup in the four external pages: remove all occurrences of these legacy paths and replace them with the required `/external/*` paths. Client pages: replace every `\"/client/register\"` with `\"/external/client/register\"` and every `\"/client/login\"` with `\"/external/client/login\"`. Partner pages: replace every `\"/partner/register\"` with `\"/external/partner/register\"` and every `\"/partner/login\"` with `\"/external/partner/login\"`. This includes `href` strings and any `window.location.href` targets. Dashboard routes must remain unchanged: Client -> `/client/dashboard`, Partner -> `/partner/dashboard`.",
      "reqIds": [
        "REQ-195"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-the-required-click-only-workspace-gating-flow-for-clientlogin-tsx-and-partnerlogin-tsx-on-the-masuk-ke-ruang-kerja-button-using-backend-calls-in-this-exact-order-and-using-real-time-status-from-actor-getmystatus-do-not-use-any-ui-cached-status-flow-1-on-click-call-actor-getcalleruser-exactly-once-if-it-returns-null-undefined-navigate-onclick-to-the-corresponding-external-register-route-external-client-register-or-external-partner-register-2-if-user-role-mismatches-the-page-role-show-the-exact-error-text-silahkan-klik-sesuai-dengan-akun-anda-and-show-a-back-button-that-navigates-onclick-to-the-corresponding-external-login-route-external-client-login-or-external-partner-login-3-if-role-matches-call-actor-getmystatus-exactly-once-if-status-is-not-active-show-a-status-appropriate-message-for-pending-suspended-blacklisted-and-show-a-back-button-to-the-corresponding-external-login-route-no-auto-redirect-4-only-when-status-is-active-navigate-onclick-to-the-correct-dashboard-route-client-dashboard-or-partner-dashboard",
      "title": "Implement the required click-only workspace gating flow for `ClientLogin.tsx` and `PartnerLogin.tsx` on the “Masuk ke ruang kerja” button, using backend calls in this exact order and using real-time status from `actor.getMyStatus()` (do not use any UI/cached status). Flow: (1) On click, call `actor.getCallerUser()` exactly once. If it returns null/undefined, navigate (onclick) to the corresponding external register route (`/external/client/register` or `/external/partner/register`). (2) If user role mismatches the page role, show the exact error text `Silahkan klik sesuai dengan akun anda` and show a “Back” button that navigates (onclick) to the corresponding external login route (`/external/client/login` or `/external/partner/login`). (3) If role matches, call `actor.getMyStatus()` exactly once. If status is not `\"active\"`, show a status-appropriate message for `pending` / `suspended` / `blacklisted` and show a “Back” button to the corresponding external login route (no auto redirect). (4) Only when status is `\"active\"`, navigate (onclick) to the correct dashboard route (`/client/dashboard` or `/partner/dashboard`).",
      "reqIds": [
        "REQ-196"
      ],
      "version": 1
    },
    {
      "id": "feature-update-clientregister-tsx-and-partnerregister-tsx-success-state-masuk-ke-ruang-kerja-button-to-run-the-exact-same-gating-logic-as-their-respective-login-pages-on-click-only-call-actor-getcalleruser-null-navigate-to-the-external-register-page-enforce-role-mismatch-error-silahkan-klik-sesuai-dengan-akun-anda-back-to-external-login-then-call-actor-getmystatus-to-gate-by-status-and-only-allow-navigation-to-the-dashboard-when-status-is-active-do-not-auto-navigate-immediately-after-successful-registration-navigation-remains-manual-via-the-button",
      "title": "Update `ClientRegister.tsx` and `PartnerRegister.tsx` success-state “Masuk ke ruang kerja” button to run the exact same gating logic as their respective login pages (on click only): call `actor.getCallerUser()` (null -> navigate to the external register page), enforce role mismatch error `Silahkan klik sesuai dengan akun anda` + Back to external login, then call `actor.getMyStatus()` to gate by status and only allow navigation to the dashboard when status is `\"active\"`. Do not auto-navigate immediately after successful registration; navigation remains manual via the button.",
      "reqIds": [
        "REQ-197"
      ],
      "version": 1
    },
    {
      "id": "feature-harden-all-four-external-pages-against-actor-readiness-and-double-submit-without-changing-overall-layout-1-keep-existing-pageshell-based-structure-and-visual-layout-largely-unchanged-only-add-minimal-ui-needed-for-gating-error-area-back-button-where-required-2-do-not-call-backend-on-mount-3-on-any-button-that-triggers-backend-calls-ii-login-register-submit-workspace-entry-implement-early-return-double-submit-guards-and-disable-the-button-while-its-corresponding-loading-flag-is-true-4-if-actor-is-null-undefined-or-still-initializing-do-not-attempt-backend-calls-show-a-non-crashing-inline-error-you-may-keep-the-existing-indonesian-readiness-error-string-already-used-in-these-files",
      "title": "Harden all four external pages against actor readiness and double-submit, without changing overall layout: (1) Keep existing PageShell-based structure and visual layout largely unchanged; only add minimal UI needed for gating (error area + Back button where required). (2) Do not call backend on mount. (3) On any button that triggers backend calls (II login, register submit, workspace entry), implement early-return double-submit guards and disable the button while its corresponding loading flag is true. (4) If `actor` is null/undefined (or still initializing), do not attempt backend calls; show a non-crashing inline error (you may keep the existing Indonesian readiness error string already used in these files).",
      "reqIds": [
        "REQ-198"
      ],
      "version": 1
    },
    {
      "id": "feature-compile-runtime-sanity-pass-step-1-ensure-the-app-compiles-without-typescript-errors-after-the-changes-and-that-the-4-external-pages-render-and-function-without-crashing-in-these-scenarios-logged-out-anonymous-identity-logged-in-with-ii-but-actor-still-initializing-backend-call-failures-throws-and-unexpected-return-shapes-from-getcalleruser-getmystatus-handle-defensively",
      "title": "Compile/runtime sanity pass (STEP 1): Ensure the app compiles without TypeScript errors after the changes and that the 4 `/external/*` pages render and function without crashing in these scenarios: logged out (anonymous identity), logged in with II but actor still initializing, backend call failures/throws, and unexpected return shapes from `getCallerUser()` / `getMyStatus()` (handle defensively).",
      "reqIds": [
        "REQ-199"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Implement static frontend UI pages and routing per spec (Landing, Client/Partner Login/Register, Internal Landing/Login/Register, role Dashboards, and 404) with no backend interaction.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Build backend/main.mo (single file) implementing superadmin claim (principal-only), user registrations/profiles for client/partner/internal, status update rules, partner level+rate rules, master data (pekerjaan) CRUD with validations, and kalkulator AM query per spec; do not modify any frontend files.",
      "reqIds": [],
      "status": "in_progress"
    },
    {
      "id": "AR-3",
      "summary": "Update only backend/main.mo to implement the complete backend specification provided by the user, including: locked constants, exact type definitions, stable storage (arrays only), required helper functions (time, ID generation, validations, parsing, lookups, auth gates), and all public methods with the exact names, signatures, and return values described.",
      "reqIds": [
        "REQ-20"
      ],
      "status": "pending"
    },
    {
      "id": "AR-4",
      "summary": "Revert all unintended frontend changes to restore zero diff in frontend; then implement a clean minimal backend in backend/main.mo only (no new files, no migrations, do not touch backend/authorization/*), enforcing 1 principalId=1 role, userId separate from principalId except superadmin, role-specific profile fields, first-claim superadmin, register per role + getCallerUser, and rename \"kerjaan\" -> \"pekerjaan\" throughout master data.",
      "reqIds": [],
      "status": "in_progress"
    },
    {
      "id": "AR-5",
      "summary": "Ensure this change set modifies ONLY backend/main.mo. All frontend files must have zero diff versus the pre-patch state, no new files may be created anywhere, backend/authorization/* must not be edited, and no migration file may be added or used.",
      "reqIds": [
        "REQ-21"
      ],
      "status": "pending"
    },
    {
      "id": "AR-6",
      "summary": "Rewrite backend/main.mo as a clean, minimal \"master backend\" implementing a final identity model where 1 principalId maps to exactly 1 role, with a separate userId stored for all roles except superadmin.",
      "reqIds": [
        "REQ-22"
      ],
      "status": "pending"
    },
    {
      "id": "AR-7",
      "summary": "Implement role-specific profile types/fields that match the existing frontend forms exactly: Client has name, email, whatsapp, company; Partner has name, email, whatsapp, keahlian, domisili; Internal has name, email, whatsapp, role (superadmin/admin/finance/concierge/asistenmu); Superadmin has only principalId (no whatsapp/company/keahlian/domusili/etc).",
      "reqIds": [
        "REQ-23"
      ],
      "status": "pending"
    },
    {
      "id": "AR-8",
      "summary": "Provide public registration functions per role—registerClient, registerPartner, and registerInternal—that register the caller principal exactly once into the corresponding role and store the appropriate profile fields.",
      "reqIds": [
        "REQ-24"
      ],
      "status": "pending"
    },
    {
      "id": "AR-9",
      "summary": "Provide a public getCallerUser function that returns the caller's current role and stored user information so the frontend (later) can check the caller's role; if the caller is not registered, it must return an explicit empty/none response (not a misleading default).",
      "reqIds": [
        "REQ-25"
      ],
      "status": "pending"
    },
    {
      "id": "AR-10",
      "summary": "Implement superadmin claiming as a dedicated public function (e.g., claimSuperadmin) that can be executed only once globally (first claim wins) and requires no additional fields; subsequent calls must be rejected.",
      "reqIds": [
        "REQ-26"
      ],
      "status": "pending"
    },
    {
      "id": "AR-11",
      "summary": "Rename all occurrences of the master-data term \"kerjaan\" to \"pekerjaan\" inside backend/main.mo (types, fields, and function names). If master-data logic is not present in this clean backend, ensure there are no 'kerjaan' identifiers remaining in backend/main.mo.",
      "reqIds": [
        "REQ-27"
      ],
      "status": "pending"
    },
    {
      "id": "AR-12",
      "summary": "Keep the backend minimal and clean: remove prior authorization-gate logic tied to backend/authorization/* from backend/main.mo (do not edit backend/authorization/*), and avoid adding any non-requested domains such as services/tasks.",
      "reqIds": [
        "REQ-28"
      ],
      "status": "pending"
    },
    {
      "id": "AR-13",
      "summary": "Patch backend/main.mo ONLY to remove all Migration usage (delete `import Migration \"migration\";` and remove `(with migration = Migration.run)`), making the canister a plain `actor { ... }` without other changes.",
      "reqIds": [],
      "status": "in_progress"
    },
    {
      "id": "AR-14",
      "summary": "Update ONLY `backend/main.mo` to remove all Migration usage by deleting `import Migration \"migration\";` and removing any actor migration clause `(with migration = Migration.run)`, resulting in a plain `actor { ... }` declaration, without changing anything else in the file.",
      "reqIds": [
        "REQ-29"
      ],
      "status": "pending"
    },
    {
      "id": "AR-15",
      "summary": "Patch backend/main.mo only: add nextUserId counter + genUserId() helper, and update registerClient/registerPartner/registerInternal to ignore any incoming userId and always store userId = genUserId(), without changing other logic (keep 1 principalId = 1 role).",
      "reqIds": [],
      "status": "in_progress"
    },
    {
      "id": "AR-16",
      "summary": "Modify ONLY backend/main.mo to add an in-canister incremental user ID counter and generator: add `var nextUserId : Nat = 1;` and add `func genUserId() : Text { let id = nextUserId; nextUserId += 1; return \"U\" # Nat.toText(id); }`. Ensure required imports exist (e.g., Nat) so the file compiles.",
      "reqIds": [
        "REQ-30"
      ],
      "status": "pending"
    },
    {
      "id": "AR-17",
      "summary": "In backend/main.mo, update registerClient, registerPartner, and registerInternal so that they ignore any incoming `userId` value (if present in the incoming argument type) and always store `userId = genUserId()` in the stored profile record.",
      "reqIds": [
        "REQ-31"
      ],
      "status": "pending"
    },
    {
      "id": "AR-18",
      "summary": "Do not change any other logic in backend/main.mo beyond the additions/changes required to support the generated userId assignment, and keep the existing rule that one principalId maps to exactly one role unchanged.",
      "reqIds": [
        "REQ-32"
      ],
      "status": "pending"
    },
    {
      "id": "AR-19",
      "summary": "Disable saveCallerUserProfile in backend/main.mo: keep the same signature but make it always Runtime.trap(...) so it can never overwrite userRoles/profile.",
      "reqIds": [],
      "status": "in_progress"
    },
    {
      "id": "AR-20",
      "summary": "Adjust role typing so superadmin is not part of InternalRole (InternalRole only admin/finance/concierge/asistenmu) while UserRole still includes #superadmin; keep InternalProfile fields unchanged.",
      "reqIds": [],
      "status": "in_progress"
    },
    {
      "id": "AR-21",
      "summary": "Implement userId system in backend/main.mo using nextUserId counter + userIdByPrincipal map + genUserId/ensureUserId helpers, with userId NOT stored in Client/Partner/Internal profile records; call ensureUserId(caller) in all register* and claimSuperadmin flows.",
      "reqIds": [],
      "status": "in_progress"
    },
    {
      "id": "AR-22",
      "summary": "Add public query getMyUserId() in backend/main.mo returning ?Text from userIdByPrincipal for the caller (null if none).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-23",
      "summary": "Modify ONLY `backend/main.mo` to disable `saveCallerUserProfile(profile : UserRole)` while preserving its exact public signature, by making the function always call `Runtime.trap(\"Disabled: profile saving must use register* or admin-approved flows only.\");` and removing any `userRoles.add(...)`/write behavior from this function.",
      "reqIds": [
        "REQ-33"
      ],
      "status": "pending"
    },
    {
      "id": "AR-24",
      "summary": "Update role typing in `backend/main.mo` so that `InternalRole` contains ONLY `#admin`, `#finance`, `#concierge`, and `#asistenmu`, and does NOT include `#superadmin`. Keep `UserRole`'s `#superadmin` variant unchanged. Keep `InternalProfile` unchanged (fields: name, email, whatsapp, role: InternalRole) with no new fields added.",
      "reqIds": [
        "REQ-34"
      ],
      "status": "pending"
    },
    {
      "id": "AR-25",
      "summary": "Add an automatic, consistent `userId` system in `backend/main.mo` without adding `userId` fields to any profile record types. Implement storage and helpers exactly as specified: (1) `var nextUserId : Nat = 1;` (2) `let userIdByPrincipal = Map.empty<Principal, Text>();` located near `let userRoles = ...` (3) `func genUserId() : Text` that returns `\"U\" + Nat` (e.g., `U1`, `U2`, ...) and increments `nextUserId` (4) `func ensureUserId(p : Principal) : Text` that returns an existing ID if present in the map, otherwise generates, stores, and returns a new ID.",
      "reqIds": [
        "REQ-35"
      ],
      "status": "pending"
    },
    {
      "id": "AR-26",
      "summary": "Ensure `ignore ensureUserId(caller);` is executed immediately before any `userRoles.add(caller, entry);` in ALL existing registration functions (`registerClient`, `registerPartner`, `registerInternal`) and also in `claimSuperadmin()` before setting `superadminClaimed := true;`. Do not change the existing rule that one principal can only register exactly one role, and keep the rest of the core logic unchanged.",
      "reqIds": [
        "REQ-36"
      ],
      "status": "pending"
    },
    {
      "id": "AR-27",
      "summary": "Add a new query method in the “User Queries” section of `backend/main.mo`: `public query ({ caller }) func getMyUserId() : async ?Text { userIdByPrincipal.get(caller); }` returning `null` if the caller has no userId and `?Text` if present (including superadmin).",
      "reqIds": [
        "REQ-37"
      ],
      "status": "pending"
    },
    {
      "id": "AR-28",
      "summary": "APPEND-ONLY patch to backend/main.mo: without modifying any existing line, append the provided “MASTER DATA (EMPTY DEFAULT) — SUPERADMIN ONLY” section immediately before the actor’s final closing brace `}`; do not touch migration.mo or add Migration imports/actor migration clauses; master-data CRUD/query functions must be superadmin-principal-only and must not create/store any superadmin profile fields.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-29",
      "summary": "Update ONLY `backend/main.mo` using an APPEND-ONLY patch: preserve 100% of the existing file content byte-for-byte (no edits, deletions, reordering, formatting changes, or refactors), and append the user-provided “MASTER DATA (EMPTY DEFAULT) — SUPERADMIN ONLY” section EXACTLY at the very bottom of the actor, immediately before the final closing brace `}`.",
      "reqIds": [
        "REQ-38"
      ],
      "status": "pending"
    },
    {
      "id": "AR-30",
      "summary": "Ensure the appended Master Data APIs are superadmin-principal-only and do not create or store any superadmin profile data (no email/WhatsApp/profile auto-creation), exactly as expressed in the appended code (e.g., `requireSuperadmin` gate and role check against `userRoles`).",
      "reqIds": [
        "REQ-39"
      ],
      "status": "pending"
    },
    {
      "id": "AR-31",
      "summary": "Append-only Master Data Asistenku block to backend/main.mo (below existing SYSTEM MASTER DATA section): add Indonesian types (TipePartner, SkillVerified, KamusPekerjaan, AturanBebanPerusahaan, KonstantaUnitClient), new Map-based storage + ID generators (SKL-/KMS-/ATB- with pad4), superadmin-only CRUD/list endpoints for skills/kamus/aturan, konstanta unit get/set, partner verified skills mapping management, and kalkulatorAM per specified rules; all methods must call existing requireSuperadmin(caller).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-32",
      "summary": "Append (append-only) a new “Master Data Asistenku” implementation block to the VERY END of backend/main.mo, placed below the existing “SYSTEM MASTER DATA (EMPTY DEFAULT) - SUPERADMIN ONLY” section and immediately before the actor’s final closing brace `}`. Do not modify, delete, reorder, or reformat any existing line in backend/main.mo.",
      "reqIds": [
        "REQ-40"
      ],
      "status": "pending"
    },
    {
      "id": "AR-33",
      "summary": "In the appended block, define the requested Indonesian-named types exactly: `TipePartner = { #junior; #senior; #expert }`; `SkillVerified = { kode: Text; nama: Text; kategori: Text; aktif: Bool; createdAt: Int }`; `KamusPekerjaan = { kategoriPekerjaan: Text; jenisPekerjaan: Text; jamStandar: Nat; tipePartnerBoleh: [TipePartner]; aktif: Bool; createdAt: Int }`; `AturanBebanPerusahaan = { tipePartner: TipePartner; jamMin: Nat; jamMax: Nat; polaBeban: { #TAMBAH_JAM_TETAP; #TAMBAH_PER_JAM }; nilai: Nat; aktif: Bool; createdAt: Int }`; `KonstantaUnitClient = { unitKeJamPerusahaan: Nat; updatedAt: Int }`.",
      "reqIds": [
        "REQ-41"
      ],
      "status": "pending"
    },
    {
      "id": "AR-34",
      "summary": "In the appended block, add the requested in-canister storage using the already-available `Map` (from `mo:core/Map` as confirmed by the user): `var nextSkillId : Nat = 1; var nextKamusId : Nat = 1; var nextAturanId : Nat = 1; let skillsByKode = Map.empty<Text, SkillVerified>(); let kamusByKode = Map.empty<Text, KamusPekerjaan>(); let aturanByKode = Map.empty<Text, AturanBebanPerusahaan>(); var konstantaUnit : KonstantaUnitClient = { unitKeJamPerusahaan = 2; updatedAt = 0 }; let partnerSkillsByPrincipal = Map.empty<Principal, [Text]>();`",
      "reqIds": [
        "REQ-42"
      ],
      "status": "pending"
    },
    {
      "id": "AR-35",
      "summary": "In the appended block, implement helper functions exactly named: `pad4(n: Nat) : Text`, `genKode(prefix: Text, id: Nat) : Text` (producing codes like `SKL-0001`), and `now() : Int` (use `Time.now()` if available in the file’s imports; otherwise use a compile-safe fallback).",
      "reqIds": [
        "REQ-43"
      ],
      "status": "pending"
    },
    {
      "id": "AR-36",
      "summary": "Append superadmin-only public methods for “Skill Verified” with exact names/signatures/behaviors, each calling `requireSuperadmin(caller : Principal)` at the start: `upsertSkillVerified(kodeOpt:?Text, nama:Text, kategori:Text, aktif:Bool) : async Text` (create when null by generating `SKL-` code from `nextSkillId`, incrementing the counter; update only if code exists; return `kode`), `getSkillVerified(kode:Text) : async ?SkillVerified`, `listSkillVerified() : async [SkillVerified]`.",
      "reqIds": [
        "REQ-44"
      ],
      "status": "pending"
    },
    {
      "id": "AR-37",
      "summary": "Append superadmin-only public methods for “Kamus Pekerjaan” with exact names/signatures/behaviors, each calling `requireSuperadmin(caller)` at the start: `upsertKamusPekerjaan(kodeOpt:?Text, kategoriPekerjaan:Text, jenisPekerjaan:Text, jamStandar:Nat, tipePartnerBoleh:[TipePartner], aktif:Bool) : async Text` (create `KMS-` + 4 digits from `nextKamusId`; update only if code exists; return code), `getKamusPekerjaan(kode:Text) : async ?KamusPekerjaan`, `listKamusPekerjaan() : async [KamusPekerjaan]`.",
      "reqIds": [
        "REQ-45"
      ],
      "status": "pending"
    },
    {
      "id": "AR-38",
      "summary": "Append superadmin-only public methods for “Aturan Beban Perusahaan” with exact names/signatures/behaviors, each calling `requireSuperadmin(caller)` at the start: `upsertAturanBeban(kodeOpt:?Text, tipePartner:TipePartner, jamMin:Nat, jamMax:Nat, polaBeban:{#TAMBAH_JAM_TETAP;#TAMBAH_PER_JAM}, nilai:Nat, aktif:Bool) : async Text` (create `ATB-` code from `nextAturanId`; update only if code exists; return code), `getAturanBeban(kode:Text) : async ?AturanBebanPerusahaan`, `listAturanBeban() : async [AturanBebanPerusahaan]`.",
      "reqIds": [
        "REQ-46"
      ],
      "status": "pending"
    },
    {
      "id": "AR-39",
      "summary": "Append superadmin-only public methods for “Konstanta Unit Client”, each calling `requireSuperadmin(caller)` at the start: `setKonstantaUnitClient(unitKeJamPerusahaan:Nat) : async ()` (update `konstantaUnit.unitKeJamPerusahaan` and set `updatedAt = now()`), and `getKonstantaUnitClient() : async KonstantaUnitClient` (return current value).",
      "reqIds": [
        "REQ-47"
      ],
      "status": "pending"
    },
    {
      "id": "AR-40",
      "summary": "Append superadmin-only public methods to manage verified skills per Partner principal, each calling `requireSuperadmin(caller)` at the start: `setPartnerVerifiedSkills(partner:Principal, skillCodes:[Text]) : async ()` (validate each code exists in `skillsByKode` and has `aktif = true`, otherwise trap; then overwrite full list in `partnerSkillsByPrincipal`), `getPartnerVerifiedSkills(partner:Principal) : async [Text]` (return list or empty array if none), and `listPartnerVerifiedSkills() : async [(Principal, [Text])]` (return full map entries).",
      "reqIds": [
        "REQ-48"
      ],
      "status": "pending"
    },
    {
      "id": "AR-41",
      "summary": "Append an optional superadmin-only helper method `kalkulatorAM(kodeKamus:Text, tipePartner:TipePartner, beban:Nat) : async { jamKePartner: Nat; jamPerusahaan: Nat; unitClient: Nat }`, gated by `requireSuperadmin(caller)`, implementing the specified calculation rules: look up `KamusPekerjaan` by `kodeKamus` and use `jamStandar`; find exactly one active `AturanBebanPerusahaan` matching `tipePartner` where `jamStandar` is within `[jamMin..jamMax]` inclusive (trap if none); compute `J = jamStandar * beban`; compute `bebanInternal` as `nilai` if `#TAMBAH_JAM_TETAP` else `nilai * jamStandar` if `#TAMBAH_PER_JAM`; set `jamKePartner = J`, `jamPerusahaan = J + bebanInternal`; set `unitClient = jamPerusahaan / konstantaUnit.unitKeJamPerusahaan` using integer division.",
      "reqIds": [
        "REQ-49"
      ],
      "status": "pending"
    },
    {
      "id": "AR-42",
      "summary": "Ensure every new method introduced by the appended Master Data Asistenku block calls the existing `requireSuperadmin(caller : Principal)` function (already present in backend/main.mo) and does not expose any Master Data information to non-superadmin callers.",
      "reqIds": [
        "REQ-50"
      ],
      "status": "pending"
    },
    {
      "id": "AR-43",
      "summary": "Do not create or edit backend/migration.mo and do not add any migration-related imports or actor migration clauses as part of this change.",
      "reqIds": [
        "REQ-51"
      ],
      "status": "pending"
    },
    {
      "id": "AR-44",
      "summary": "Append-only (bottom-of-file) backend/main.mo patch adding: (1) UserStatus tracking with default pending fallback, admin/superadmin-gated set/get/list (including listUsersByStatus), forbidding changes to superadmin status; (2) Partner level (TipePartner) + fixed hourly rates with admin/superadmin setters and partner self-queries; (3) admin/superadmin-only userId lookup/listUsersBasic using existing role storage + existing userId map (no new id creation except optional ensureUserId if already present).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-45",
      "summary": "Update ONLY `backend/main.mo` via an append-only patch: append all new Motoko code at the very bottom of the actor, immediately before the final closing brace `}`. Do not change, delete, reorder, or refactor any existing line in `backend/main.mo`, and do not modify any other file.",
      "reqIds": [
        "REQ-52"
      ],
      "status": "pending"
    },
    {
      "id": "AR-46",
      "summary": "In the appended section, add User Status foundations using new storage maps only (no profile changes, no role system changes): define `public type UserStatus = { #pending; #active; #suspended; #blacklisted }`, define fixed-rate constants `public let RATE_JUNIOR : Nat = 35000`, `RATE_SENIOR : Nat = 55000`, `RATE_EXPERT : Nat = 75000`, and add `userStatusByPrincipal : Map<Principal, UserStatus>` plus helper functions `defaultUserStatus`, `getUserStatusInternal`, `isPartnerRole` (must use the existing `userRoles` storage), and `requireAdminOrSuperadmin` (must authorize only existing superadmin/admin per current role storage). Implement public methods exactly as specified: `setUserStatus`, `getMyUserStatus`, `getUserStatus`, and `listUsersByStatus` with the required gates and trap messages.",
      "reqIds": [
        "REQ-53"
      ],
      "status": "pending"
    },
    {
      "id": "AR-47",
      "summary": "In the appended section, add Partner Level + Hourly Rate foundations using the existing `TipePartner` type already defined in `backend/main.mo` (do not redefine it). Add new storage `partnerLevelByPrincipal : Map<Principal, TipePartner>`. Implement public methods exactly as specified: `setPartnerLevel`, `getMyPartnerLevel`, `getPartnerLevel`, `getHourlyRateByLevel`, and `getMyHourlyRate`, including required gates, partner-role validation via existing role storage, and default `#junior` when level is unset.",
      "reqIds": [
        "REQ-54"
      ],
      "status": "pending"
    },
    {
      "id": "AR-48",
      "summary": "In the appended section, implement admin/superadmin-only UserId lookup utilities using the existing `userIdByPrincipal` map and existing role storage (`userRoles`) without creating any new userId system: implement `getUserIdByPrincipal(target)` returning existing userId or null (must not call `ensureUserId`), and `listUsersBasic(roleFilter)` returning `[(Principal, Text, Text, UserStatus)]` for users with a resolvable roleText and existing userId, with status from `getUserStatusInternal` and optional role filter applied via Text comparison.",
      "reqIds": [
        "REQ-55"
      ],
      "status": "pending"
    },
    {
      "id": "AR-49",
      "summary": "Append-only backend/main.mo: add minimal LayananAsistenku module (no migration changes, no refactors, no 'service' word) including LayananType & LayananAsistenku types, Map-based storage/index, stable counter + nextLayananId (LAY-000001) with pad6/now reuse-if-exists, requireSuperadminOrAdmin gate reuse, and methods createLayananForClient, setLayananActive, listMyLayanan (client-only via existing role map). Stop with exact output 'STOP — name conflict' if any required name already exists.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-50",
      "summary": "Update ONLY `backend/main.mo` by appending a minimal, production-safe LayananAsistenku implementation immediately before the actor’s final closing brace `}` (append-only; do not modify/reorder/delete any existing lines). The appended code must define the new types `LayananType` and `LayananAsistenku` exactly as specified, add Map-based storage (`layananById`, `layananIdsByClient`), add a stable counter `layananCounter` and an ID generator `nextLayananId()` producing IDs in the format `LAY-000001`, and add the public methods `createLayananForClient`, `setLayananActive`, and `listMyLayanan` with the exact authorization and behaviors specified. The word \"service\" must not appear anywhere in the new code; use only \"LayananAsistenku\" naming.",
      "reqIds": [
        "REQ-56"
      ],
      "status": "pending"
    },
    {
      "id": "AR-51",
      "summary": "Append-only backend/main.mo: add \"LAYANAN ASISTENKU V2\" block defining LayananMeta type, new Map storages (layananMetaById, layananIdsByOwnerClient), helper reuse/conditional defs (now(), requireAdminOrSuperadminImpl), and V2 methods createLayananForClientV2/setLayananActiveV2/listMyLayananV2/getLayananMeta/getMyLayananMeta; must not touch existing LayananAsistenku v1 types/functions/storage and must not reference migration.mo.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-52",
      "summary": "Append a new append-only section at the very bottom of backend/main.mo (immediately before the actor’s final closing brace) with the exact header comment `// --- LAYANAN ASISTENKU V2 (APPEND ONLY, NO MIGRATION) ---`, then add the new public type `LayananMeta` exactly as specified (without modifying the existing `LayananAsistenku` type).",
      "reqIds": [
        "REQ-57"
      ],
      "status": "pending"
    },
    {
      "id": "AR-53",
      "summary": "In the same appended V2 block in backend/main.mo, add new in-canister storage maps exactly named and typed: `let layananMetaById = Map.empty<Text, LayananMeta>();` and `let layananIdsByOwnerClient = Map.empty<Principal, [Text]>();`.",
      "reqIds": [
        "REQ-58"
      ],
      "status": "pending"
    },
    {
      "id": "AR-54",
      "summary": "In the appended V2 block, reuse existing helper functions if already present; only define them if not already present: (1) `func now() : Int` using `Time.now()`; (2) `func requireAdminOrSuperadminImpl(caller : Principal)` that enforces the same authorization logic as the existing admin/superadmin gate in backend/main.mo (e.g., by calling existing `isAdmin`/`isSuperadmin` if those exist, or by reusing the existing `requireAdminOrSuperadminImpl` if already defined).",
      "reqIds": [
        "REQ-59"
      ],
      "status": "pending"
    },
    {
      "id": "AR-55",
      "summary": "Append the following new public methods in the appended V2 block, with the exact names, signatures, and return values specified, and with the specified behavior:\n\n1) `public shared({caller}) func createLayananForClientV2(ownerClient : Principal, layananId : Text, unitTotal : Nat) : async Text`\n- Gate with `requireAdminOrSuperadminImpl(caller)`\n- Validate `layananId` exists in the existing `layananById`; if missing return exactly `\"LAYANAN_NOT_FOUND\"`\n- Create/update meta (overwrite allowed) in `layananMetaById` with: `unitUsed = 0`, `unitOnHold = 0`, `isActive = true`, `createdAt = now()`, `updatedAt = now()` and the provided `ownerClient`, `unitTotal`, `layananId`\n- Ensure `layananId` is present in `layananIdsByOwnerClient[ownerClient]`; append only if not already present\n- Return exactly `\"OK\"`\n\n2) `public shared({caller}) func setLayananActiveV2(layananId : Text, isActive : Bool) : async Text`\n- Gate with `requireAdminOrSuperadminImpl(caller)`\n- If `layananMetaById` has no entry for `layananId`, return exactly `\"NOT_FOUND\"`\n- Otherwise update only `isActive` and `updatedAt` (keep other fields unchanged) and return exactly `\"OK\"`\n\n3) `public query({caller}) func listMyLayananV2() : async [Text]`\n- Caller must be authenticated using the same check style used by the existing `listMyLayanan`\n- Return `layananIdsByOwnerClient[caller]` or `[]` if missing\n\n4) `public query({caller}) func getLayananMeta(layananId : Text) : async ?LayananMeta`\n- Gate with `requireAdminOrSuperadminImpl(caller)`\n- Return `layananMetaById.get(layananId)`\n\n5) `public query({caller}) func getMyLayananMeta(layananId : Text) : async ?LayananMeta`\n- Caller must be authenticated\n- Return the meta only if it exists and `meta.ownerClient == caller`, otherwise return `null`.",
      "reqIds": [
        "REQ-60"
      ],
      "status": "pending"
    },
    {
      "id": "AR-56",
      "summary": "Append-only backend/main.mo: add “TASK FLOW V1 (APPEND ONLY, NO MIGRATION)” implementing TaskPhase/Task, task storage/indexes and TSK- ID generation, role-based gates (client/partner/asistenmu/admin/superadmin) reusing existing patterns, read-only checks against existing LayananMeta V2 for active/ownership + unit availability/holds, task lifecycle methods (create/cancel/delegate/accept/reject/moveToQa/moveToReviewClient/requestRevisiInternal/requestRevisiClient/backToProgressFromRevisi/clientMarkSelesai), and queries (listMyTasks/getTask). Must not reference migration.mo, must not use the word \"service\", must not modify existing LayananAsistenku or LayananMeta V2 types/maps/methods, and must output exactly \"STOP — name conflict\" if any required new type/func name already exists.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-57",
      "summary": "Update ONLY `backend/main.mo` by appending a new section exactly titled `// --- TASK FLOW V1 (APPEND ONLY, NO MIGRATION) ---` at the very bottom of the actor (immediately before the actor’s final closing brace `}`), without modifying, deleting, reordering, or reformatting any existing line of code.",
      "reqIds": [
        "REQ-61"
      ],
      "status": "pending"
    },
    {
      "id": "AR-58",
      "summary": "Do not create, modify, import, or reference `backend/migration.mo` or any migration-related code (no OldActor/NewActor/run/transform/upgrade patterns) anywhere in the change.",
      "reqIds": [
        "REQ-62"
      ],
      "status": "pending"
    },
    {
      "id": "AR-59",
      "summary": "Before adding any new identifiers from the TASK FLOW V1 spec, verify that none of the required new type names or function names already exist in `backend/main.mo`. If ANY name conflict exists for the required new names, stop and output exactly `STOP — name conflict`.",
      "reqIds": [
        "REQ-63"
      ],
      "status": "pending"
    },
    {
      "id": "AR-60",
      "summary": "In the appended TASK FLOW V1 block, do not use the word \"service\" anywhere (including comments, identifiers, or strings). Use existing domain naming such as `LayananAsistenku` and `LayananMeta` only.",
      "reqIds": [
        "REQ-64"
      ],
      "status": "pending"
    },
    {
      "id": "AR-61",
      "summary": "Implement TASK FLOW V1 types in the appended block (ONLY if the type names do not already exist): `public type TaskPhase = { #permintaan_baru; #ditolak_partner; #on_progress; #qa_asistenku; #review_client; #revisi; #selesai; #dibatalkan_client; };` and `public type Task = { taskId: Text; ownerClient: Principal; layananId: Text; title: Text; detail: Text; requestType: Text; phase: TaskPhase; assignedPartner: ?Principal; jamEfektif: ?Nat; unitTerpakai: ?Nat; breakdownAM: ?Text; lastRejectReason: ?Text; createdAt: Int; updatedAt: Int; };`.",
      "reqIds": [
        "REQ-65"
      ],
      "status": "pending"
    },
    {
      "id": "AR-62",
      "summary": "Add TASK FLOW V1 storage and indexes in the appended block: `stable var taskCounter : Nat = 0;`, `let taskById = Map.empty<Text, Task>();`, `let taskIdsByClient = Map.empty<Principal, [Text]>();`, and `let taskIdsByPartner = Map.empty<Principal, [Text]>();`.",
      "reqIds": [
        "REQ-66"
      ],
      "status": "pending"
    },
    {
      "id": "AR-63",
      "summary": "In the appended TASK FLOW V1 block, implement the required helper functions ONLY if missing; otherwise, reuse existing ones: `now() : Int`, `pad6(n: Nat) : Text`, `nextTaskId() : Text` (format `TSK-` + 6 digits; increments `taskCounter`), role/registration guards (`requireRegistered`, `requireClientRole`, `requireAsistenmuRole`, `requirePartnerRole`, `requireAdminOrSuperadmin`), and index helpers (`appendUniquePrincipalIndex(map: Map<Principal,[Text]>, key: Principal, id: Text) : ()`, and `appendUniqueTextIndex(map: Map<Text,[Text]>, key: Text, id: Text) : ()` only if needed).",
      "reqIds": [
        "REQ-67"
      ],
      "status": "pending"
    },
    {
      "id": "AR-64",
      "summary": "Implement LayananMeta V2 read-only checks in the appended TASK FLOW V1 block WITHOUT modifying any existing `LayananAsistenku` or `LayananMeta V2` types/maps/methods. Add helper `requireLayananActiveForClient(owner: Principal, layananId: Text) : async Bool` that reads `layananMetaById.get(layananId)` and returns true only when meta exists, `meta.ownerClient == owner`, and `meta.isActive == true`. Add helper `availableUnit(meta: LayananMeta) : Nat` computing `meta.unitTotal - meta.unitUsed - meta.unitOnHold`, treating underflow as 0.",
      "reqIds": [
        "REQ-68"
      ],
      "status": "pending"
    },
    {
      "id": "AR-65",
      "summary": "Implement the TASK FLOW V1 lifecycle methods in the appended block with the exact public names, parameters, and return strings described: `createTask`, `cancelTask`, `delegateTask`, `partnerAccept`, `partnerReject`, `moveToQa`, `moveToReviewClient`, `requestRevisiInternal`, `requestRevisiClient`, `backToProgressFromRevisi`, and `clientMarkSelesai`. All authorization, phase locks, ownership checks, unit hold/release/finalization behaviors, and return codes must match the user-provided spec exactly.",
      "reqIds": [
        "REQ-69"
      ],
      "status": "pending"
    },
    {
      "id": "AR-66",
      "summary": "In `requestRevisiInternal` and `requestRevisiClient`, if functions named `setRevisiInternal` and/or `setRevisiClient` already exist in `backend/main.mo`, invoke them as specified; do not create migration code or alter existing revision functions. If the revision functions do not exist, do not add placeholder implementations; proceed without calling them.",
      "reqIds": [
        "REQ-70"
      ],
      "status": "pending"
    },
    {
      "id": "AR-67",
      "summary": "Implement TASK FLOW V1 query methods in the appended block: `public query ({ caller }) func listMyTasks() : async [Task]` and `public query func getTask(taskId: Text) : async ?Task` with the exact role-based listing rules provided (client: their tasks; partner: assigned tasks; asistenmu: all tasks preferred; others: empty).",
      "reqIds": [
        "REQ-71"
      ],
      "status": "pending"
    },
    {
      "id": "AR-68",
      "summary": "Ensure the code compiles after appending TASK FLOW V1, and ensure no existing `LayananAsistenku` or `LayananMeta V2` types/maps/methods are modified (read-only usage only).",
      "reqIds": [
        "REQ-72"
      ],
      "status": "pending"
    },
    {
      "id": "AR-69",
      "summary": "Append-only backend/main.mo: add “LAYANAN PAKET + SHARING RULE” block with PaketLayanan and LayananPaketMeta, new Map storages (layananPaketById, layananIdsByPrincipal), share limit rules (2/2/3/4), helper funcs (nowIntV3/ shareLimitV3/ arrayContainsPrincipalV3/ upsertIndexV3/ canAccessLayananV3), admin-or-superadmin gating (reuse requireAdminOrSuperadminImpl if present else add requireAdminOrSuperadminV3), and public methods createLayananPaketForClientV3/setLayananPaketActiveV3/shareLayananPaketV3 plus authenticated queries listMyLayananPaketIdsV3/getLayananPaketMetaV3; base layananId must already exist in existing layanan stores.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-70",
      "summary": "Append a new “LAYANAN PAKET + SHARING RULE” block at the very bottom of backend/main.mo (append-only) that introduces the new paket enum type and paket-meta record type using the exact identifiers and variants: `public type PaketLayanan = { #tenang; #rapi; #fokus; #jaga };` and `public type LayananPaketMeta = { layananId : Text; ownerClient : Principal; paket : PaketLayanan; harga : Nat; isActive : Bool; sharedWith : [Principal]; createdAt : Int; updatedAt : Int; };` with `sharedWith` required to include `ownerClient`.",
      "reqIds": [
        "REQ-73"
      ],
      "status": "pending"
    },
    {
      "id": "AR-71",
      "summary": "Append new in-canister storage maps (new names only) for layanan paket meta and access indexing exactly as specified: `let layananPaketById = Map.empty<Text, LayananPaketMeta>()` and `let layananIdsByPrincipal = Map.empty<Principal, [Text]>()` (index includes owner + shared principals).",
      "reqIds": [
        "REQ-74"
      ],
      "status": "pending"
    },
    {
      "id": "AR-72",
      "summary": "Append helper functions (new names only) implementing sharing limit and access utilities: `shareLimitV3(p : PaketLayanan) : Nat` returning 2 for #tenang/#rapi, 3 for #fokus, 4 for #jaga; `arrayContainsPrincipalV3(arr:[Principal], p:Principal) : Bool`; `upsertIndexV3(principal:Principal, layananId:Text) : ()` adding the layananId to `layananIdsByPrincipal[principal]` if missing; and `canAccessLayananV3(principal:Principal, meta:LayananPaketMeta) : Bool` returning true when `principal` is in `meta.sharedWith`. Also add `nowIntV3() : Int` only if an existing `now()` helper is not already available; otherwise call the existing `now()` and return its value.",
      "reqIds": [
        "REQ-75"
      ],
      "status": "pending"
    },
    {
      "id": "AR-73",
      "summary": "Enforce that only admin or superadmin can create, share, or toggle layanan paket. Reuse an existing permission helper if present: call `requireAdminOrSuperadminImpl(caller)` if it exists; otherwise, append a new helper `requireAdminOrSuperadminV3(caller:Principal)` that reuses the existing role-check patterns in backend/main.mo without modifying those existing functions.",
      "reqIds": [
        "REQ-76"
      ],
      "status": "pending"
    },
    {
      "id": "AR-74",
      "summary": "Append new public methods (new names only) implementing layanan paket lifecycle and sharing, with the exact signatures and return strings: (1) `public shared ({ caller }) func createLayananPaketForClientV3(ownerClient : Principal, paket : PaketLayanan, harga : Nat, layananId : Text) : async Text` gated by admin/superadmin; validate `layananId` already exists in an existing base layanan store (e.g., existing `layananById` or existing layanan meta store) and do not create a base layanan; if base layanan does not exist, return a non-OK string per the user’s rules (do not create data). On success, create `LayananPaketMeta` with `sharedWith=[ownerClient]`, `isActive=true`, timestamps from now, save it in `layananPaketById`, upsert index for `ownerClient`, return exactly `\"OK\"`. (2) `public shared ({ caller }) func setLayananPaketActiveV3(layananId:Text, isActive:Bool) : async Text` gated by admin/superadmin; if missing meta return `\"NOT_FOUND\"`, else update `isActive` + `updatedAt`, return `\"OK\"`. (3) `public shared ({ caller }) func shareLayananPaketV3(layananId:Text, target:Principal) : async Text` gated by admin/superadmin; if missing meta return `\"NOT_FOUND\"`; if duplicate share do not add; enforce share limit based on paket where limit counts total principals in `sharedWith` (including owner); if limit reached return `\"SHARE_LIMIT_REACHED\"`; otherwise add target, update `updatedAt`, save back, upsert index for target, return `\"OK\"`.",
      "reqIds": [
        "REQ-77"
      ],
      "status": "pending"
    },
    {
      "id": "AR-75",
      "summary": "Append authenticated query methods for access listing and meta retrieval: (1) `public query ({ caller }) func listMyLayananPaketIdsV3() : async [Text]` must require the caller to be authenticated using the existing authentication check pattern already used in backend/main.mo; return `layananIdsByPrincipal.get(caller)` or `[]` if none. (2) `public query ({ caller }) func getLayananPaketMetaV3(layananId:Text) : async ?LayananPaketMeta` must require authentication using the existing pattern; return null if not found; if caller is admin/superadmin return meta; otherwise return meta only when caller is in `meta.sharedWith`, else return null.",
      "reqIds": [
        "REQ-78"
      ],
      "status": "pending"
    },
    {
      "id": "AR-76",
      "summary": "Append-only backend/main.mo: add a public query `canCreateTaskUI() : async Bool` (no new imports/types/maps/helpers/comments) that enables the frontend “Buat Task” button only when caller is registered, role is client, userStatus is #active, and caller has at least one active layanan meta via existing `layananIdsByOwnerClient` + `layananMetaById` (current requested implementation checks `meta.isActive` for any owned layanan).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-77",
      "summary": "Update ONLY `backend/main.mo` by appending the following Motoko function immediately before the final closing brace of the main `actor { ... }` (append-only; do not modify, delete, reorder, or reformat any existing code). Append the function exactly as written (including whitespace and semicolons):\n\npublic query ({ caller }) func canCreateTaskUI() : async Bool {\n    requireRegistered(caller);\n\n    if (not isClientRole(caller)) {\n        return false;\n    };\n\n    let status = getUserStatusInternal(caller);\n    switch (status) {\n        case (#active) {};\n        case (_) { return false };\n    };\n\n    switch (layananIdsByOwnerClient.get(caller)) {\n        case (null) { return false };\n        case (?ids) {\n            for (id in ids.vals()) {\n                switch (layananMetaById.get(id)) {\n                    case (?meta) {\n                        if (meta.isActive) { return true };\n                    };\n                    case (_) {};\n                };\n            };\n            return false;\n        };\n    };\n}",
      "reqIds": [
        "REQ-79"
      ],
      "status": "pending"
    },
    {
      "id": "AR-78",
      "summary": "Append-only change inside existing createTask: insert the provided hard validation block at the very top of the function body to enforce caller is registered client, status is #active, and caller has at least one active layanan meta; return \"NOT_ALLOWED\" when failing any check; STOP if any referenced identifier is missing.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-79",
      "summary": "Append-only: add shared method transitionTaskPhase(taskId:Text,newPhase:TaskPhase): async Text before actor closing brace, with role/ownership-based allowed transitions (client/am/partner cases), NOT_FOUND/NOT_ALLOWED/OK return strings, update task.phase and updatedAt = nowSync(), and write back to taskById; STOP if any referenced identifier is missing.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-80",
      "summary": "Update ONLY `backend/main.mo` by appending the provided Motoko method `transitionTaskPhase(taskId : Text, newPhase : TaskPhase) : async Text` immediately before the actor’s final closing brace `}`. The appended code must be byte-for-byte identical to the user-provided block (no refactors, no formatting changes, no renamed identifiers).",
      "reqIds": [
        "REQ-80"
      ],
      "status": "pending"
    },
    {
      "id": "AR-81",
      "summary": "Before applying the append, verify that every identifier referenced by the provided `transitionTaskPhase` block already exists in `backend/main.mo` (e.g., `requireRegistered`, `taskById`, `Task`, `TaskPhase`, `isClientRole`, `isAsistenmuRole`, `isPartnerRole`, `nowSync`). If any referenced identifier is missing, do not modify any file and stop the change.",
      "reqIds": [
        "REQ-81"
      ],
      "status": "pending"
    },
    {
      "id": "AR-82",
      "summary": "Make `superadminClaimed` persist across upgrades by changing its declaration from `var` to `stable var` in backend/main.mo, with no other code changes and no migration files.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-83",
      "summary": "In `backend/main.mo`, modify ONLY the declaration of `superadminClaimed` by replacing the exact line `var superadminClaimed = false;` with `stable var superadminClaimed = false;`. Do not change any other line, do not add any new files (including `migration.mo`), and do not modify any functions (including `claimSuperadmin`).",
      "reqIds": [
        "REQ-82"
      ],
      "status": "pending"
    },
    {
      "id": "AR-84",
      "summary": "Implement \"Model A\" Internal Login flow in frontend/src/pages/InternalLogin.tsx ONLY: allow backend calls (getCallerUser, isSuperadminClaimed, claimSuperadmin), II login gating, role card selection, single getCallerUser check on 'Ruang kerja', mismatch/registration/status warnings without auto-redirect, superadmin claim button/redirect logic, and redirect to fixed dashboard routes; do not modify any other frontend file or backend/main.mo.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-85",
      "summary": "Patch `frontend/src/pages/internal/InternalLogin.tsx` so the “Claim Superadmin” action calls the correct backend method `claimSuperadmin()` (not `saveCallerUserProfile()`/role assignment), resolving the unauthorized error and enabling superadmin claim.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-86",
      "summary": "Update InternalLogin.tsx to (1) guard Claim Superadmin click when actor is not ready (show inline warning instead of calling backend), (2) display a separate \"Claim Superadmin\" card that does not require selecting the superadmin role first, and (3) automatically hide/remove that claim card once superadmin has been successfully claimed (or when isSuperadminClaimed indicates already claimed).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-87",
      "summary": "Patch InternalLogin.tsx so the Claim Superadmin card/action is hidden/disabled until the backend actor is fully ready (e.g., require actorFetching===false), preventing repeated \"Backend belum siap\" warnings; also update the II button so after successful login it changes to \"Logout\".",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-88",
      "summary": "Update InternalLogin page: show ONLY role cards admin/finance/concierge/asistenmu/superadmin; each card includes its own \"Workspace\" button that checks only that card's role; show Claim Superadmin per Model A when superadmin not yet claimed; update footer text to \"Asistenku © 2026 PT. Asistenku Digital Indonesia\".",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-89",
      "summary": "Apply the uploaded dashboard reference styling (colors, background layout, and card shape/shadow) across ALL frontend pages (not just InternalLogin), using the image as the visual baseline.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-90",
      "summary": "Patch InternalLogin superadmin claim flow so it is not blocked by the \"only admins can assign user roles\" rule (superadmin exempt / does not trigger role-assignment paths) and becomes active immediately on successful claim (no admin-only validation message shown for superadmin).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-91",
      "summary": "Fix InternalLogin Claim Superadmin flow in frontend only: make the Claim card appear promptly once actor is ready (no multi-minute delay), ensure claim retry/recheck logic so errors are shown only when claim truly fails, and after successful claim permanently hide the Claim card with no redirect to dashboard.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-92",
      "summary": "Patch backend/main.mo claimSuperadmin(): replace AccessControl.assignRole(...) call with direct bootstrap of first admin (accessControlState.userRoles.add(caller,#admin); accessControlState.adminAssigned:=true;) while leaving all other logic unchanged; no other files modified.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-93",
      "summary": "Patch `backend/main.mo` in `public shared ({ caller }) func claimSuperadmin() : async ()` to remove the admin-gated call to `AccessControl.assignRole(...)` and instead bootstrap the first admin by directly writing to `accessControlState`.\n\nSpecifically, replace ONLY the single line:\n- `AccessControl.assignRole(accessControlState, caller, caller, #admin);`\n\nwith EXACTLY these two lines (and nothing else):\n- `accessControlState.userRoles.add(caller, #admin);`\n- `accessControlState.adminAssigned := true;`\n\nAll other logic and ordering inside `claimSuperadmin()` must remain unchanged.",
      "reqIds": [
        "REQ-113"
      ],
      "status": "pending"
    },
    {
      "id": "AR-94",
      "summary": "Ensure the backend compiles and the superadmin claim no longer fails with the error text \"Only admins can assign user roles\" when the first caller claims superadmin.",
      "reqIds": [
        "REQ-114"
      ],
      "status": "pending"
    },
    {
      "id": "AR-95",
      "summary": "Update ONLY `frontend/src/pages/SuperadminDashboard.tsx` to become a real tabbed Superadmin dashboard that fetches read-only data from existing backend queries via `useActor()`/`useInternetIdentity()`, with per-tab loading+error states, refresh buttons, anonymous-user gating (no actor calls), and no new pages/routes or backend changes; preserve existing visual style and footer.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-96",
      "summary": "Fix/upgrade InternalRegister.tsx (/internal/daftar): require Internet Identity login before the registration form is shown/enabled; use /assets/asistenku-horizontal.png logo (bigger h-12 md:h-14); add role picker cards (Admin/Finance/Supervisor/Management/Asistenmu/Concierge); submit via button calling actor.registerInternal({nama,email,whatsapp,role}) with disabled gating (not logged in, actor not ready, incomplete, loading); show success screen with manual \"Kembali ke Internal Login\" navigation; only modify InternalRegister.tsx and minimal App.tsx wiring if needed; no auto redirect/onLoad; do not touch external flows.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-97",
      "summary": "Update ONLY `SuperadminDashboard.tsx` Users tab: add real-time case-insensitive client-side search; restructure into 4 main cards (Pending Users all roles with Activate->set status active + refresh; Client/Partner/Internal sections grouped by status with tables; Detail modals allowing profile edits plus status updates and partner level (Junior/Senior/Expert) updates via existing backend endpoints). Also update header with centered welcome text, fix dashboard logo path to `/assets/asistenku-horizontal.png` (slightly larger), and enable Logout to clear identity and redirect to landing—do not change other tabs, routing, backend ID format/role logic/claim flow, or existing state structure.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-98",
      "summary": "Update ONLY `frontend/src/pages/dashboards/SuperadminDashboard.tsx` UX: (1) Details modal supports View/Edit modes with Edit/Cancel/Update buttons; Client fields editable; Partner editable + Level (Junior/Senior/Expert) + Status; Internal can update Status only; on successful Update close modal and auto-refresh Users list. (2) Make Users tab main cards and their subsections collapsible with Expand/Collapse (default open only Pending Users; others collapsed). (3) Replace in-card filtering search with separate \"Search Results\" panel (client-side across ALL users) shown only when query non-empty; compact table + pagination 5 rows/page with Prev/Next + Page X of Y; show \"No results found\" if none. (4) Ringkasan tab: Total Users card includes collapsible breakdown by role+status; add collapsible summary cards for Layanan Asistenku, Tasks, Financial Overview, and Master Data with placeholders when endpoints unavailable; keep Rates Snapshot as-is. (5) Keep UI styling consistent with existing cards and do not change global header/nav or other tabs’ behavior/routing/backend.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-99",
      "summary": "In `frontend/src/pages/dashboards/SuperadminDashboard.tsx`, implement Master Data tab with 4 collapsible sections and CRUD/config flows using existing actor endpoints: (A) Master Data Map table + inline key/value form (pushMasterData) + row delete (deleteMasterData); (B) Kamus Pekerjaan CRUD with add/edit form (modal or inline), multi-select TipePartner via checkboxes, upsertKamusPekerjaan + deleteKamusPekerjaan; (C) Aturan Beban CRUD with add/edit form, dropdowns for TipePartner and Pola Beban, upsertAturanBeban + deleteAturanBeban; (D) Konstanta Unit Client single-config card + update form via setKonstantaUnitClient, default display when null. Each section has independent loading/error/data + Refresh, uses same UI patterns as other tabs (white cards, Alert error, Loader2 spinner), and auto-refreshes its list after mutations; add small helpers for formatting + safe Nat parsing; do not change other tabs or routing and do not create new files.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-100",
      "summary": "STEP 2–3 SuperadminDashboard.tsx fixes: add per-section saving guards to prevent double-submit; fix dialog button types/handlers to avoid duplicate triggers; implement Kamus/Aturan soft-delete UX with default aktif-only tables plus 'Tampilkan Arsip' toggle and Aktif/Nonaktif badges; ensure Ringkasan tab always fetches/renders totals + partner rates snapshot and computes Master Data aktif vs arsip counts from fetched state (fetch Master Data if needed) with proper Refresh behavior.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-101",
      "summary": "SuperadminDashboard.tsx Master Data stability pass: add per-row Edit for Kamus & Aturan (and optional Map overwrite edit), fix archive to upsert with existing kode/id (never null) to prevent accidental record creation, enforce Active-only default with “Show Archived” toggle + badges, and ensure Ringkasan displays accurate derived counts/snapshots with Refresh fetching all datasets.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-102",
      "summary": "External Client/Partner Login + Register: enable Internet Identity login and manual Workspace flow, plus backend registration calls, with strict scope limited to 4 external pages; no new routes; no auto redirects; no getCallerUser on mount; add loading/error states and anti-double-submit guards; show success state with manual workspace button after registration.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-103",
      "summary": "Patch ONLY /client/register and /partner/register pages to add II login and enable submit; also update logo path globally to /assets/asistenku-horizontal.png and perform a build.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-105",
      "summary": "Perform a compile/runtime sanity check after the global logo path update to ensure the app loads without a blank screen, and navigation across the existing routes continues to work.",
      "reqIds": [
        "REQ-190"
      ],
      "status": "pending"
    },
    {
      "id": "AR-106",
      "summary": "STRICT routing cleanup: modify ONLY `frontend/src/App.tsx` to remove/comment out `/client/*` and `/partner/*` cases and keep only `/external/*` public routes; update link targets in `frontend/src/components/asistenku/LandingPage.tsx` and `frontend/src/components/asistenku/Header.tsx` to point to `/external/*` paths; no backend changes, no external pages changes, no new routes/components/files, no layout/text/styling changes.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-107",
      "summary": "STEP 1 (frontend-only): Update ONLY external Client/Partner Login/Register pages to remove legacy /client/* and /partner/* route strings, enforce /external/* navigation, and implement click-only workspace gating via actor.getCallerUser() then actor.getMyStatus() with status-based blocking and explicit Back buttons (no App.tsx/backend changes, no auto-redirect on load).",
      "reqIds": [],
      "status": "in_progress"
    },
    {
      "id": "AR-108",
      "summary": "STEP 2 (backend minimal): Patch backend/main.mo to add public getMyStatus():UserStatus for caller (auth-gated), ensure registerClient/registerPartner set default status pending, ensure claimSuperadmin sets caller status active; keep changes minimal and compatible with frontend status gate.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-109",
      "summary": "Append-only backend/main.mo: implement internal-only Layanan V4 (types + stable storage + runtime maps + preupgrade/postupgrade conversions) with LV4-<Nat> IDs and CRUD-ish methods (create/edit/toggle active/archive/list all/list by client) gated to superadmin/admin/finance; do not modify existing code or V1/V2/V3.",
      "reqIds": [],
      "status": "in_progress"
    },
    {
      "id": "AR-110",
      "summary": "Modify ONLY `backend/main.mo` to implement the new “Layanan V4” system strictly as an append-only change: add all new code at the very end of the actor (immediately before the final closing brace `}`) without modifying, deleting, moving, reformatting, or reorganizing any existing lines. Do not create any new files.",
      "reqIds": [
        "REQ-200"
      ],
      "status": "pending"
    },
    {
      "id": "AR-111",
      "summary": "In the appended block, define the Layanan V4 types exactly as specified: `public type LayananTypeV4 = { #TENANG; #RAPI; #FOKUS; #JAGA; #EFEKTIF };` and `public type LayananV4 = { id: Text; clientPrincipal: Principal; tipe: LayananTypeV4; unitTotal: Nat; unitUsed: Nat; hargaPerUnit: Nat; asistenmuPrincipal: Principal; sharedWith: [Principal]; isActive: Bool; isArchived: Bool; createdAt: Int; createdBy: Principal; updatedAt: Int; updatedBy: Principal; };`.",
      "reqIds": [
        "REQ-201"
      ],
      "status": "pending"
    },
    {
      "id": "AR-112",
      "summary": "In the appended block, add new stable storage dedicated to V4 only (unique names; do not collide with existing vars): `stable var layananV4Counter : Nat = 0;`, `stable var layananV4Store : [(Text, LayananV4)] = [];`, and `stable var layananV4IndexByClient : [(Principal, [Text])] = [];`. Also add runtime `HashMap`/`Map` structures for fast access: (1) `layananV4ById` keyed by `Text` and (2) `layananV4IdsByClient` keyed by `Principal` to `[Text]`. Keep the stable and runtime stores consistent on every mutation.",
      "reqIds": [
        "REQ-202"
      ],
      "status": "pending"
    },
    {
      "id": "AR-113",
      "summary": "In the appended block, implement LV4 id generation using the exact format `LV4-<Nat>` (e.g., `LV4-1`, `LV4-2`, …) based on `layananV4Counter` and ensure it increments monotonically.",
      "reqIds": [
        "REQ-203"
      ],
      "status": "pending"
    },
    {
      "id": "AR-114",
      "summary": "In the appended block, add a new internal-only authorization helper that allows only callers whose existing role is one of: `superadmin`, `admin`, or `finance`. If not allowed, it must trap with the exact message `\"Unauthorized\"`. This helper must reuse the existing role system already present in `backend/main.mo` and must not modify any existing access control logic.",
      "reqIds": [
        "REQ-204"
      ],
      "status": "pending"
    },
    {
      "id": "AR-115",
      "summary": "In the appended block, implement the following public internal-only Layanan V4 methods with the exact names/parameters/behaviors specified, without changing any existing V1/V2/V3 layanan methods or other domains:\n1) `createLayananV4(input)` creates a new record: required input fields: `clientPrincipal`, `tipe`, `unitTotal`, `hargaPerUnit`, `asistenmuPrincipal`, `sharedWith` (may be empty), `isActive` (default `true` if not provided). It must set `unitUsed=0`, `isArchived=false`, set created/updated timestamps and principals to the caller, persist to store + index-by-client, and return the created `LayananV4`.\n2) `editLayananV4(layananId, patch)` allows editing ONLY: `clientPrincipal` (update index if changed), `tipe`, `unitTotal` (validate `unitTotal >= unitUsed`), `hargaPerUnit`, `asistenmuPrincipal`, `sharedWith`, `isActive`. It must NOT allow editing: `id`, `unitUsed`, `isArchived`, `createdAt`, `createdBy`. If layanan not found OR already archived, trap exactly `\"Not found\"`. If `unitTotal < unitUsed`, trap exactly `\"unitTotal cannot be less than unitUsed\"`. Must set `updatedAt/updatedBy` and return the updated `LayananV4`.\n3) `setLayananV4Active(layananId, isActive)` rejects if archived, updates `updatedAt/updatedBy`, returns updated `LayananV4`.\n4) `archiveLayananV4(layananId)` sets `isArchived=true`, `isActive=false`, updates `updatedAt/updatedBy`, returns updated `LayananV4`.\n5) `listAllLayananV4(includeArchived : Bool)` returns all V4 records, filtered by `isArchived` according to the flag.\n6) `listLayananV4ByClient(clientPrincipal, includeArchived : Bool)` returns V4 records for a specific client principal, filtered by `isArchived` according to the flag.",
      "reqIds": [
        "REQ-205"
      ],
      "status": "pending"
    },
    {
      "id": "AR-116",
      "summary": "Perform a backend compile sanity pass after implementing Layanan V4 to ensure `backend/main.mo` compiles successfully and that no existing public methods (registration, claimSuperadmin, master data, status/partner-level utilities, etc.) have changed behavior due to the append-only patch.",
      "reqIds": [
        "REQ-206"
      ],
      "status": "pending"
    }
  ],
  "gameProjectType": "none",
  "projectName": "Static Asistenku UI pages + routing (frontend-only, no backend/auth/data)",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}